<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>马太福音第一章：君王的家谱与降生</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap');

        :root {
            --royal-purple: #6b21a8;
            --royal-light: #f3e8ff;
            --gold-accent: #d97706;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #faf5ff; /* Very light purple bg */
            color: #1f2937;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--royal-purple);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--royal-purple);
            border-radius: 2px;
        }

        /* Custom Card Styling */
        .verse-card {
            border-left: 4px solid transparent;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .verse-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .academic-box {
            background-color: #f8fafc;
            border-left: 3px solid #475569; /* Slate */
        }
        
        .devotional-box {
            background-color: #fffbeb;
            border-left: 3px solid #d97706; /* Amber */
        }

        /* Chart Container */
        .chart-container {
            position: relative; 
            height: 300px; 
            width: 100%;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header / Navigation -->
    <nav class="bg-white shadow-md sticky top-0 z-50 border-b border-purple-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-xl font-bold text-purple-900 serif">
                        <i class="fas fa-crown mr-2 text-yellow-600"></i> 马太福音 1章
                    </span>
                </div>
                <div class="flex space-x-6 items-center">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-3 py-2 text-sm">全景概览</button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-3 py-2 text-sm text-gray-500 hover:text-purple-700">逐节研读</button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-3 py-2 text-sm text-gray-500 hover:text-purple-700">解经方法论</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Content injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-purple-900 text-purple-200 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-white mb-2">"必有童女怀孕生子，人要称他的名为以马内利。" (1:23)</p>
            <p class="text-xs opacity-70">马太福音第一章研经报告 | 历史根基 & 生命应用</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "新旧约的枢纽：王权的应许与道成肉身",
                summary: "马太福音第一章不仅仅是一份枯燥的名单，它是连接旧约预言与新约实现的宏伟桥梁。前17节通过家谱确立了耶稣作为'大卫的子孙'（合法的王）和'亚伯拉罕的后裔'（万国的福）的法律地位；后半部分则通过约瑟的视角，记载了道成肉身的超自然奥秘——以马内利（神与我们同在）。",
                stats: [
                    { label: "历史跨度", value: "~2000 年", icon: "fas fa-history" },
                    { label: "代数结构", value: "3 x 14 代", icon: "fas fa-layer-group" },
                    { label: "核心女性", value: "5 位", icon: "fas fa-female" }
                ]
            },
            sections: [
                {
                    id: "genealogy",
                    title: "壹 · 王者的家谱 (1:1-17)",
                    desc: "历史的破碎与上帝的信实",
                    verses: [
                        {
                            ref: "1:1",
                            text: "亚伯拉罕的后裔，大卫的子孙，耶稣基督的家谱：",
                            academic: {
                                title: "神学性的标题",
                                content: "原文直译为'耶稣基督的创世记(Biblos Geneseos)'。马太将耶稣置于犹太历史的两个高峰：1. 亚伯拉罕（圣约的开始，创12章）；2. 大卫（王权的顶峰，撒下7章）。'基督'(Christos)是希伯来语'弥赛亚'的希腊文翻译，意为受膏者。"
                            },
                            devotional: {
                                title: "你的生命有根有基",
                                content: "耶稣没有凭空降临，他进入了人类具体的历史中。这提醒我们，我们的信仰不是虚无缥缈的哲理，而是建立在神几千年来信实守约的历史根基之上。你的生命故事也被编织在神宏大的救赎计划中。"
                            }
                        },
                        {
                            ref: "1:3-6 (综览)",
                            text: "...犹大从他玛氏生...撒门从喇合氏生...波阿斯从路得氏生...大卫从乌利亚的妻子生所罗门...",
                            academic: {
                                title: "家谱中的四位女性",
                                content: "古代犹太家谱通常只记男性。但这列出了四位女性：他玛（乱伦/伪装妓女）、喇合（外邦人/妓女）、路得（摩押人/受咒诅的族类）、拔示巴（乌利亚的妻/奸淫受害者）。这在第一世纪极不寻常，打破了血统纯正论和男性中心主义。"
                            },
                            devotional: {
                                title: "恩典覆盖羞耻",
                                content: "神的完美旨意竟然通过这些看似'不完美'、'外邦'甚至'有丑闻'的管道成就。这告诉我们：没有人的过去是太破碎以至于神无法使用的。神不以我们的背景为耻，祂将我们的软弱编织进祂荣耀的家谱中。"
                            }
                        },
                        {
                            ref: "1:16",
                            text: "雅各生约瑟，就是马利亚的丈夫。那称为基督的耶稣是从马利亚生的。",
                            academic: {
                                title: "文法的巨变",
                                content: "之前的格式都是'A生B'（主动语态）。到了这里，希腊文突然转变为被动语态——'耶稣是从马利亚生的(egennēthē)'。虽然约瑟是家谱的终点，提供了法律上的继承权（养父），但他并非耶稣生物学上的父亲。马太精准地保留了童女怀孕的神学空间。"
                            },
                            devotional: {
                                title: "不仅是人的儿子",
                                content: "在这个转折点上，人类的努力终止了，神的作为开始了。无论人类历史如何繁衍，唯有神亲自的介入才能带来真正的拯救。我们得救不是靠血气，乃是靠神。"
                            }
                        }
                    ]
                },
                {
                    id: "birth",
                    title: "贰 · 圣灵的感孕 (1:18-25)",
                    desc: "困境中的顺服与以马内利",
                    verses: [
                        {
                            ref: "1:18-19",
                            text: "...马利亚已经许配了约瑟...发现她怀了孕。她丈夫约瑟是个义人，不愿意明明地羞辱她...",
                            academic: {
                                title: "订婚的法律效力与'义人'的含义",
                                content: "一世纪犹太人的订婚(Betrothal)具有法律效力，解除需写休书。约瑟被称为'义人(Dikaios)'，传统上指严格遵守律法者（理应公开石刑或休妻），但马太在此赋予'义'新的含义：即慈怜。他试图在律法公义和对马利亚的怜悯之间寻找平衡（暗暗休她）。"
                            },
                            devotional: {
                                title: "当恩典遇上两难",
                                content: "约瑟展现了真正的敬虔：即便在看似被背叛的痛苦中，依然选择保护对方的尊严而非报复。当你面对他人的冒犯或无法理解的处境时，你是选择'明明的羞辱'（定罪），还是选择'义人'的慈怜？"
                            }
                        },
                        {
                            ref: "1:21",
                            text: "她将要生一个儿子，你要给他起名叫耶稣，因他要将自己的百姓从罪恶里救出来。",
                            academic: {
                                title: "名字的神学意义",
                                content: "'耶稣'(Iēsous)是希伯来名'约书亚'(Yehoshua)的希腊形式，意为'耶和华拯救'。当时的犹太人期待政治上的弥赛亚（从罗马统治下救出来），但天使明确界定了拯救的本质：'从罪恶里(hamartiōn)'。这是对弥赛亚使命的根本性重新定义。"
                            },
                            devotional: {
                                title: "解决根本问题",
                                content: "我们常求神救我们脱离贫穷、疾病或困难的环境，但神最看重的是救我们脱离'罪'。罪是隔绝我们与神的根源。耶稣不仅是我们的生活顾问，祂首先是我们的救主(Savior)。"
                            }
                        },
                        {
                            ref: "1:23",
                            text: "必有童女怀孕生子...人要称他的名为以马内利...（翻出来就是'神与我们同在'）。",
                            academic: {
                                title: "以赛亚预言的应验 (Almah争论)",
                                content: "引用自赛7:14。希伯来文'Almah'可指年轻女子或处女，七十士译本特意选用'Parthenos'（明确指处女）。马太确认这是神迹性的童女怀孕。'以马内利'构成了马太福音的框架：1:23是'神与我们同在'的开始，28:20是'我就常与你们同在'的永恒应许。"
                            },
                            devotional: {
                                title: "不再孤单",
                                content: "宗教往往是人寻找神，但基督教是神来寻找人。'以马内利'意味着神打破了沉默，跨越了距离，进入我们的混乱、痛苦和日常生活中。无论你现在感觉多孤单，事实是：神与你同在。"
                            }
                        }
                    ]
                }
            ]
        };

        // --- State Management ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all' // all, academic, devotional
        };

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-gray-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-gray-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            
            window.scrollTo(0,0);
        }

        // --- Render Views ---

        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro Card -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-sm border-t-4 border-purple-800">
                        <div class="flex items-center mb-4">
                            <span class="bg-purple-100 text-purple-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Overview</span>
                            <h2 class="text-3xl font-bold serif text-gray-800">${chapterData.intro.title}</h2>
                        </div>
                        <p class="text-gray-600 leading-relaxed mb-8 text-lg">
                            ${chapterData.intro.summary}
                        </p>
                        
                        <!-- Stats Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            ${chapterData.intro.stats.map(stat => `
                                <div class="flex items-center p-4 bg-purple-50 rounded-lg border border-purple-100">
                                    <div class="w-12 h-12 rounded-full bg-white flex items-center justify-center text-purple-600 shadow-sm mr-4 text-xl">
                                        <i class="${stat.icon}"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500 uppercase font-bold">${stat.label}</p>
                                        <p class="text-xl font-bold text-gray-800">${stat.value}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar -->
                    <div class="lg:col-span-4 bg-gradient-to-b from-purple-900 to-indigo-900 text-white p-8 rounded-xl shadow-lg flex flex-col justify-between relative overflow-hidden">
                        <i class="fas fa-scroll absolute -top-4 -right-4 text-9xl text-white opacity-10"></i>
                        
                        <div>
                            <h3 class="text-xl font-bold mb-4 border-b border-purple-700 pb-2">家谱的结构 (1:17)</h3>
                            <ul class="space-y-4 text-purple-100 text-sm">
                                <li class="flex items-center">
                                    <span class="w-6 h-6 rounded-full bg-yellow-500 text-black font-bold flex items-center justify-center text-xs mr-3">1</span>
                                    <span>亚伯拉罕 → 大卫 <br><span class="text-xs opacity-60">以色列王权的兴起</span></span>
                                </li>
                                <li class="flex items-center">
                                    <span class="w-6 h-6 rounded-full bg-yellow-500 text-black font-bold flex items-center justify-center text-xs mr-3">2</span>
                                    <span>大卫 → 被掳巴比伦 <br><span class="text-xs opacity-60">王权的衰落与审判</span></span>
                                </li>
                                <li class="flex items-center">
                                    <span class="w-6 h-6 rounded-full bg-yellow-500 text-black font-bold flex items-center justify-center text-xs mr-3">3</span>
                                    <span>被掳 → 基督 <br><span class="text-xs opacity-60">黑暗中的等待与黎明</span></span>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="mt-8 pt-6 border-t border-purple-700">
                             <p class="text-center font-serif text-xl">"14 + 14 + 14"</p>
                             <p class="text-center text-xs opacity-60">Gematria: David (DVD) = 4+6+4 = 14</p>
                        </div>
                    </div>
                </div>

                <!-- Chart Section -->
                <div class="bg-white p-6 rounded-xl shadow-sm mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-gray-800"><i class="fas fa-chart-line text-purple-600 mr-2"></i> 历史的波峰与波谷：通向基督之路</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="historyChart"></canvas>
                    </div>
                </div>
            `;
            initChart();
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#faf5ff]/95 backdrop-blur py-4 mb-6 border-b border-purple-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-purple-900 serif">逐节深度研读</h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-gray-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-purple-700 text-white font-bold' : 'text-gray-500 hover:bg-gray-100'}">全部</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-600 text-white font-bold' : 'text-gray-500 hover:bg-gray-100'}">学术解经</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-amber-600 text-white font-bold' : 'text-gray-500 hover:bg-gray-100'}">灵修应用</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2">
                            <div class="w-1.5 h-8 bg-purple-600 mr-4 rounded"></div>
                            <div>
                                <h3 class="text-2xl font-bold text-gray-800">${section.title}</h3>
                                <p class="text-sm text-gray-500 font-serif italic">${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            return `
                <div class="verse-card bg-white rounded-lg shadow-sm overflow-hidden mb-6 border border-gray-100">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-gray-50 to-white p-5 border-b border-gray-100">
                        <span class="inline-block px-2 py-0.5 bg-purple-100 text-purple-700 text-xs font-bold rounded mb-2 font-mono">${verse.ref}</span>
                        <p class="text-gray-800 font-serif text-lg leading-relaxed">"${verse.text}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-gray-100">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-600">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">权威解经</h4>
                            </div>
                            <h5 class="font-bold text-slate-800 mb-2">${verse.academic.title}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify">${verse.academic.content}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-amber-700">
                                <i class="fas fa-pray mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用</h4>
                            </div>
                            <h5 class="font-bold text-amber-900 mb-2">${verse.devotional.title}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify">${verse.devotional.content}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-3 serif text-purple-900">解经方法论总结</h2>
                        <p class="text-gray-600">理性与灵性如同鸟之双翼，缺一不可。</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600">
                            <div class="text-slate-600 text-4xl mb-4"><i class="fas fa-search"></i></div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">权威/学术性解经 (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">What it meant (当时的原意)</p>
                            
                            <ul class="space-y-3 text-sm text-gray-600">
                                <li class="flex items-start"><i class="fas fa-check text-slate-400 mt-1 mr-2"></i> <strong>原则：</strong> 严谨考据原文（希腊文/希伯来文）、历史文化背景、作者意图及神学脉络。</li>
                                <li class="flex items-start"><i class="fas fa-check text-slate-400 mt-1 mr-2"></i> <strong>本章应用：</strong> 分析"家谱的结构"、"义人"的律法定义、"Almah"的翻译争议。</li>
                                <li class="flex items-start"><i class="fas fa-check text-slate-400 mt-1 mr-2"></i> <strong>适用范围：</strong> 建立信仰根基、防止异端、神学教育。</li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-amber-500">
                            <div class="text-amber-500 text-4xl mb-4"><i class="fas fa-fire"></i></div>
                            <h3 class="text-xl font-bold text-gray-800 mb-2">灵修/应用性解经 (Devotional)</h3>
                            <p class="text-xs text-amber-400 mb-6 uppercase tracking-wider">What it means for me (现在的意义)</p>
                            
                            <ul class="space-y-3 text-sm text-gray-600">
                                <li class="flex items-start"><i class="fas fa-check text-amber-400 mt-1 mr-2"></i> <strong>原则：</strong> 在真理根基上，通过圣灵的光照，寻找经文与个人生命、现代生活的连接点。</li>
                                <li class="flex items-start"><i class="fas fa-check text-amber-400 mt-1 mr-2"></i> <strong>本章应用：</strong> 学习约瑟的顺服、感受以马内利的安慰、破碎生命被神使用。</li>
                                <li class="flex items-start"><i class="fas fa-check text-amber-400 mt-1 mr-2"></i> <strong>适用范围：</strong> 个人灵修、教牧辅导、生命转化。</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }

        function initChart() {
            const ctx = document.getElementById('historyChart').getContext('2d');
            
            // Data representing the glory/state of Israel
            // 1. Abraham (Covenant) -> David (Peak) -> Exile (Low) -> Jesus (Fulfillment)
            const labels = ['亚伯拉罕', '以撒/雅各', '犹大', '喇合/路得', '大卫王 (顶峰)', '所罗门', '列王衰败', '被掳巴比伦 (低谷)', '回归/静默期', '约瑟/马利亚', '耶稣基督'];
            const dataPoints = [20, 30, 40, 50, 100, 90, 40, 10, 20, 30, 100];

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '以色列历史的救赎轨迹',
                        data: dataPoints,
                        borderColor: '#6b21a8', // Purple
                        backgroundColor: 'rgba(107, 33, 168, 0.1)',
                        borderWidth: 2,
                        tension: 0.4, // Smooth curves
                        pointBackgroundColor: '#d97706', // Gold points
                        pointRadius: 4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            display: false, // Hide Y axis numbers
                            min: 0,
                            max: 120
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: {
                                    family: "'Noto Sans SC', sans-serif",
                                    size: 10
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: '#1f2937',
                            titleFont: { family: "'Noto Serif SC', serif" },
                            callbacks: {
                                label: function(context) {
                                    if (context.parsed.y === 100 && context.label.includes('大卫')) return ' 属世王权的顶峰';
                                    if (context.parsed.y === 10) return ' 国家的灭亡与审判';
                                    if (context.parsed.y === 100 && context.label.includes('耶稣')) return ' 永恒国度的降临';
                                    return '';
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>