<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>John 15: The True Vine | 约翰福音15章：真葡萄树</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Vine Purple - Fruit/Joy/Royalty */
            --theme-primary: #7e22ce; 
            /* Shoot Green - Life/Growth */
            --theme-accent: #65a30d;
            /* Pruning Brown - Discipline/Earth */
            --theme-dark: #713f12;
            /* Background */
            --theme-bg: #fdf4ff;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #1e293b;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #e9d5ff; /* Purple 200 */
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px -5px rgba(126, 34, 206, 0.15);
            border-left-color: var(--theme-primary);
        }

        .academic-box {
            background-color: #f8fafc; /* Slate 50 */
            border-left: 3px solid #475569; /* Slate 600 */
            color: #334155;
        }
        
        .devotional-box {
            background-color: #f0fdf4; /* Green 50 */
            border-left: 3px solid #65a30d; /* Green 600 */
            color: #365314;
        }

        /* Vine Growth Animation */
        .vine-stem {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: growVine 4s linear infinite;
        }
        @keyframes growVine {
            0% { stroke-dashoffset: 1000; }
            100% { stroke-dashoffset: 0; }
        }

        /* Grapes Appear Animation */
        .grape {
            transform: scale(0);
            transform-origin: center;
            animation: popGrape 3s infinite ease-out;
        }
        @keyframes popGrape {
            0%, 40% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            60% { transform: scale(1); opacity: 1; }
            90% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-purple-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-purple-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-seedling mr-2 text-purple-600"></i> 约翰福音 15章</span>
                        <span class="text-xs text-purple-700 en-text font-normal ml-9">The Gospel of John Chapter 15</span>
                    </span>
                </div>
                <div class="flex space-x-8 items-center">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center">
                        全景概览 <br><span class="text-[10px] uppercase opacity-70 en-text">Overview</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-purple-700 text-center">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-purple-700 text-center">
                        方法论 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-purple-200 mb-1">"我是葡萄树，你们是枝子"</p>
            <p class="text-sm italic text-slate-500 mb-2 en-text">"I am the vine; you are the branches."</p>
            <p class="text-xs opacity-70">约翰福音第15章中英对照研经报告 | The True Vine</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "生命的联结：真葡萄树",
                title_en: "Vital Connection: The True Vine",
                summary_zh: "在约翰福音第15章，耶稣使用'葡萄树'这一旧约中象征以色列的图像，宣告自己是'真'葡萄树。本章的核心在于'常在'（Abide）与'结果子'（Bear Fruit）。耶稣解释了信徒与祂之间有机的生命联系，这是结果子的唯一途径。同时，祂也将'彼此相爱'的命令升级为'像我爱你们一样'，并预警了世界对信徒的恨恶。",
                summary_en: "In John 15, Jesus uses the 'Vine', an OT symbol for Israel, declaring Himself the 'True' Vine. The core themes are 'Abiding' and 'Bearing Fruit'. Jesus explains the organic life-connection between believers and Himself as the only way to fruitfulness. He also elevates the command to 'love one another' to 'as I have loved you', and warns of the world's hatred.",
                concepts: [
                    { title: "葡萄树", title_en: "Vine", greek: "Ampelos", color: "text-purple-700", desc_zh: "旧约指以色列（常是失败的），耶稣是'真'葡萄树，生命的源头。", desc_en: "OT symbol for Israel (often failing); Jesus is the 'True' Vine, source of life." },
                    { title: "常在", title_en: "Abide/Remain", greek: "Menō", color: "text-green-600", desc_zh: "保持连接、居住、停留。不仅是位置上的，更是关系上的持续。", desc_en: "To stay, dwell, remain. Not just positional, but relational continuity." },
                    { title: "修理干净", title_en: "Prune/Clean", greek: "Kathairō", color: "text-amber-700", desc_zh: "农艺术语'修剪'，同时也意为'洁净'。神通过道和管教除去杂质。", desc_en: "Agricultural 'pruning', also means 'to cleanse'. God removes impurities via Word/discipline." }
                ]
            },
            sections: [
                {
                    id: "true-vine",
                    title: "壹 · 真葡萄树与栽培的人 (15:1-3)",
                    title_en: "The True Vine & The Vinedresser",
                    desc: "修剪的痛与益 | Pain & Gain of Pruning",
                    verses: [
                        {
                            ref: "15:1-2",
                            text_zh: "我是真葡萄树，我父是栽培的人。凡属我不结果子的枝子，他就剪去；凡结果子的，他就修理干净，使枝子结果子更多。",
                            text_en: "I am the true vine, and my Father is the vinedresser. Every branch in me that does not bear fruit he takes away, and every branch that does bear fruit he prunes, that it may bear more fruit.",
                            academic: {
                                title: "旧约背景与Kathairō的双关",
                                content_zh: "以赛亚书5章将以色列描绘为'不结果子的葡萄园'。耶稣自称'真'（Alethinos）葡萄树，意指祂才是神原本心意中的以色列，是真正忠诚的儿子。希腊文'修理干净'（Kathairei）与第3节的'干净'（Katharoi）是词根双关。修剪的过程既是农艺上的去除冗枝，也是神学上的'洁净'。'剪去'（Airei）可能指审判，也可能指'扶起'（Lift up，虽然多数现代译本倾向于审判/除去）。",
                                content_en: "Isaiah 5 depicts Israel as a fruitless vineyard. Jesus as the 'True' (Alethinos) Vine fulfills Israel's failed vocation. 'Prunes' (Kathairei) and 'Clean' (Katharoi) are a wordplay. Pruning is both agricultural and theological cleansing. 'Takes away' (Airei) implies judgment, though some argue for 'lifts up' (to sunlight); context of 'fire' (v.6) supports judgment."
                            },
                            devotional: {
                                title: "不要抗拒神的剪刀",
                                content_zh: "当我们遭遇失去（金钱、关系、健康）时，常以为神在惩罚我们。但耶稣说，这是'修剪'。甚至那些结果子的枝子（表现好的信徒）也要被修剪。为什么？因为神不满足于你'有果子'，祂要你'结果子更多'。修剪虽痛，却是神对你生命潜力的最大肯定。祂在剪去那些消耗你生命却不产出永恒价值的杂乱枝条。",
                                content_en: "When we suffer loss, we think God is punishing. Jesus calls it 'pruning'. Even fruitful branches are pruned. Why? God isn't satisfied with 'some fruit'; He wants 'more fruit'. Pruning hurts, but it's God's affirmation of your potential. He is cutting away clutter that drains life but yields no eternal value."
                            }
                        }
                    ]
                },
                {
                    id: "abiding",
                    title: "贰 · 住在主里面 (15:4-8)",
                    title_en: "Abiding in Him",
                    desc: "离了我，你们就不能做什么 | Apart from Me, Nothing",
                    verses: [
                        {
                            ref: "15:4-5",
                            text_zh: "你们要常在我里面，我也常在你们里面... 我是葡萄树，你们是枝子... 离了我，你们就不能做什么。",
                            text_en: "Abide in me, and I in you... I am the vine; you are the branches... for apart from me you can do nothing.",
                            academic: {
                                title: "互为内住的神学 (Mutual Indwelling)",
                                content_zh: "‘常在’（Menō）是约翰福音的关键动词（出现40次）。这不仅是一种静态的地位（Position），更是一种动态的关系维持（Maintenance）。枝子与树的生命是互通的。‘不能做什么’使用了强烈的双重否定（Ou... Ouden），直译为‘一点都不可能做任何事’。这彻底粉碎了伯拉纠主义（Pelagianism，认为人靠自己能行善）的可能性。",
                                content_en: "'Abide' (Menō) appears 40 times in John. It's not just static position, but dynamic maintenance of relationship. The life flow is organic. 'Can do nothing' uses a double negative (Ou... Ouden) - 'absolutely nothing'. This shatters Pelagianism (human ability to do good apart from grace)."
                            },
                            devotional: {
                                title: "停止挣扎，开始连接",
                                content_zh: "枝子不需要‘努力’去挤出葡萄，它只需要‘紧贴’树干，养分自然会流过来，果子自然会结出来。许多基督徒活得很累，因为他们在‘模仿’耶稣，而不是‘连结’耶稣。结果子是生命的自然流露，不是劳苦的业绩。你今天的任务不是‘做’更多，而是‘住’得更深。",
                                content_en: "A branch doesn't 'try' to squeeze out grapes; it just 'clings' to the vine. Sap flows, fruit comes naturally. Many Christians are exhausted because they 'imitate' Jesus instead of 'connecting' to Him. Fruit is overflow, not performance. Your job today isn't to 'do' more, but to 'abide' deeper."
                            }
                        }
                    ]
                },
                {
                    id: "friends",
                    title: "叁 · 从仆人到朋友 (15:12-17)",
                    title_en: "From Servants to Friends",
                    desc: "启示带来的升迁 | Promotion via Revelation",
                    verses: [
                        {
                            ref: "15:15",
                            text_zh: "以后我不再称你们为仆人，因仆人不知道主人所做的事。我乃称你们为朋友；因我从我父所听见的，已经都告诉你们了。",
                            text_en: "No longer do I call you servants, for the servant does not know what his master is doing; but I have called you friends, for all that I have heard from my Father I have made known to you.",
                            academic: {
                                title: "Doulos (奴仆) vs Philos (朋友)",
                                content_zh: "在古代，‘神的朋友’（如亚伯拉罕、摩西）是极高的头衔。耶稣将门徒的地位从‘Doulos’（完全顺服、无权知情）提升到‘Philos’（亲密、知情）。提升的基础是‘启示’：耶稣毫无保留地分享了父的心意。但这并不废除顺服（14节‘若遵行...就是朋友’），而是将顺服建立在理解和爱的基础上，而非盲从。",
                                content_en: "'Friend of God' was a rare title (Abraham, Moses). Jesus promotes disciples from 'Doulos' (obedient, uninformed) to 'Philos' (intimate, informed). The basis is 'Revelation': Jesus shared the Father's heart fully. This doesn't abolish obedience (v.14), but grounds it in understanding and love, not blind servitude."
                            },
                            devotional: {
                                title: "你不仅是工具，你是知己",
                                content_zh: "神不只想要一群听话的工人，祂想要懂祂心意的朋友。如果你只把神当老板，你只会问‘我要做什么’；如果你把神当朋友，你会问‘你在想什么’。耶稣邀请你进入祂的内室，分享祂的计划和忧伤。你的祷告生活是像向老板汇报工作，还是像与知己倾心吐意？",
                                content_en: "God doesn't just want obedient workers; He wants friends who understand His heart. If God is just Boss, you ask 'What to do?'; if Friend, you ask 'What are You thinking?'. Jesus invites you into His inner circle. Is your prayer life a status report to a Boss, or a heart-to-heart with a Best Friend?"
                            }
                        }
                    ]
                },
                {
                    id: "hatred",
                    title: "肆 · 世界的恨恶 (15:18-27)",
                    title_en: "The Hatred of the World",
                    desc: "被拣选的代价 | The Cost of Being Chosen",
                    verses: [
                        {
                            ref: "15:19",
                            text_zh: "你们若属世界，世界必爱属自己的... 只因你们不属世界，乃是我从世界中拣选了你们，所以世界就恨你们。",
                            text_en: "If you were of the world, the world would love you as its own; but because you are not of the world, but I chose you out of the world, therefore the world hates you.",
                            academic: {
                                title: "拣选与敌对 (Election & Hostility)",
                                content_zh: "‘世界’（Kosmos）指敌挡神的人类组织系统。耶稣指出了一个社会学法则：群体爱‘同类’，排斥‘异类’。拣选（Eklegomai）意味着分离。信徒被从世界中‘挑出来’，这就打破了与世界的共生关系，必然导致世界的敌视。这种恨不是针对信徒个人，而是针对他们身上所带有的基督的属性。",
                                content_en: "'World' (Kosmos) is the anti-God system. Jesus states a sociological law: Groups love their own, reject the alien. Election (Eklegomai) means separation. Being 'picked out' breaks the symbiosis with the world, inevitably causing hostility. The hatred isn't personal; it's against the Christ-nature in them."
                            },
                            devotional: {
                                title: "不受欢迎的勋章",
                                content_zh: "如果世界为你鼓掌，你可能正走在错误的路上。如果你的价值观、生活方式从未冒犯过周围的世俗文化，那可能说明你已经‘属世界’了。被世界恨恶不是失败，而是身份的验证——它是你属于耶稣的勋章。不要为了世界的‘点赞’而牺牲真理。如果你像耶稣，世界对你的态度也会像对耶稣一样。",
                                content_en: "If the world applauds you, you might be on the wrong path. If your values never offend secular culture, you might be 'of the world'. Being hated by the world isn't failure; it's ID verification—a badge that you belong to Jesus. Don't sacrifice Truth for the world's 'likes'. If you are like Jesus, the world will treat you like Jesus."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all'
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-slate-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-slate-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-purple-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-purple-100 text-purple-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Focus</span>
                            <h2 class="text-3xl font-bold serif text-purple-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-slate-400 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-slate-600 leading-relaxed mb-4 text-lg border-l-4 border-purple-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-slate-500 leading-relaxed text-sm italic en-text border-l-4 border-slate-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col items-center text-center transition hover:bg-purple-50 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-slate-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-slate-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-slate-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-slate-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: The Vine -->
                    <div class="lg:col-span-4 bg-gradient-to-br from-purple-900 to-slate-900 text-white p-8 rounded-xl shadow-lg flex flex-col justify-center items-center relative overflow-hidden">
                         <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/leaf.png')]"></div>
                         
                         <h3 class="text-xl font-bold mb-1 z-10 text-center text-purple-200">常在主里</h3>
                         <p class="text-xs text-slate-300 mb-6 z-10 en-text uppercase tracking-widest border-b border-purple-500 pb-2">Abide in Me</p>
                         
                         <div class="relative w-full h-64 z-10 flex flex-col items-center justify-center">
                            <!-- Growing Vine SVG -->
                            <svg class="w-full h-full" viewBox="0 0 100 100">
                                <!-- Main Vine -->
                                <path d="M50 100 Q50 50 50 10" stroke="#713f12" stroke-width="4" fill="none" class="vine-stem" />
                                
                                <!-- Branches -->
                                <path d="M50 70 Q80 60 90 40" stroke="#65a30d" stroke-width="2" fill="none" class="vine-stem" style="animation-delay: 1s;" />
                                <path d="M50 50 Q20 40 10 20" stroke="#65a30d" stroke-width="2" fill="none" class="vine-stem" style="animation-delay: 2s;" />
                                
                                <!-- Grapes -->
                                <circle cx="90" cy="40" r="3" fill="#7e22ce" class="grape" style="animation-delay: 1.5s;" />
                                <circle cx="85" cy="45" r="3" fill="#7e22ce" class="grape" style="animation-delay: 1.7s;" />
                                <circle cx="95" cy="45" r="3" fill="#7e22ce" class="grape" style="animation-delay: 1.9s;" />
                                
                                <circle cx="10" cy="20" r="3" fill="#7e22ce" class="grape" style="animation-delay: 2.5s;" />
                                <circle cx="15" cy="25" r="3" fill="#7e22ce" class="grape" style="animation-delay: 2.7s;" />
                            </svg>
                         </div>
                         <p class="text-xs text-center italic mt-2 text-purple-200 opacity-80">"我是葡萄树，你们是枝子"<br>"I am the vine, you are the branches"</p>
                    </div>
                </div>

                <!-- Chart Section: Two Destinies -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-purple-100">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-slate-700">
                            <i class="fas fa-code-branch text-green-600 mr-2"></i> 两种枝子的命运 
                            <span class="text-sm font-normal text-slate-400 ml-2 en-text">Destiny of Two Branches</span>
                        </h3>
                        <span class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded">John 15:2</span>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Fruitless Branch -->
                        <div class="p-4 bg-slate-50 rounded border border-slate-200 relative overflow-hidden group">
                            <div class="absolute -right-4 -top-4 text-8xl text-slate-200 -z-10"><i class="fas fa-trash-alt"></i></div>
                            <h4 class="font-bold text-slate-600 mb-2 border-b border-slate-300 pb-1">不结果子 (Fruitless)</h4>
                            <ul class="space-y-2 text-xs text-slate-600">
                                <li class="flex items-center"><i class="fas fa-ban w-5 text-red-400"></i> 状态：不结果子</li>
                                <li class="flex items-center"><i class="fas fa-cut w-5 text-red-400"></i> 动作：剪去 (Takes away)</li>
                                <li class="flex items-center"><i class="fas fa-fire w-5 text-red-400"></i> 结局：枯干、焚烧 (Fire)</li>
                            </ul>
                        </div>

                        <!-- Fruitful Branch -->
                        <div class="p-4 bg-green-50 rounded border border-green-200 relative overflow-hidden group">
                             <div class="absolute -right-4 -top-4 text-8xl text-green-100 -z-10"><i class="fas fa-leaf"></i></div>
                            <h4 class="font-bold text-green-800 mb-2 border-b border-green-200 pb-1">结果子 (Fruitful)</h4>
                            <ul class="space-y-2 text-xs text-green-800">
                                <li class="flex items-center"><i class="fas fa-check w-5 text-green-500"></i> 状态：结果子</li>
                                <li class="flex items-center"><i class="fas fa-tools w-5 text-green-500"></i> 动作：修剪 (Prunes/Cleans)</li>
                                <li class="flex items-center"><i class="fas fa-arrow-up w-5 text-green-500"></i> 结局：结果子更多 (More Fruit)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#fdf4ff]/95 backdrop-blur py-4 mb-6 border-b border-purple-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-purple-900 serif">逐节研读室 <span class="text-base font-normal text-slate-400 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-purple-100">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-purple-700 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">全部 All</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">学术 Academic</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-green-700 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">灵修 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-purple-600">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-sm text-purple-600 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            const academicTitle = verse.academic ? verse.academic.title : "Title Missing";
            const academicContentZh = verse.academic ? verse.academic.content_zh : "Content missing";
            const academicContentEn = verse.academic ? verse.academic.content_en : "Content missing";
            
            const devotionalTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devotionalContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devotionalContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-purple-50 to-white p-5 border-b border-purple-100">
                        <span class="inline-block px-2 py-0.5 bg-purple-100 text-purple-800 text-xs font-bold rounded mb-2 font-mono border border-purple-200">${verse.ref}</span>
                        <p class="text-slate-800 font-serif text-lg leading-relaxed group-hover:text-purple-900 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-slate-500 font-serif text-sm italic en-text border-l-2 border-purple-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-slate-100">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-500">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">权威解经 Exegesis</h4>
                            </div>
                            <h5 class="font-bold text-slate-700 mb-2">${academicTitle}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify mb-2">${academicContentZh}</p>
                            <p class="text-xs text-slate-400 font-serif italic en-text border-t border-slate-300 pt-2 mt-2">${academicContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-green-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-green-800 mb-2">${devotionalTitle}</h5>
                            <p class="text-sm text-green-900/80 leading-relaxed text-justify mb-2">${devotionalContentZh}</p>
                            <p class="text-xs text-green-700/70 font-serif italic en-text border-t border-green-200 pt-2 mt-2">${devotionalContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-slate-800">解经方法论总结</h2>
                        <p class="text-slate-500 en-text">Summary of Exegetical Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-slate-500 text-4xl mb-4"><i class="fas fa-book-reader"></i></div>
                            <h3 class="text-xl font-bold text-slate-700 mb-2">权威/学术性解经 (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">Metaphorical & Semantic</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-purple-700 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">探索旧约隐喻（以色列作为葡萄树）在新约中的转化。分析关键动词（Abide, Prune, Cleanse）的希腊文语意与修辞双关。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Exploring the transformation of OT metaphors (Israel as vine). Analyzing Greek semantics and rhetoric of key verbs (Abide, Prune, Cleanse).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-purple-700 mb-1"><i class="fas fa-check-circle mr-2"></i> 适用范围 Scope</div>
                                    <div class="mb-1">确立基督为生命唯一源头的教义，定义真正的门徒关系（从仆人到朋友），以及预备信徒面对世界的敌对。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Establishing Christ as the sole source of life, defining true discipleship (servant to friend), and preparing believers for worldly hostility.</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-green-500 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-green-500 text-4xl mb-4"><i class="fas fa-pray"></i></div>
                            <h3 class="text-xl font-bold text-green-800 mb-2">灵修/应用性解经 (Devotional)</h3>
                            <p class="text-xs text-green-600/70 mb-6 uppercase tracking-wider">Organic & Relational</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-green-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">将焦点从"努力做工"转移到"生命连结"。正确看待苦难（修剪）的积极意义。在与神的亲密关系中寻找身份认同（朋友）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Shifting focus from 'working hard' to 'vital connection'. Viewing suffering (pruning) positively. Finding identity in intimacy with God (Friend).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-green-100 pt-3">
                                    <div class="flex items-center font-bold text-green-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 适用范围 Scope</div>
                                    <div class="mb-1">个人灵命成长的瓶颈期（枯干），面对痛苦时的安慰，以及在被世界排斥时的坚定。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Spiritual plateaus (dryness), comfort in pain, and steadfastness when rejected by the world.</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>