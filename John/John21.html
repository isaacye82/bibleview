<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>John 21: Restoration & Call | 约翰福音21章：恢复与呼召</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Galilee Blue - The Sea/Peace */
            --theme-primary: #0284c7; 
            /* Ember Red - Charcoal Fire/Restoration */
            --theme-accent: #e11d48;
            /* Shepherd Green - Pasture/Feed */
            --theme-dark: #15803d;
            /* Background */
            --theme-bg: #f0f9ff;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #1e293b;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #bae6fd; /* Sky 200 */
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px -5px rgba(2, 132, 199, 0.15);
            border-left-color: var(--theme-primary);
        }

        .academic-box {
            background-color: #f8fafc; /* Slate 50 */
            border-left: 3px solid #475569; /* Slate 600 */
            color: #334155;
        }
        
        .devotional-box {
            background-color: #fff1f2; /* Rose 50 */
            border-left: 3px solid #e11d48; /* Rose 600 */
            color: #881337;
        }

        /* Fish Swimming Animation */
        .fish {
            position: absolute;
            opacity: 0.7;
            animation: swim 8s infinite linear;
        }
        @keyframes swim {
            0% { transform: translateX(-50px) rotate(0deg); }
            25% { transform: translateX(50px) translateY(20px) rotate(10deg); }
            50% { transform: translateX(150px) translateY(0px) rotate(0deg); }
            75% { transform: translateX(250px) translateY(-20px) rotate(-10deg); }
            100% { transform: translateX(350px) rotate(0deg); }
        }

        /* Fire Flicker */
        .ember {
            animation: glow 1.5s infinite alternate;
        }
        @keyframes glow {
            from { opacity: 0.6; text-shadow: 0 0 5px #f87171; }
            to { opacity: 1; text-shadow: 0 0 20px #e11d48; }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-sky-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-sky-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-anchor mr-2 text-sky-600"></i> 约翰福音 21章</span>
                        <span class="text-xs text-sky-700 en-text font-normal ml-9">The Gospel of John Chapter 21</span>
                    </span>
                </div>
                <div class="flex space-x-8 items-center">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center">
                        全景概览 <br><span class="text-[10px] uppercase opacity-70 en-text">Overview</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-sky-700 text-center">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-sky-700 text-center">
                        方法论 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-sky-200 mb-1">"你跟从我吧！"</p>
            <p class="text-sm italic text-slate-500 mb-2 en-text">"You follow me!"</p>
            <p class="text-xs opacity-70">约翰福音第21章中英对照研经报告 | Restoration and Call</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "提比利亚海边的早餐：爱与恢复",
                title_en: "Breakfast by the Sea: Love & Restoration",
                summary_zh: "约翰福音第21章是整卷书深情的尾声。在复活之后，门徒回到加利利重操旧业，却整夜劳力一无所获。耶稣在清晨显现，再次行了神迹（153条鱼），并在岸边为他们预备了早餐。本章的核心在于耶稣与彼得在炭火旁的对话，通过三次'你爱我吗'的问询，彻底医治了彼得三次不认主的创伤，并重新赋予他牧养的使命。",
                summary_en: "John 21 serves as the poignant epilogue. Post-resurrection, disciples return to fishing in Galilee but catch nothing. Jesus appears at dawn, performs a miracle (153 fish), and prepares breakfast. The core is the charcoal-fire dialogue where Jesus heals Peter's three denials with three questions of 'Do you love me?', recommissioning him to shepherd the flock.",
                concepts: [
                    { title: "炭火", title_en: "Charcoal Fire", greek: "Anthrakia", color: "text-rose-600", desc_zh: "新约仅出现两次：彼得否认主时（18:18）和彼得被恢复时（21:9）。象征记忆的重塑。", desc_en: "Appears only twice: Peter's denial (18:18) and here. Symbolizes the healing of memory." },
                    { title: "爱", title_en: "Love", greek: "Agapaō / Phileō", color: "text-purple-600", desc_zh: "本章使用了两个不同的'爱'字。关于它们是同义互换还是意指不同层次的爱，一直是解经焦点。", desc_en: "Two Greek words for love are used. Whether they are stylistic synonyms or indicate different depths is a key exegetical debate." },
                    { title: "牧养", title_en: "Shepherd", greek: "Poimainō", color: "text-green-600", desc_zh: "不仅是喂养（Boskō），更包含引导、保护和治理的全方位关怀。", desc_en: "More than just feeding (Boskō); involves guiding, protecting, and ruling the flock." }
                ]
            },
            sections: [
                {
                    id: "fishing-miracle",
                    title: "壹 · 撒网与顺服：人的尽头 (21:1-8)",
                    title_en: "Casting the Net: Man's End",
                    desc: "整夜劳力 vs 主的一句话 | Toiled All Night vs. One Word",
                    verses: [
                        {
                            ref: "21:3-6",
                            text_zh: "西门彼得对他们说：'我打鱼去。'...那一夜并没有打着什么。天将亮的时候，耶稣站在岸上...说：'你们把网撒在船的右边，就必得着。'",
                            text_en: "Simon Peter said to them, 'I am going fishing.'... that night they caught nothing. Just as day was breaking, Jesus stood on the shore... and said to them, 'Cast the net on the right side of the boat, and you will find some.'",
                            academic: {
                                title: "153条鱼的象征意义 (Symbolism of 153)",
                                content_zh: "教父对此有多种寓意解经（如耶柔米认为当时已知鱼类共153种，象征万民）。但现代学者更倾向于认为这是一个目击证人（渔夫约翰）对丰收细节的真实记忆。'并没有打着什么'强调了离了主不仅在属灵上，在生活上也常徒劳无功。神迹的发生不在于新技巧，而在于对主话语的顺服。",
                                content_en: "Church Fathers allegorized '153' (Jerome: 153 known fish species = all nations). Modern scholars see it as a vivid eyewitness detail. 'Caught nothing' emphasizes futility apart from Christ. The miracle wasn't a new technique, but simple obedience to His Word."
                            },
                            devotional: {
                                title: "当你空手而归时",
                                content_zh: "你是否正在经历'整夜劳力，一无所获'的挫败？也许是在事业、服事或关系上。彼得是专业渔夫，却失败了。这提醒我们：经验和努力不能保证祝福。耶稣的介入往往在我们能力的尽头。当祂说'撒在右边'时，那是对理性的挑战。试着在绝望中听祂微小的指引，结果将超乎想象。",
                                content_en: "Are you facing the frustration of 'toiling all night with nothing'? Peter, the pro, failed. Experience and effort don't guarantee blessing. Jesus often intervenes at the end of our rope. His command 'cast on the right' challenged logic. Try listening for His whisper in your despair; the result will astonish you."
                            }
                        }
                    ]
                },
                {
                    id: "breakfast",
                    title: "贰 · 岸边的早餐：主的供应 (21:9-14)",
                    title_en: "Breakfast on the Shore: The Lord's Provision",
                    desc: "炭火与饼鱼 | Charcoal & Bread",
                    verses: [
                        {
                            ref: "21:9, 12",
                            text_zh: "他们上了岸，就看见那里有炭火，上面有鱼，又有饼。...耶稣说：'你们来吃早饭。'",
                            text_en: "When they got out on land, they saw a charcoal fire in place, with fish laid on it, and bread... Jesus said to them, 'Come and have breakfast.'",
                            academic: {
                                title: "炭火 (Anthrakia) 的文学呼应",
                                content_zh: "这是新约中第二次出现'炭火'（Anthrakia），第一次是在大祭司的院子里彼得否认主时（18:18）。这是一种'场景重现'（Déjà vu）。耶稣刻意布置了这个场景，不是为了羞辱彼得，而是为了带他回到跌倒的原点进行医治。此外，耶稣像在五饼二鱼神迹中一样'拿饼和鱼'给他们，带有圣餐的暗示，表明复活的主仍是那位服事人的仆人。",
                                content_en: "Second NT use of 'Anthrakia'; the first was Peter's denial (18:18). A deliberate literary flashback. Jesus sets the stage not to shame, but to heal Peter at the scene of the crime. Also, Jesus 'taking bread and fish' echoes the Feeding of the 5000, suggesting a Eucharistic undertone. The Risen Lord remains the Servant."
                            },
                            devotional: {
                                title: "主为你做早餐",
                                content_zh: "这是福音书中最温馨的画面之一。复活荣耀的君王，竟然在海边为一群又饿又湿的失败者烤鱼。祂关心大事（救赎），也关心小事（你的肚子）。你累了吗？你觉得为了生计奔波很辛苦吗？主知道。祂在岸边等你，不仅要给你使命，先要给你温暖和饱足。先吃早餐，再谈工作。",
                                content_en: "One of the tenderest scenes. The Risen King cooks for hungry, wet failures. He cares for the Cosmos AND your stomach. Are you tired? Stressed about livelihood? He knows. He waits on the shore, offering warmth and food before mission. Eat breakfast first, work later."
                            }
                        }
                    ]
                },
                {
                    id: "peter-restoration",
                    title: "叁 · 彼得的恢复：爱与牧养 (21:15-19)",
                    title_en: "Peter's Restoration: Love & Shepherding",
                    desc: "你爱我比这些更深吗？ | Do You Love Me More Than These?",
                    verses: [
                        {
                            ref: "21:15-17",
                            text_zh: "耶稣对西门彼得说：'约翰的儿子西门，你爱（Agapas）我比这些更深吗？' 彼得说：'主啊，是的，你知道我爱（Philō）你。' ...耶稣说：'你喂养我的羊。'",
                            text_en: "Jesus said to Simon Peter, 'Simon, son of John, do you love me more than these?' He said to him, 'Yes, Lord; you know that I love you.' ...Jesus said to him, 'Feed my lambs.'",
                            academic: {
                                title: "Agapaō vs Phileō 的语言游戏",
                                content_zh: "前两次耶稣问'你爱（Agapas，神圣/意志之爱）我吗？'，彼得不敢用这个高尚的词，只回答'我爱（Philo，朋友/情感之爱）你'。第三次耶稣降格用了彼得的词：'你爱（Phileis）我吗？' 这让彼得忧愁。虽然有些学者认为约翰常互换使用这两个词，但语境表明这是一种'降卑的接纳'——既然你现在给不了舍己的爱（Agapē），我就接受你现有的友爱（Philia）。'喂养我的羊'表明，爱主是事奉的唯一资格。",
                                content_en: "Jesus asks twice using *Agapas* (divine/volitional love); Peter, humbled, replies only *Philo* (affection/friendship). The third time, Jesus condescends to Peter's level: 'Do you *Phileis* me?' This grieved Peter. While John often treats them as synonyms, the context suggests gracious accommodation: 'If you can't give Agapē yet, I accept your Philia.' Loving Jesus is the sole qualification for ministry."
                            },
                            devotional: {
                                title: "失败不是终点",
                                content_zh: "彼得三次不认主，耶稣就给他三次机会说'我爱你'。这不仅是饶恕，更是恢复身份。注意，耶稣没有问：'你悔改了吗？'或'你保证以后不跑了吗？'祂只问：'你爱我吗？'因为爱是一切动力的源泉。如果你曾经跌倒、失败、觉得不配事奉，请听主的呼唤。祂不要你的完美履历，祂只要你一颗爱祂的心。",
                                content_en: "Three denials met with three affirmations of love. Not just forgiveness, but restoration. Jesus didn't ask, 'Have you repented?' or 'Will you promise to stay?' He asked, 'Do you love Me?' Love is the source. If you've failed or feel unworthy, listen. He doesn't want a perfect resume; He wants your heart."
                            }
                        }
                    ]
                },
                {
                    id: "destiny",
                    title: "肆 · 不同的道路：跟从主 (21:20-25)",
                    title_en: "Different Paths: Following Him",
                    desc: "与你何干？ | What is That to You?",
                    verses: [
                        {
                            ref: "21:21-22",
                            text_zh: "彼得...问耶稣说：'主啊，这人（约翰）将来如何？' 耶稣对他说：'我若要他等到我来的时候，与你何干？你跟从我吧！'",
                            text_en: "Peter... said to Jesus, 'Lord, what about this man?' Jesus said to him, 'If it is my will that he remain until I come, what is that to you? You follow me!'",
                            academic: {
                                title: "殉道与见证的双重呼召",
                                content_zh: "彼得被预言将要殉道（'伸出手来'指钉十字架），而约翰似乎被暗示将长寿见证（'等到我来'，虽被误解为不死）。这代表了教会的两种见证形式：一种是‘血的见证’（Martyrdom），一种是‘生命的见证’（Living Witness）。耶稣的回答'与你何干'切断了无谓的比较。每个门徒都有独特的呼召和剧本。",
                                content_en: "Peter is prophesied to be martyred ('stretch out hands'), while John might remain (long life witness). These represent two forms of witness: Martyrdom and Living Witness. Jesus' retort 'What is that to you?' cuts off comparison. Every disciple has a unique calling and script. Sovereignty dictates individual paths."
                            },
                            devotional: {
                                title: "不要看别人，只管跟从",
                                content_zh: "比较是灵命成长的毒药。看到别人蒙福、长寿或事工顺利，我们常问：'主啊，那我呢？'或者'凭什么他...？'耶稣的回答干脆利落：'与你何干？'神的安排是主权性的。不要羡慕别人的剧本，也不要轻看自己的十字架。你的眼目要单单注视耶稣。专心走你的路，让神去管别人的事。",
                                content_en: "Comparison kills spiritual growth. Seeing others blessed, we ask, 'Lord, what about me?' Jesus says bluntly: 'What is that to you?' God's plan is sovereign. Don't envy another's script or despise your cross. Keep your eyes on Jesus alone. Walk your path; let God handle the others."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all'
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-slate-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-slate-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-sky-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-sky-100 text-sky-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Focus</span>
                            <h2 class="text-3xl font-bold serif text-sky-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-slate-400 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-slate-600 leading-relaxed mb-4 text-lg border-l-4 border-sky-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-slate-500 leading-relaxed text-sm italic en-text border-l-4 border-slate-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col items-center text-center transition hover:bg-sky-50 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-slate-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-slate-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-slate-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-slate-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: The Catch -->
                    <div class="lg:col-span-4 bg-gradient-to-br from-sky-900 to-slate-900 text-white p-8 rounded-xl shadow-lg flex flex-col justify-center items-center relative overflow-hidden">
                         <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/fish-net.png')]"></div>
                         
                         <h3 class="text-xl font-bold mb-1 z-10 text-center text-sky-200">满网的鱼</h3>
                         <p class="text-xs text-slate-300 mb-6 z-10 en-text uppercase tracking-widest border-b border-sky-500 pb-2">The Full Net (153)</p>
                         
                         <div class="relative w-full h-48 z-10 flex flex-col items-center justify-center overflow-hidden">
                            <!-- Fish Animation -->
                            <div class="absolute inset-0 flex items-center">
                                <i class="fas fa-fish text-sky-300 text-2xl fish" style="animation-delay: 0s; top: 20%;"></i>
                                <i class="fas fa-fish text-sky-400 text-xl fish" style="animation-delay: 1.5s; top: 50%;"></i>
                                <i class="fas fa-fish text-sky-200 text-3xl fish" style="animation-delay: 3s; top: 70%;"></i>
                                <i class="fas fa-fish text-sky-500 text-lg fish" style="animation-delay: 5s; top: 30%;"></i>
                            </div>
                            
                            <i class="fas fa-network-wired text-5xl text-white/50 mb-2 z-20"></i> <!-- Net Symbol -->

                            <div class="absolute bottom-0 w-full text-center z-20">
                                <span class="text-sky-100 font-serif text-sm bg-sky-900/50 px-2 rounded">It is the Lord!</span>
                            </div>
                         </div>
                         <p class="text-xs text-center italic mt-4 text-sky-200 opacity-80">"网既不破"<br>"The net was not torn"</p>
                    </div>
                </div>

                <!-- Chart Section: Peter's Restoration Timeline -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-sky-100">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-slate-700">
                            <i class="fas fa-fire text-rose-500 mr-2"></i> 从炭火到炭火：彼得的旅程 
                            <span class="text-sm font-normal text-slate-400 ml-2 en-text">Peter's Journey: Fire to Fire</span>
                        </h3>
                        <span class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded">Restoration Process</span>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 relative">
                        <!-- Fire 1: Denial -->
                        <div class="p-6 bg-slate-100 rounded border border-slate-300 text-center relative overflow-hidden group hover:shadow-md transition">
                            <div class="absolute top-2 right-2 text-3xl text-slate-300 group-hover:text-slate-400"><i class="fas fa-times-circle"></i></div>
                            <h4 class="font-bold text-slate-700 mb-2">炭火堆 1 (Fire of Denial)</h4>
                            <p class="text-xs text-slate-500 mb-2 italic">John 18:18 (Courtyard)</p>
                            <div class="flex justify-center space-x-2 mb-4">
                                <span class="w-2 h-2 bg-slate-400 rounded-full"></span>
                                <span class="w-2 h-2 bg-slate-400 rounded-full"></span>
                                <span class="w-2 h-2 bg-slate-400 rounded-full"></span>
                            </div>
                            <p class="text-sm font-bold text-rose-800">"我不认得他"</p>
                            <p class="text-xs text-rose-600 mt-1">Fear & Failure</p>
                        </div>

                        <!-- Arrow -->
                        <div class="hidden md:flex absolute inset-0 justify-center items-center pointer-events-none">
                            <i class="fas fa-arrow-right text-sky-300 text-2xl"></i>
                        </div>

                        <!-- Fire 2: Restoration -->
                        <div class="p-6 bg-rose-50 rounded border border-rose-200 text-center relative overflow-hidden group hover:shadow-md transition">
                            <div class="absolute top-2 right-2 text-3xl text-rose-200 ember group-hover:text-rose-300"><i class="fas fa-fire"></i></div>
                            <h4 class="font-bold text-rose-800 mb-2">炭火堆 2 (Fire of Love)</h4>
                            <p class="text-xs text-rose-400 mb-2 italic">John 21:9 (Galilee)</p>
                            <div class="flex justify-center space-x-2 mb-4">
                                <span class="w-2 h-2 bg-rose-500 rounded-full"></span>
                                <span class="w-2 h-2 bg-rose-500 rounded-full"></span>
                                <span class="w-2 h-2 bg-rose-500 rounded-full"></span>
                            </div>
                            <p class="text-sm font-bold text-sky-800">"你知道我爱你"</p>
                            <p class="text-xs text-sky-600 mt-1">Grace & Commission</p>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-3 bg-sky-50 rounded text-center text-xs text-sky-700 italic border border-sky-100">
                        "你喂养我的羊。" —— 爱的证明不是言语，而是牧养。
                        <br><span class="en-text">"Feed my sheep." — The proof of love is not words, but shepherding.</span>
                    </div>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#f0f9ff]/95 backdrop-blur py-4 mb-6 border-b border-sky-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-sky-900 serif">逐节研读室 <span class="text-base font-normal text-slate-400 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-sky-100">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-sky-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">全部 All</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">学术 Academic</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-rose-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">灵修 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-sky-600">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-sm text-sky-600 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            const academicTitle = verse.academic ? verse.academic.title : "Title Missing";
            const academicContentZh = verse.academic ? verse.academic.content_zh : "Content missing";
            const academicContentEn = verse.academic ? verse.academic.content_en : "Content missing";
            
            const devotionalTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devotionalContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devotionalContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-sky-50 to-white p-5 border-b border-sky-100">
                        <span class="inline-block px-2 py-0.5 bg-sky-100 text-sky-800 text-xs font-bold rounded mb-2 font-mono border border-sky-200">${verse.ref}</span>
                        <p class="text-slate-800 font-serif text-lg leading-relaxed group-hover:text-sky-900 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-slate-500 font-serif text-sm italic en-text border-l-2 border-sky-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-slate-100">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-500">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">权威解经 Exegesis</h4>
                            </div>
                            <h5 class="font-bold text-slate-700 mb-2">${academicTitle}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify mb-2">${academicContentZh}</p>
                            <p class="text-xs text-slate-400 font-serif italic en-text border-t border-slate-300 pt-2 mt-2">${academicContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-rose-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-rose-800 mb-2">${devotionalTitle}</h5>
                            <p class="text-sm text-rose-900/80 leading-relaxed text-justify mb-2">${devotionalContentZh}</p>
                            <p class="text-xs text-rose-700/70 font-serif italic en-text border-t border-rose-200 pt-2 mt-2">${devotionalContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-slate-800">解经方法论总结</h2>
                        <p class="text-slate-500 en-text">Summary of Exegetical Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-slate-500 text-4xl mb-4"><i class="fas fa-book-reader"></i></div>
                            <h3 class="text-xl font-bold text-slate-700 mb-2">权威/学术性解经 (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">Linguistic & Literary</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-sky-700 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">分析"Agapaō"与"Phileō"的语义辩论及语境互动。研究"炭火"作为文学伏笔（Literary Inclusio）的结构功能。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Analyzing the semantic debate and contextual interplay of 'Agapaō' vs 'Phileō'. Studying 'Charcoal Fire' as a literary inclusio.</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-sky-700 mb-1"><i class="fas fa-check-circle mr-2"></i> 适用范围 Scope</div>
                                    <div class="mb-1">确立恢复（Restoration）与呼召（Commissioning）的神学联系，理解彼得与约翰在教会历史中不同的代表性角色。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Establishing the theological link between Restoration and Commissioning; understanding the representative roles of Peter and John.</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-rose-500 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-rose-500 text-4xl mb-4"><i class="fas fa-pray"></i></div>
                            <h3 class="text-xl font-bold text-rose-800 mb-2">灵修/应用性解经 (Devotional)</h3>
                            <p class="text-xs text-rose-600/70 mb-6 uppercase tracking-wider">Restorative & Personal</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-rose-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">应用神迹于个人生活的困境（一无所获时）。在失败中经历主的恩典（早餐与问话）。专注于个人的跟随而非比较。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Applying miracles to personal futility. Experiencing grace in failure (breakfast & questions). Focusing on personal following, not comparison.</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-rose-100 pt-3">
                                    <div class="flex items-center font-bold text-rose-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 适用范围 Scope</div>
                                    <div class="mb-1">处理职业倦怠、属灵失败后的羞耻感，以及教会服事中的攀比心态。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Dealing with vocational burnout, shame after spiritual failure, and the trap of comparison in church ministry.</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>