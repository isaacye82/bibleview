<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luke 10: Mission, Mercy & The One Thing | 路加福音第十章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Samaritan Earth - Compassion, Road, Humanity */
            --theme-primary: #b45309; 
            /* Harvest Green - Mission, Growth, Life */
            --theme-accent: #15803d;
            /* Lightning Purple - Spiritual Warfare, Authority */
            --theme-dark: #6b21a8;
            /* Background */
            --theme-bg: #fffbeb;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #451a03;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #fcd34d; /* Amber 300 */
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px rgba(180, 83, 9, 0.15);
            border-left-color: var(--theme-primary);
        }

        .academic-box {
            background-color: #f8fafc; /* Slate 50 */
            border-left: 3px solid #64748b; /* Slate 500 */
            color: #334155;
        }
        
        .devotional-box {
            background-color: #fdf2f8; /* Pink/Rose 50 for mercy/heart */
            border-left: 3px solid #be123c; /* Rose 700 */
            color: #881337;
        }

        /* Jericho Road Animation */
        .road-scene {
            position: relative;
            height: 200px;
            background: linear-gradient(to bottom, #fde68a 0%, #fcd34d 100%);
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            border: 2px solid #b45309;
        }

        .road {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 60px;
            background-color: #d97706;
            clip-path: polygon(0 100%, 20% 0, 80% 0, 100% 100%);
        }

        .victim {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2rem;
            color: #991b1b; /* Injured red */
            z-index: 10;
        }

        .passerby {
            position: absolute;
            bottom: 30px;
            font-size: 2.5rem;
            transition: all 2s linear;
            z-index: 20;
            opacity: 0;
        }
        
        .priest { color: #1e3a8a; } /* Blue/Religious */
        .levite { color: #475569; } /* Grey/Legal */
        .samaritan { color: #15803d; } /* Green/Compassion */

        /* Animation States */
        .walk-pass {
            animation: walk-across 3s forwards;
        }
        
        .walk-stop {
            animation: walk-to-center 2s forwards;
        }

        @keyframes walk-across {
            0% { left: -10%; opacity: 1; transform: scale(0.5); }
            50% { left: 50%; transform: scale(1) translateY(-20px); } /* Avoid victim */
            100% { left: 110%; opacity: 1; transform: scale(0.5); }
        }

        @keyframes walk-to-center {
            0% { left: -10%; opacity: 1; transform: scale(0.5); }
            100% { left: 45%; opacity: 1; transform: scale(1); }
        }

        /* Lightning Animation */
        .sky-container {
            position: relative;
            height: 150px;
            background-color: #1e1b4b;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        .lightning-bolt {
            position: absolute;
            top: -20px;
            left: 50%;
            height: 0;
            width: 10px;
            background-color: #fef08a;
            box-shadow: 0 0 20px #fef08a;
            transform: translateX(-50%) rotate(15deg);
            opacity: 0;
            z-index: 20;
        }

        .flash-active .lightning-bolt {
            animation: strike 0.3s forwards;
        }

        .flash-active {
            animation: bg-flash 0.3s;
        }

        @keyframes strike {
            0% { height: 0; top: -50px; opacity: 1; }
            50% { height: 180px; top: 0; opacity: 1; }
            100% { height: 180px; top: 0; opacity: 0; }
        }

        @keyframes bg-flash {
            0% { background-color: #1e1b4b; }
            10% { background-color: #6b21a8; }
            20% { background-color: #ffffff; }
            30% { background-color: #6b21a8; }
            100% { background-color: #1e1b4b; }
        }

        /* Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-amber-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-24 sm:h-20 items-center">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-amber-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-hand-holding-heart mr-2 text-amber-600"></i> 路加福音 10章</span>
                        <span class="text-xs text-amber-700 en-text font-normal ml-8">Luke Chapter 10</span>
                    </span>
                </div>
                <div class="flex space-x-4 sm:space-x-8 items-center overflow-x-auto no-scrollbar">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center shrink-0">
                        邻舍与使命 <br><span class="text-[10px] uppercase opacity-70 en-text">Neighbor & Mission</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-amber-700 text-center shrink-0">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-amber-700 text-center shrink-0">
                        方法论总结 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-amber-200 mb-1">"你去照样行吧。"</p>
            <p class="text-sm italic text-slate-500 mb-2 en-text">"Go, and do likewise."</p>
            <p class="text-xs opacity-70">路加福音第十章中英对照研经报告 | Mission & Mercy</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "扩展的使命与爱的真谛",
                title_en: "Expanded Mission & The Essence of Love",
                summary_zh: "路加福音第10章继续深化'门徒之道'。继12使徒之后，耶稣差遣70人出去，象征福音不仅给以色列，也给万国（创世记10章列国表为70）。这一章包含了最著名的比喻'好撒玛利亚人'，重新定义了'谁是邻舍'。同时，通过马大和马利亚的故事，耶稣教导了在忙碌服事中保持聆听的重要性。全章贯穿着'去'（Go）与'听'（Listen）的平衡。",
                summary_en: "Luke 10 deepens the theme of discipleship. Following the Twelve, Jesus sends out the Seventy(-two), symbolizing the Gospel for all nations (Gen 10 table of nations). The chapter features the famous 'Good Samaritan' parable, redefining 'neighbor'. Through Mary and Martha, Jesus teaches the priority of listening amidst serving. The chapter balances 'Going' (Mission) with 'Listening' (Devotion).",
                concepts: [
                    { title: "七十人", title_en: "The Seventy", greek: "Hebdomēkonta", color: "text-green-700", desc_zh: "有些古卷作72人。象征向普世万国的宣教（对应创世记10章的70个国家）。", desc_en: "Some MSS say 72. Symbolizes mission to all nations (Gen 10's 70 nations)." },
                    { title: "邻舍", title_en: "Neighbor", greek: "Plēsion", color: "text-amber-700", desc_zh: "不是一个地理概念，而是一个关系性的行动：谁对那个有需要的人以此为邻？", desc_en: "Not a geographic term, but relational action: who acted as neighbor to the needy?" },
                    { title: "上好的福分", title_en: "Good Portion", greek: "Agathē Meris", color: "text-purple-700", desc_zh: "指不仅是好的，而且是不可夺去的、永恒的一份（指听道）。", desc_en: "Not just good, but the essential, eternal portion that cannot be taken away." }
                ]
            },
            sections: [
                {
                    id: "mission",
                    title: "壹 · 差遣七十人：庄稼与工人 (10:1-12)",
                    title_en: "Sending the Seventy: Harvest & Laborers",
                    desc: "羊入狼群的平安 | Peace of Lambs Among Wolves",
                    verses: [
                        {
                            ref: "10:2-3",
                            text_zh: "...要收的庄稼多，做工的人少...你们去吧！我差你们出去，如同羊进入狼群。",
                            text_en: "...The harvest is plentiful, but the laborers are few... Go your way; behold, I am sending you out as lambs in the midst of wolves.",
                            academic: {
                                title: "紧迫感与脆弱性 (Urgency & Vulnerability)",
                                content_zh: "耶稣将世界描绘为成熟的'庄稼'，充满了紧迫感（需要收割，否则腐烂）。解决之道不是更多的策略，而是更多的'求'（Prayer）和'去'（Going）。'羊入狼群'强调了宣教的脆弱性：不靠武力、不带钱囊、不问安（不分心），单单依靠'平安'（Shalom）的力量。接受平安的就是'平安之子'。",
                                content_en: "Jesus depicts the world as a ripe 'harvest', implying urgency. The solution isn't strategy, but 'praying' and 'going'. 'Lambs among wolves' emphasizes vulnerability: no force, no purse, no distractions. They rely solely on the power of 'Peace' (Shalom). The receptive one is a 'Son of Peace'."
                            },
                            devotional: {
                                title: "带着平安去 (Go with Peace)",
                                content_zh: "我们常以为宣教需要强大的资源和武装，但耶稣说我们是'羊'。我们的武器不是辩论或强势，而是'平安'。当你走进办公室、家庭或社区时，你是否意识到自己是一个'平安的传递者'？如果对方拒绝，平安会归于你；如果对方接受，神国就临到了。不要怕狼，因为是好牧人差你去的。",
                                content_en: "We think mission needs resources and armor, but Jesus calls us 'lambs'. Our weapon is 'Peace', not force. Do you see yourself as a carrier of peace in your office or home? If rejected, peace returns to you; if accepted, the Kingdom lands. Don't fear wolves; the Shepherd sent you."
                            }
                        }
                    ]
                },
                {
                    id: "return",
                    title: "贰 · 七十人归来：撒但坠落 (10:17-20)",
                    title_en: "Return of the Seventy: Fall of Satan",
                    desc: "真正的喜乐 | True Joy",
                    verses: [
                        {
                            ref: "10:18, 20",
                            text_zh: "耶稣对他们说：'我曾看见撒但从天上坠落，像闪电一样。'...然而，不要因鬼服了你们就欢喜，要因你们的名记录在天上欢喜。",
                            text_en: "And he said to them, 'I saw Satan fall like lightning from heaven.'... Nevertheless, do not rejoice in this, that the spirits are subject to you, but rejoice that your names are written in heaven.",
                            academic: {
                                title: "属灵战争的胜利 (Victory in Spiritual Warfare)",
                                content_zh: "当门徒在地上宣扬平安时，耶稣在灵界看见了撒但的溃败。这是福音传播的宇宙性后果。'闪电'形容其坠落的迅速和显著。然而，耶稣纠正了门徒的焦点：不要沉迷于'权柄'（Power over demons），而要聚焦于'恩典'（Citizenship in Heaven）。权柄可能导致骄傲，唯有恩典带来稳固的喜乐。",
                                content_en: "While disciples preached peace, Jesus saw Satan's defeat in the spiritual realm. Gospel proclamation has cosmic consequences. 'Lightning' implies sudden, visible fall. Yet, Jesus corrects their focus: don't rejoice in 'Power' (authority), but in 'Grace' (citizenship). Power can puff up; only Grace brings lasting joy."
                            },
                            devotional: {
                                title: "名字在天上的喜乐 (Joy of Names in Heaven)",
                                content_zh: "我们在事奉中很容易因'果效'（赶鬼、人数增长、事工成功）而兴奋。但如果鬼不服、事工不顺呢？我们的喜乐就会崩塌。耶稣教导我们将喜乐的锚抛在'天上'——你的名字被记录了，这是永恒不变的事实。无论事工成败，你作为神儿女的身份永远稳固。",
                                content_en: "We get excited by 'results' (demons fleeing, success). But what if they don't? Joy collapses. Jesus anchors joy in 'Heaven'—your name is written. That is unchangeable facts. Whether ministry succeeds or fails, your identity as God's child remains secure."
                            }
                        }
                    ]
                },
                {
                    id: "samaritan",
                    title: "叁 · 好撒玛利亚人：谁是邻舍 (10:25-37)",
                    title_en: "The Good Samaritan: Who is My Neighbor?",
                    desc: "爱心的实践与界限的打破 | Practice of Love & Breaking Boundaries",
                    verses: [
                        {
                            ref: "10:29, 36-37",
                            text_zh: "那人要显明自己有理，就对耶稣说：'谁是我的邻舍呢？'...耶稣说：'你去照样行吧。'",
                            text_en: "But he, desiring to justify himself, said to Jesus, 'And who is my neighbor?'... Jesus said to him, 'You go, and do likewise.'",
                            academic: {
                                title: "重新定义邻舍 (Redefining Neighbor)",
                                content_zh: "律法师的问题试图'限制'爱的范围（谁是我必须爱的，谁是我可以不爱的）。耶稣通过比喻彻底反转了这个问题：祭司和利未人（代表宗教特权）因为怕沾染死人不洁而绕道；撒玛利亚人（被视为异端、混血）却动了慈心（Splanchnizomai）。耶稣最后问：'谁是那个受伤者的邻舍？' 定义邻舍不再是看'对象'（谁配得），而是看'主体'（我是否成为了邻舍）。",
                                content_en: "The lawyer tried to 'limit' love's scope. Jesus inverted the question. Priest/Levite avoided ritual impurity; the Samaritan (despised outcast) had compassion. Jesus asks: 'Who BECAME a neighbor?' Neighbor is not defined by the 'object' (who is worthy) but by the 'subject' (am I acting as a neighbor?)."
                            },
                            devotional: {
                                title: "你去照样行 (Go and Do Likewise)",
                                content_zh: "我们常像律法师一样讨论神学定义：'什么是爱？谁值得帮？' 但耶稣说：'去行！' 爱不是名词，是动词。在这个比喻中，爱意味着跨越种族、宗教的界限，付出时间、金钱和风险（包扎、送店、给钱）。哪怕对方是你的'敌人'（犹如犹太人看撒玛利亚人），在需要面前，他就是你的邻舍。",
                                content_en: "We love theological debates: 'What is love? Who deserves help?' Jesus says: 'Go Do!' Love is a verb. It crosses racial/religious lines, costing time, money, and risk. Even if they are your 'enemy', in their need, they are your neighbor."
                            }
                        }
                    ]
                },
                {
                    id: "mary-martha",
                    title: "肆 · 马大与马利亚：上好的福分 (10:38-42)",
                    title_en: "Mary & Martha: The Good Portion",
                    desc: "忙乱中的选择 | Choice in Busyness",
                    verses: [
                        {
                            ref: "10:41-42",
                            text_zh: "耶稣回答说：'马大！马大！你为许多的事思虑烦扰，但是不可少的只有一件；马利亚已经选择那上好的福分，是不能夺去的。'",
                            text_en: "But the Lord answered her, 'Martha, Martha, you are anxious and troubled about many things, but one thing is necessary. Mary has chosen the good portion, which will not be taken away from her.'",
                            academic: {
                                title: "只有一件不可少 (One Thing Necessary)",
                                content_zh: "路加紧接在'去行'（好撒玛利亚人）之后放置了这个'去听'的故事，这是完美的平衡。马大的问题不在于'服事'（Diakonia），而在于'思虑烦扰'（Perispao，被这种事分心、拉扯）。她因为忙碌而失去了焦点，甚至责怪主。马利亚选择了'坐在脚前'（门徒受教的姿势）。耶稣指出，与其做很多事却心烦意乱，不如专注于那'不可少的一件'——就是与主的关系。",
                                content_en: "Luke balances 'Do' (Samaritan) with 'Listen' (Mary). Martha's sin wasn't 'serving', but being 'distracted/pulled apart' (Perispao) by it. She lost focus and blamed Jesus. Mary chose the disciple's posture. Jesus teaches: Better one thing (relationship/word) with peace, than many things with anxiety."
                            },
                            devotional: {
                                title: "克服事奉的焦虑 (Overcoming Ministry Anxiety)",
                                content_zh: "你是否在教会或家庭的服事中感到'思虑烦扰'，甚至开始埋怨别人不帮忙？那是马大症候群。主并没有叫你不工作，他是叫你不要让工作夺走了你的心。'上好的福分'就是把听主的话放在首位。工作可以被夺去（你会老、会生病），但你在主脚前领受的道，是永远不能被夺去的。",
                                content_en: "Do you feel 'anxious and troubled' in service, resenting others? That's Martha syndrome. The Lord isn't stopping your work, but stopping work from stealing your heart. The 'Good Portion' is prioritizing His Word. Work can be taken away (age, illness), but what you receive at His feet is eternal."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all',
            sceneStage: 'start' // start, priest, levite, samaritan
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-slate-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-slate-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Interactive Functions ---
        function playScene(character) {
            const container = document.getElementById('road-vis');
            const passerby = document.getElementById('passerby-icon');
            const msg = document.getElementById('scene-msg');
            
            // Reset animation
            passerby.classList.remove('walk-pass', 'walk-stop');
            void passerby.offsetWidth; // trigger reflow
            
            // Set character icon and color
            if (character === 'priest') {
                passerby.innerHTML = '<i class="fas fa-user-tie"></i>'; // Priest
                passerby.className = "passerby priest";
                passerby.classList.add('walk-pass');
                msg.innerText = "祭司：看见就绕过去了... (Priest: Passed by...)";
            } else if (character === 'levite') {
                passerby.innerHTML = '<i class="fas fa-book"></i>'; // Levite
                passerby.className = "passerby levite";
                passerby.classList.add('walk-pass');
                msg.innerText = "利未人：照样绕过去了... (Levite: Passed by...)";
            } else if (character === 'samaritan') {
                passerby.innerHTML = '<i class="fas fa-hand-holding-heart"></i>'; // Samaritan
                passerby.className = "passerby samaritan";
                passerby.classList.add('walk-stop');
                msg.innerText = "撒玛利亚人：动了慈心，上前... (Samaritan: Had compassion...)";
            }
        }

        function triggerLightning() {
            const sky = document.getElementById('sky-box');
            sky.classList.add('flash-active');
            
            document.getElementById('satan-msg').style.opacity = 1;
            
            setTimeout(() => {
                sky.classList.remove('flash-active');
            }, 300);
            
            setTimeout(() => {
                document.getElementById('satan-msg').style.opacity = 0;
            }, 2000);
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-amber-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-amber-100 text-amber-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Mission & Mercy</span>
                            <h2 class="text-3xl font-bold serif text-amber-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-slate-400 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-slate-600 leading-relaxed mb-4 text-lg border-l-4 border-amber-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-slate-500 leading-relaxed text-sm italic en-text border-l-4 border-slate-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col items-center text-center transition hover:bg-amber-50 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-slate-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-slate-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-slate-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-slate-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: Jericho Road Simulator -->
                    <div class="lg:col-span-4 bg-white p-6 rounded-xl shadow-lg flex flex-col border border-amber-200">
                         <h3 class="text-xl font-bold mb-1 text-center text-amber-900">杰里科路上的抉择</h3>
                         <p class="text-xs text-slate-400 mb-4 text-center en-text uppercase tracking-widest">Who is My Neighbor?</p>
                         
                         <div id="road-vis" class="road-scene mb-4">
                            <div class="road"></div>
                            <div class="victim"><i class="fas fa-user-injured"></i></div>
                            <div id="passerby-icon" class="passerby"></div>
                         </div>
                         
                         <p id="scene-msg" class="text-center text-sm text-slate-500 mb-4 h-6">点击下方角色经过 (Select Character)</p>

                         <div class="grid grid-cols-3 gap-2">
                            <button onclick="playScene('priest')" class="py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded text-xs font-bold transition">
                                <i class="fas fa-user-tie"></i> 祭司 Priest
                            </button>
                            <button onclick="playScene('levite')" class="py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded text-xs font-bold transition">
                                <i class="fas fa-book"></i> 利未人 Levite
                            </button>
                            <button onclick="playScene('samaritan')" class="py-2 bg-green-100 hover:bg-green-200 text-green-800 rounded text-xs font-bold transition">
                                <i class="fas fa-hand-holding-heart"></i> 萨玛利亚 Samaritan
                            </button>
                         </div>
                    </div>
                </div>

                <!-- Feature: Lightning Fall -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-purple-100">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-slate-700">
                            <i class="fas fa-bolt text-purple-600 mr-2"></i> 属灵的胜利
                            <span class="text-sm font-normal text-slate-400 ml-2 en-text">Satan Falls Like Lightning</span>
                        </h3>
                        <span class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded">Luke 10:18</span>
                    </div>
                    
                    <div id="sky-box" class="sky-container mb-4" onclick="triggerLightning()">
                        <div class="lightning-bolt"></div>
                        <div class="text-white opacity-50 text-4xl"><i class="fas fa-cloud"></i></div>
                        <div id="satan-msg" class="absolute text-yellow-300 font-bold text-xl opacity-0 transition-opacity duration-1000">I SAW HIM FALL!</div>
                    </div>
                    <p class="text-center text-xs text-slate-400 italic">点击天空查看异象 (Click sky to see vision)</p>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#fffbeb]/95 backdrop-blur py-4 mb-6 border-b border-amber-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-amber-900 serif">逐节研读室 <span class="text-base font-normal text-slate-400 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-amber-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-amber-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">全部 All</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">经文含义 Exegesis</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-rose-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">灵修应用 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-amber-600">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-sm text-amber-600 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            // Safety checks
            const academicTitle = verse.academic ? verse.academic.title : "Title Missing";
            const academicContentZh = verse.academic ? verse.academic.content_zh : "Content missing";
            const academicContentEn = verse.academic ? verse.academic.content_en : "Content missing";
            
            const devotionalTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devotionalContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devotionalContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-amber-50 to-white p-5 border-b border-amber-100">
                        <span class="inline-block px-2 py-0.5 bg-amber-100 text-amber-800 text-xs font-bold rounded mb-2 font-mono border border-amber-200">${verse.ref}</span>
                        <p class="text-slate-800 font-serif text-lg leading-relaxed group-hover:text-amber-900 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-slate-500 font-serif text-sm italic en-text border-l-2 border-amber-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-amber-100">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-500">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Exegesis</h4>
                            </div>
                            <h5 class="font-bold text-slate-700 mb-2">${academicTitle}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify mb-2">${academicContentZh}</p>
                            <p class="text-xs text-slate-400 font-serif italic en-text border-t border-slate-300 pt-2 mt-2">${academicContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-rose-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-rose-800 mb-2">${devotionalTitle}</h5>
                            <p class="text-sm text-rose-900/80 leading-relaxed text-justify mb-2">${devotionalContentZh}</p>
                            <p class="text-xs text-rose-700/70 font-serif italic en-text border-t border-rose-200 pt-2 mt-2">${devotionalContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-slate-800">解经方法论总结</h2>
                        <p class="text-slate-500 en-text">Summary of Exegetical Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-slate-500 text-4xl mb-4"><i class="fas fa-book-reader"></i></div>
                            <h3 class="text-xl font-bold text-slate-700 mb-2">权威/经文性解经 (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">Historical & Cultural</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">背景重构（70个国、撒玛利亚人）。词源研究（邻舍、平安）。文学对比（去与听的平衡）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Contextual reconstruction (70 nations, Samaritans). Etymology (Neighbor, Peace). Literary balance (Go vs Listen).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">将神学（爱神）落实到伦理（爱人）中。理解"优先次序"（不可少的一件）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Ground theology (Love God) in ethics (Love Neighbor). Understand 'Priorities' (One thing needed).</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-rose-500 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-rose-500 text-4xl mb-4"><i class="fas fa-pray"></i></div>
                            <h3 class="text-xl font-bold text-rose-800 mb-2">灵修/应用性解经 (Devotional)</h3>
                            <p class="text-xs text-rose-600/70 mb-6 uppercase tracking-wider">Mission & Heart</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-rose-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">身份确据（名字在天上）。行动导向（去照样行）。克服焦虑（马大症候群）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Identity assurance (Names in heaven). Action oriented (Go do likewise). Overcoming anxiety (Martha syndrome).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-rose-100 pt-3">
                                    <div class="flex items-center font-bold text-rose-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">在忙碌中不忘"坐在脚前"。在危险中带着平安前行。打破界限去爱。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Remember 'sitting at feet' in busyness. Go with peace in danger. Break boundaries to love.</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>