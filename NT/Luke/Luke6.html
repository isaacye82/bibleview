<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luke 6: The Sermon on the Plain | 路加福音第六章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Plain Green - Life, Growth, Flat Ground */
            --theme-primary: #15803d; 
            /* Measure Gold - Reward, Generosity */
            --theme-accent: #eab308;
            /* Foundation Stone - Stability, Rock */
            --theme-stone: #57534e;
            /* Background */
            --theme-bg: #f0fdf4;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #14532d;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #bbf7d0; /* Green 200 */
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px rgba(21, 128, 61, 0.15);
            border-left-color: var(--theme-primary);
        }

        .academic-box {
            background-color: #f8fafc; /* Slate 50 */
            border-left: 3px solid #64748b; /* Slate 500 */
            color: #334155;
        }
        
        .devotional-box {
            background-color: #fffbeb; /* Amber 50 */
            border-left: 3px solid #d97706; /* Amber 600 */
            color: #78350f;
        }

        /* Measuring Cup Animation */
        .measure-container {
            position: relative;
            height: 200px;
            background-color: #fefce8;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            border: 2px solid #eab308;
        }

        .cup-outline {
            width: 100px;
            height: 120px;
            border-left: 4px solid #a16207;
            border-right: 4px solid #a16207;
            border-bottom: 4px solid #a16207;
            border-radius: 0 0 20px 20px;
            position: relative;
            background: rgba(255,255,255,0.5);
            overflow: visible; /* Allow overflow for "running over" */
            z-index: 10;
        }

        .grain {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #fbbf24;
            border-radius: 50%;
            top: -20px; /* Start above */
            opacity: 0;
        }

        .grain-pile {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0%;
            background-color: #facc15;
            transition: height 0.5s;
            border-radius: 0 0 15px 15px;
        }

        /* Animation States */
        .pouring .grain {
            animation: pour-grain 0.5s infinite;
        }

        .shaking .cup-outline {
            animation: shake-cup 0.2s infinite;
        }

        .overflowing .grain-pile {
            height: 120%; /* Overflow */
            border-radius: 50% 50% 15px 15px;
            box-shadow: 0 -10px 10px rgba(250, 204, 21, 0.5);
        }
        
        .overflow-particles {
            position: absolute;
            top: 20px; /* Top of cup */
            left: 50%;
            width: 10px;
            height: 10px;
            background-color: #eab308;
            border-radius: 50%;
            opacity: 0;
        }

        .overflowing .overflow-particles {
            animation: spill 1s infinite;
        }

        @keyframes pour-grain {
            0% { top: -50px; opacity: 1; transform: translateX(-50%); left: 50%; }
            100% { top: 100px; opacity: 0; transform: translateX(-50%); left: 50%; }
        }

        @keyframes shake-cup {
            0% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-2px) rotate(-2deg); }
            75% { transform: translateX(2px) rotate(2deg); }
            100% { transform: translateX(0) rotate(0deg); }
        }

        @keyframes spill {
            0% { top: 60px; left: 40px; opacity: 1; } /* Left side spill */
            100% { top: 180px; left: 10px; opacity: 0; }
        }

        /* Love Radar Visual */
        .radar-box {
            position: relative;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 1px dashed #cbd5e1;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .radar-inner {
            width: 60px;
            height: 60px;
            background-color: #bfdbfe; /* Sinner's love */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.6rem;
            color: #1e3a8a;
            transition: all 1s ease;
            position: absolute;
            z-index: 10;
        }

        .radar-outer {
            width: 60px;
            height: 60px; /* Start small */
            background-color: rgba(34, 197, 94, 0.2); /* God's love */
            border: 1px solid #16a34a;
            border-radius: 50%;
            position: absolute;
            transition: all 1s ease;
            z-index: 5;
        }

        .expanded-love .radar-outer {
            width: 150px;
            height: 150px;
        }

        /* Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-green-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-24 sm:h-20 items-center">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-green-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-seedling mr-2 text-green-600"></i> 路加福音 6章</span>
                        <span class="text-xs text-green-700 en-text font-normal ml-8">Luke Chapter 6</span>
                    </span>
                </div>
                <div class="flex space-x-4 sm:space-x-8 items-center overflow-x-auto no-scrollbar">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center shrink-0">
                        平原宝训 <br><span class="text-[10px] uppercase opacity-70 en-text">Sermon on the Plain</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-green-700 text-center shrink-0">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-green-700 text-center shrink-0">
                        方法论总结 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-green-200 mb-1">"你们用什么量器量给人，也必用什么量器量给你们。"</p>
            <p class="text-sm italic text-slate-500 mb-2 en-text">"For with the measure you use it will be measured back to you."</p>
            <p class="text-xs opacity-70">路加福音第六章中英对照研经报告 | Mercy & Foundation</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "平原宪章：颠覆性的爱与根基",
                title_en: "The Manifesto of the Plain: Subversive Love & Foundation",
                summary_zh: "路加福音第6章记载了耶稣著名的'平原宝训'（对应马太的登山宝训，但侧重点不同）。在设立十二使徒之后，耶稣向众人颁布了天国的宪章。这一章充满了激进的'反转'：贫穷的有福了，富足的有祸了；爱仇敌，善待恨你的人。耶稣呼召门徒活出一种超越'互惠互利'（Reciprocity）的生命，建立在'听道并行道'的深层根基之上。",
                summary_en: "Luke 6 records Jesus' famous 'Sermon on the Plain' (parallel to Matthew's Sermon on the Mount, but distinct). After appointing the Twelve, Jesus issues the Kingdom Manifesto. This chapter is full of radical 'reversals': Blessed are the poor, woe to the rich; love enemies, do good to those who hate you. Jesus calls disciples to a life transcending mere 'reciprocity', built on the deep foundation of 'hearing and doing'.",
                concepts: [
                    { title: "福", title_en: "Blessed", greek: "Makarios", color: "text-green-700", desc_zh: "指蒙神恩宠、被神认可的状态，独立于环境的快乐。", desc_en: "A state of divine favor and approval, independent of circumstances." },
                    { title: "祸", title_en: "Woe", greek: "Ouai", color: "text-amber-700", desc_zh: "表示悲叹或警告。指那些在今生已得安慰、未来将失去永恒奖赏的人。", desc_en: "Expression of grief/warning. Those comforted now but losing eternal reward." },
                    { title: "爱", title_en: "Love", greek: "Agapaō", color: "text-rose-600", desc_zh: "一种意志上的选择，善待不配得的人，如同天父善待恶人一样。", desc_en: "A volitional choice to do good to the undeserving, reflecting the Father." }
                ]
            },
            sections: [
                {
                    id: "sabbath",
                    title: "壹 · 安息日的主：人性的优先 (6:1-11)",
                    title_en: "Lord of the Sabbath: Priority of Humanity",
                    desc: "行善与行恶的较量 | Doing Good vs Doing Evil",
                    verses: [
                        {
                            ref: "6:5, 9",
                            text_zh: "又对他们说：'人子是安息日的主。'...我问你们，在安息日行善行恶，救命害命，哪样是可以的呢？",
                            text_en: "And he said to them, 'The Son of Man is lord of the Sabbath.'... 'I ask you, is it lawful on the Sabbath to do good or to do harm, to save life or to destroy it?'",
                            academic: {
                                title: "律法的终极意图 (Ultimate Intent of Law)",
                                content_zh: "法利赛人将安息日变成了一套限制性的规条（不可掐麦穗、不可治病）。耶稣通过大卫吃陈设饼的例子指出，人的基本需要（饥饿）高于仪式性律法。在医治枯干手的人时，耶稣重新定义了安息日的问题：不是'能不能做'，而是'做善事还是坐视恶事'。既然安息日是为人设立的，那么解除人的痛苦就是最符合安息日精神的敬拜。",
                                content_en: "Pharisees turned Sabbath into restrictive rules. Jesus, citing David, shows human need (hunger) supersedes ritual. Healing the withered hand, He redefines the question: not 'can we work?', but 'do good or allow evil?'. Since Sabbath is for man, relieving suffering is the truest Sabbath worship."
                            },
                            devotional: {
                                title: "你的宗教是捆绑还是释放？(Binding or Releasing?)",
                                content_zh: "我们很容易陷入一种'宗教形式主义'，看重聚会、仪式胜过看重身边人的需要。当你的规条（Rule）拦阻了对他人的爱（Love）时，那个规条就成了偶像。耶稣挑战我们：如果你在坚持'正确'的同时却对人的痛苦无动于衷，那你就是在'行恶'。真正的安息日是带给他人安息。",
                                content_en: "We easily fall into 'religious formalism', valuing rituals over people. When your Rule blocks Love, the Rule is an idol. Jesus challenges: If you are 'correct' but indifferent to suffering, you are 'doing harm'. True Sabbath is bringing rest to others."
                            }
                        }
                    ]
                },
                {
                    id: "twelve",
                    title: "贰 · 拣选十二使徒：祷告后的决定 (6:12-16)",
                    title_en: "Choosing the Twelve: Decision after Prayer",
                    desc: "整夜祷告与新以色列 | Night of Prayer & New Israel",
                    verses: [
                        {
                            ref: "6:12-13",
                            text_zh: "那时，耶稣出去，上山祷告，整夜祷告神。到了天亮，叫他的门徒来，就从他们中间挑选十二个人，称他们为使徒。",
                            text_en: "In these days he went out to the mountain to pray, and all night he continued in prayer to God. And when day came, he called his disciples and chose from them twelve, whom he named apostles.",
                            academic: {
                                title: "新以色列的奠基 (Founding the New Israel)",
                                content_zh: "在做出重大决定（拣选核心团队）之前，耶稣独自'整夜祷告'。这显示了人子对父神的绝对依赖。'十二'这个数字象征着以色列的十二支派，表明耶稣正在建立一个新的约民群体。这份名单包含了激进的奋锐党西门和为罗马效力的税吏马太，这种政治上的死对头在基督里合一，本身就是一个神迹。",
                                content_en: "Before this major decision, Jesus prayed 'all night', showing absolute dependence. 'Twelve' symbolizes the 12 tribes—He is founding a New Israel. The list includes Simon the Zealot (radical anti-Rome) and Matthew (pro-Rome tax collector). Their unity in Christ is itself a miracle."
                            },
                            devotional: {
                                title: "重大决定前的膝盖 (Knees Before Decisions)",
                                content_zh: "如果连神的儿子在做决定前都需要整夜祷告，何况我们呢？我们常在做决定后才求神祝福，而不是在做决定前求神指引。耶稣的榜样告诉我们：重大的任命、方向的选择，必须诞生于深度的祷告中。在喧嚣的世界中，我们需要的不仅是策略，更是从神而来的清晰。",
                                content_en: "If the Son of God needed all-night prayer before deciding, how much more do we? We often decide, then ask for blessing. Jesus teaches: Major choices must be birthed in prayer. In a noisy world, we need more than strategy; we need clarity from God."
                            }
                        },
                        {
                            ref: "6:14-16",
                            text_zh: "这十二个人有西门...还有卖主的加略人犹大。",
                            text_en: "Simon... and Judas Iscariot, who became a traitor.",
                            academic: {
                                title: "激进的多元性 (Radical Diversity)",
                                content_zh: "在这份名单中，我们看到了极端的多元性。西门是奋锐党（极端民族主义者，痛恨罗马），马太是税吏（罗马的合作者，被视为叛徒）。在人看来，他们是不共戴天的仇敌。耶稣将他们放在同一个团队中，表明天国的呼召超越了地上的政治和意识形态。这预示了教会将由'万民'组成，合一的基础不是政治立场，而是基督。",
                                content_en: "The list shows extreme diversity. Simon the Zealot (nationalist, anti-Rome) and Matthew (tax collector, pro-Rome traitor) were natural enemies. Jesus uniting them shows the Kingdom transcends earthly politics. This foreshadows the Church of 'all nations', united not by politics, but by Christ."
                            },
                            devotional: {
                                title: "接纳不同的人 (Accepting the Different)",
                                content_zh: "耶稣拣选了各种各样的人，甚至包括最终会出卖他的犹大。这提醒我们，教会不是'同好会'，而是一个因基督而聚集的大家庭。你是否愿意接纳那些性格、背景甚至政治观点与你完全不同的人？神的主权甚至包含着对他人的背叛的预知与许可，这教导我们在不完美的关系中学习爱与包容。",
                                content_en: "Jesus chose diverse people, even Judas. The Church isn't a club for the like-minded, but a family gathered by Christ. Are you willing to accept those different from you? God's sovereignty includes even known betrayal, teaching us to love and endure in imperfect relationships."
                            }
                        }
                    ]
                },
                {
                    id: "beatitudes",
                    title: "叁 · 福与祸：价值观的翻转 (6:20-26)",
                    title_en: "Blessings and Woes: Reversal of Values",
                    desc: "现在的匮乏与未来的饱足 | Present Lack vs Future Fullness",
                    verses: [
                        {
                            ref: "6:20, 24",
                            text_zh: "...你们贫穷的人有福了！因为神的国是你们的...但你们富足的人有祸了！因为你们受过你们的安慰。",
                            text_en: "...Blessed are you who are poor, for yours is the kingdom of God... But woe to you who are rich, for you have received your consolation.",
                            academic: {
                                title: "路加的社会性关注 (Luke's Social Concern)",
                                content_zh: "与马太的'虚心'（灵里贫穷）不同，路加直接说'贫穷的人'（经济/社会地位）。这反映了路加对社会边缘人的关注。这不仅是属灵的应许，也是末世的'大反转'（Great Reversal）：今生受苦、被弃绝的信徒将在神国得偿；而今生只追求物质满足、受人称赞的人，他们的'安慰'已经在这个世界结算完了（Paid in full）。",
                                content_en: "Unlike Matthew's 'poor in spirit', Luke says 'poor' (socio-economic). This reflects Luke's focus on the marginalized. It's the Eschatological Great Reversal: those suffering now for faith will be rewarded; those seeking only earthly comfort and praise have been 'paid in full' now."
                            },
                            devotional: {
                                title: "你的安慰在哪里？(Where is Your Consolation?)",
                                content_zh: "耶稣并不是在仇富，而是在警告：如果你把今生的富足、饱足、欢笑和名声当作最终的满足，那你就'有祸了'，因为你的账户已经结清了，在永恒里没有存款。真正的'有福'在于，因为拥有神，即使在物质匮乏和被人恨恶时，内心仍有确据和喜乐。不要在今生透支你的永恒。",
                                content_en: "Jesus isn't hating wealth, but warning: If earthly wealth, fullness, and fame are your ultimate satisfaction, you are 'woeful'—your account is closed, with no eternal deposit. True blessing is having God, which brings joy even in lack. Don't cash out your eternity for a temporary now."
                            }
                        }
                    ]
                },
                {
                    id: "love-enemies",
                    title: "肆 · 爱仇敌：超凡的伦理 (6:27-36)",
                    title_en: "Love Enemies: Extraordinary Ethics",
                    desc: "像天父一样的慈悲 | Merciful Like the Father",
                    verses: [
                        {
                            ref: "6:27, 35-36",
                            text_zh: "...爱你们的仇敌，恨你们的要待他好...你们倒要爱仇敌，也要借给人不指望偿还...因为他恩待那忘恩的和作恶的。",
                            text_en: "...Love your enemies, do good to those who hate you... But love your enemies, and do good, and lend, expecting nothing in return... for he is kind to the ungrateful and the evil.",
                            academic: {
                                title: "阿加佩 (Agape) 的神学本质",
                                content_zh: "这是基督教伦理的顶峰。当时的希腊罗马伦理强调'互惠'（Reciprocity）——爱朋友，恨敌人。耶稣打破了这个循环。这里的'爱'（Agapao）不是基于情感的喜欢，而是基于意志的善待。其神学基础是模仿天父（Imitatio Dei）：神对'忘恩的和作恶的'都赐下阳光雨水。基督徒的爱必须超越'罪人的爱'（只爱爱他们的人），才能显出神的儿女的身份。",
                                content_en: "The summit of Christian ethics. Greco-Roman ethics valued 'reciprocity'—love friends, hate enemies. Jesus breaks this cycle. 'Agape' is volitional goodwill, not emotional liking. The theological basis is Imitatio Dei: God is kind to the ungrateful. Christian love must exceed 'sinner's love' (loving those who love back) to reveal Sonship."
                            },
                            devotional: {
                                title: "打破恶性循环 (Break the Cycle)",
                                content_zh: "当别人伤害你时，本能反应是反击或冷战。但耶稣呼召我们做一件反直觉的事：祝福咒诅你的人。这不是软弱，这是属灵的进攻——用善胜过恶。当你决定去爱一个不可爱的人时，你就最像你的天父。这很难，但这正是我们可以向世界展示'神是爱'的唯一方式。",
                                content_en: "When hurt, instinct says strike back or withdraw. Jesus calls for the counter-intuitive: Bless those who curse you. This isn't weakness; it's spiritual warfare—overcoming evil with good. When you choose to love the unlovable, you look most like your Father. It's hard, but it's how we show the world 'God is Love'."
                            }
                        }
                    ]
                },
                {
                    id: "builders",
                    title: "伍 · 两种根基：深挖与听道 (6:46-49)",
                    title_en: "Two Foundations: Digging Deep & Hearing",
                    desc: "听见又行去 | Hearing and Doing",
                    verses: [
                        {
                            ref: "6:47-48",
                            text_zh: "凡到我这里来，听见我的话就去行的...他像一个人盖房子，深深地挖地，把根基安在磐石上...",
                            text_en: "Everyone who comes to me and hears my words and does them... is like a man building a house, who dug deep and laid the foundation on the rock...",
                            academic: {
                                title: "深深地挖地 (Dug Deep)",
                                content_zh: "路加的记录比马太多了一个细节：'深深地挖地'（Eskapsen kai ebathunen）。这强调了顺服的艰辛与隐藏性。巴勒斯坦的表层土在夏天坚硬如石，看起来很稳固，但经不起雨季的洪水冲刷。只有挖穿表土，接触到岩床，房子才能存留。'行道'就是这个'挖掘'的过程——它不仅是听，更是付代价去实践，使真理成为生命的根基。",
                                content_en: "Luke adds 'dug deep'. This emphasizes the toil and hiddenness of obedience. Palestine's topsoil looks solid in summer but washes away in floods. Only digging to bedrock ensures stability. 'Doing' is this 'digging'—not just hearing, but the costly practice that makes Truth the foundation of life."
                            },
                            devotional: {
                                title: "看不见的根基工程 (Hidden Foundation Work)",
                                content_zh: "为什么有些人遇到风浪就跌倒（房子塌了），有些人却屹立不倒？区别在于看不见的'地下工程'。仅仅在教会'听道'、点头称是，只是在平地上盖房。只有当你挣扎着顺服神的话（爱仇敌、慷慨给予、不论断）时，你才是在'深深地挖地'。这个过程没人看见，且很辛苦，但它决定了你生命的结局。",
                                content_en: "Why do some fall in storms while others stand? The difference is the hidden 'underground work'. Just 'hearing' sermons is building on dirt. Only when you struggle to obey (loving enemies, giving, not judging) are you 'digging deep'. It's unseen and hard, but it determines your life's destiny."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all',
            measureState: 'empty', // empty, pouring, shaking, full
            loveExpanded: false
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-slate-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-slate-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Interactive Functions ---
        function fillMeasure() {
            const container = document.getElementById('measure-vis');
            const pile = document.getElementById('grain-pile');
            const status = document.getElementById('measure-status');
            const btn = document.getElementById('measure-btn');
            
            if (appState.measureState === 'empty') {
                // Pouring
                container.classList.add('pouring');
                status.innerText = "用十足的量器... (Good measure...)";
                appState.measureState = 'pouring';
                
                setTimeout(() => {
                    // Shaking
                    container.classList.remove('pouring');
                    pile.style.height = "80%";
                    container.classList.add('shaking');
                    status.innerText = "连摇带按... (Pressed down, shaken together...)";
                    appState.measureState = 'shaking';
                    
                    setTimeout(() => {
                        // Overflowing
                        container.classList.remove('shaking');
                        container.classList.add('overflowing');
                        pile.style.height = "100%";
                        status.innerHTML = "<span class='text-amber-600 font-bold'>上尖下流！(Running over!)</span>";
                        appState.measureState = 'full';
                        btn.innerHTML = '<i class="fas fa-undo mr-2"></i> 重置 (Reset)';
                        btn.classList.replace('bg-green-600', 'bg-slate-600');
                        
                        // Add particles
                        for(let i=0; i<10; i++) {
                            let p = document.createElement('div');
                            p.className = 'overflow-particles';
                            p.style.animationDelay = (i * 0.1) + 's';
                            p.style.left = (Math.random() * 40 - 20) + 'px'; // Scatter
                            container.appendChild(p);
                        }
                    }, 1500);
                }, 1500);
            } else {
                // Reset
                container.classList.remove('pouring', 'shaking', 'overflowing');
                pile.style.height = "0%";
                status.innerText = "点击给予 (Click to Give)";
                btn.innerHTML = '<i class="fas fa-hand-holding-heart mr-2"></i> 给予 (Give)';
                btn.classList.replace('bg-slate-600', 'bg-green-600');
                document.querySelectorAll('.overflow-particles').forEach(p => p.remove());
                appState.measureState = 'empty';
            }
        }

        function expandLove() {
            appState.loveExpanded = !appState.loveExpanded;
            const radar = document.getElementById('radar-vis');
            const label = document.getElementById('radar-label');
            const btn = document.getElementById('radar-btn');
            
            if (appState.loveExpanded) {
                radar.classList.add('expanded-love');
                label.innerHTML = "像天父一样：爱仇敌 (Like Father: Love Enemies)";
                label.classList.add('text-green-700', 'font-bold');
                btn.innerText = "收回爱 (Contract Love)";
            } else {
                radar.classList.remove('expanded-love');
                label.innerHTML = "罪人的爱：只爱朋友 (Sinner's Love: Friends Only)";
                label.classList.remove('text-green-700', 'font-bold');
                btn.innerText = "扩张爱 (Expand Love)";
            }
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-green-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-green-100 text-green-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Manifesto</span>
                            <h2 class="text-3xl font-bold serif text-green-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-slate-400 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-slate-600 leading-relaxed mb-4 text-lg border-l-4 border-green-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-slate-500 leading-relaxed text-sm italic en-text border-l-4 border-slate-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col items-center text-center transition hover:bg-green-50 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-slate-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-slate-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-slate-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-slate-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: The Measure Simulator -->
                    <div class="lg:col-span-4 bg-white p-6 rounded-xl shadow-lg flex flex-col border border-amber-200">
                         <h3 class="text-xl font-bold mb-1 text-center text-amber-800">恩典量器</h3>
                         <p class="text-xs text-slate-400 mb-4 text-center en-text uppercase tracking-widest">The Measure Simulator</p>
                         
                         <div id="measure-vis" class="measure-container mb-4">
                             <!-- Grains fall from here via JS -->
                             <div class="grain"></div> 
                             <div class="cup-outline">
                                 <div id="grain-pile" class="grain-pile"></div>
                             </div>
                         </div>
                         
                         <p id="measure-status" class="text-center text-sm text-slate-500 mb-4 h-6">点击给予 (Click to Give)</p>

                         <button id="measure-btn" onclick="fillMeasure()" class="w-full py-2 bg-green-600 hover:bg-green-700 text-white rounded font-bold transition shadow-md border border-green-500">
                             <i class="fas fa-hand-holding-heart mr-2"></i> 给予 (Give)
                         </button>
                         <p class="text-[10px] text-center mt-2 text-slate-400 italic">"你们用什么量器量给人，也必用什么量器量给你们"</p>
                    </div>
                </div>

                <!-- Feature: Love Radar -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-green-100">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-slate-700">
                            <i class="fas fa-heart text-rose-600 mr-2"></i> 爱的半径：罪人 vs 门徒
                            <span class="text-sm font-normal text-slate-400 ml-2 en-text">Radius of Love: Sinner vs Disciple</span>
                        </h3>
                        <span class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded">Luke 6:32-36</span>
                    </div>
                    
                    <div class="flex flex-col items-center">
                        <div id="radar-vis" class="radar-box mb-4">
                            <div class="radar-inner">
                                <span class="text-center">Friends<br>朋友</span>
                            </div>
                            <div class="radar-outer flex justify-center items-end pb-2">
                                <span class="text-[10px] text-green-800 font-bold opacity-0 transition-opacity duration-500" style="${appState.loveExpanded ? 'opacity:1' : ''}">Enemies<br>仇敌</span>
                            </div>
                        </div>
                        
                        <p id="radar-label" class="text-center text-xs text-slate-500 mb-4">罪人的爱：只爱朋友 (Sinner's Love: Friends Only)</p>

                        <button id="radar-btn" onclick="expandLove()" class="px-6 py-2 bg-rose-600 hover:bg-rose-700 text-white rounded-full font-bold text-xs transition">
                            扩张爱 (Expand Love)
                        </button>
                    </div>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#f0fdf4]/95 backdrop-blur py-4 mb-6 border-b border-green-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-green-900 serif">逐节研读室 <span class="text-base font-normal text-slate-400 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-green-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-green-700 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">全部 All</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">经文含义 Exegesis</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-rose-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">灵修应用 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-green-600">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-sm text-green-600 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            // Safety checks
            const academicTitle = verse.academic ? verse.academic.title : "Title Missing";
            const academicContentZh = verse.academic ? verse.academic.content_zh : "Content missing";
            const academicContentEn = verse.academic ? verse.academic.content_en : "Content missing";
            
            const devotionalTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devotionalContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devotionalContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-green-50 to-white p-5 border-b border-green-100">
                        <span class="inline-block px-2 py-0.5 bg-green-100 text-green-800 text-xs font-bold rounded mb-2 font-mono border border-green-200">${verse.ref}</span>
                        <p class="text-slate-800 font-serif text-lg leading-relaxed group-hover:text-green-900 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-slate-500 font-serif text-sm italic en-text border-l-2 border-green-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-green-100">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-500">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Exegesis</h4>
                            </div>
                            <h5 class="font-bold text-slate-700 mb-2">${academicTitle}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify mb-2">${academicContentZh}</p>
                            <p class="text-xs text-slate-400 font-serif italic en-text border-t border-slate-300 pt-2 mt-2">${academicContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-rose-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-rose-800 mb-2">${devotionalTitle}</h5>
                            <p class="text-sm text-rose-900/80 leading-relaxed text-justify mb-2">${devotionalContentZh}</p>
                            <p class="text-xs text-rose-700/70 font-serif italic en-text border-t border-rose-200 pt-2 mt-2">${devotionalContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-slate-800">解经方法论总结</h2>
                        <p class="text-slate-500 en-text">Summary of Exegetical Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-slate-500 text-4xl mb-4"><i class="fas fa-book-reader"></i></div>
                            <h3 class="text-xl font-bold text-slate-700 mb-2">权威/经文性解经 (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">Social & Ethical</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-green-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">对比法（路加的平原宝训 vs 马太的登山宝训）。词源研究（Agape vs Reciprocity）。社会背景分析（第一世纪的荣辱观）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Comparative analysis (Plain vs Mount). Etymology (Agape). Social context (Honor/Shame culture).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-green-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">理解"反转"（Reversal）在天国神学中的核心地位。将"挖深"理解为顺服的代价。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Grasp the centrality of 'Reversal'. Understand 'digging deep' as the cost of obedience.</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-amber-500 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-amber-500 text-4xl mb-4"><i class="fas fa-pray"></i></div>
                            <h3 class="text-xl font-bold text-amber-800 mb-2">灵修/应用性解经 (Devotional)</h3>
                            <p class="text-xs text-amber-600/70 mb-6 uppercase tracking-wider">Action & Heart</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">挑战"互惠"的本能（爱仇敌）。在做决定前寻求神（效法耶稣的祷告）。检查根基（听道 vs 行道）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Challenge instinct of reciprocity. Seek God before decisions. Check foundation (Hearing vs Doing).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-amber-100 pt-3">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">每天操练"不求回报"的给予。在被冒犯时练习祝福。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Practice 'expect nothing back' giving daily. Bless when offended.</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>