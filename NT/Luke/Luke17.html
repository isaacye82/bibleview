<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luke 17: Faith, Gratitude & The Kingdom | è·¯åŠ ç¦éŸ³ç¬¬åä¸ƒç« </title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Mustard Gold - Faith */
            --theme-primary: #ca8a04; 
            /* Gratitude Teal - Healing, The Samaritan */
            --theme-accent: #0d9488;
            /* Judgment Red - Lot's Day, Fire */
            --theme-dark: #b91c1c;
            /* Background */
            --theme-bg: #fffbeb;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #422006;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #fde047; /* Yellow 300 */
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px rgba(202, 138, 4, 0.15);
            border-left-color: var(--theme-primary);
        }

        .academic-box {
            background-color: #f8fafc; /* Slate 50 */
            border-left: 3px solid #64748b; /* Slate 500 */
            color: #334155;
        }
        
        .devotional-box {
            background-color: #f0fdfa; /* Teal 50 */
            border-left: 3px solid #0d9488; /* Teal 600 */
            color: #134e4a;
        }

        /* Uprooting Tree Animation */
        .tree-scene {
            position: relative;
            height: 240px;
            background: linear-gradient(to bottom, #dbeafe 0%, #dcfce7 60%, #0ea5e9 100%); /* Sky to Land to Sea */
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid #ca8a04;
        }

        .mulberry-tree {
            position: absolute;
            bottom: 40%; /* On land */
            font-size: 5rem;
            color: #166534;
            transition: all 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform-origin: bottom center;
        }

        .seed-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background-color: #facc15;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: transform 0.2s;
            z-index: 20;
        }

        .seed-btn:active { transform: scale(0.9); }

        .sea-splash {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%) scale(0);
            width: 60px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            opacity: 0.8;
            transition: transform 0.5s;
        }

        /* Animation States */
        .uprooted .mulberry-tree {
            bottom: 10px; /* Into sea */
            transform: rotate(180deg) scale(0.5);
            opacity: 0.7;
        }
        
        .uprooted .sea-splash {
            transform: translateX(-50%) scale(1.5);
            opacity: 0;
            transition-delay: 1.2s;
        }

        /* Ten Lepers Visual */
        .lepers-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .leper-icon {
            font-size: 1.5rem;
            color: #9ca3af; /* Grey/Unclean */
            text-align: center;
            transition: all 1s ease;
            cursor: pointer;
            position: relative;
        }

        .leper-icon.healed {
            color: #f59e0b; /* Healed Gold */
            transform: scale(1.1);
        }

        .leper-icon.returned {
            color: #0d9488; /* Grateful Teal */
            transform: scale(1.3) translateY(-10px);
        }
        
        .leper-icon.returned::after {
            content: 'ğŸ™';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
        }

        /* Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-yellow-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-24 sm:h-20 items-center">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-yellow-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-seedling mr-2 text-yellow-600"></i> è·¯åŠ ç¦éŸ³ 17ç« </span>
                        <span class="text-xs text-yellow-700 en-text font-normal ml-8">Luke Chapter 17</span>
                    </span>
                </div>
                <div class="flex space-x-4 sm:space-x-8 items-center overflow-x-auto no-scrollbar">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center shrink-0">
                        ä¿¡å¿ƒä¸æ„Ÿæ© <br><span class="text-[10px] uppercase opacity-70 en-text">Faith & Gratitude</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-yellow-700 text-center shrink-0">
                        é€èŠ‚ç ”è¯» <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-yellow-700 text-center shrink-0">
                        æ–¹æ³•è®ºæ€»ç»“ <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-yellow-200 mb-1">"ä½ çš„ä¿¡æ•‘äº†ä½ äº†ã€‚"</p>
            <p class="text-sm italic text-slate-500 mb-2 en-text">"Your faith has made you well."</p>
            <p class="text-xs opacity-70">è·¯åŠ ç¦éŸ³ç¬¬åä¸ƒç« ä¸­è‹±å¯¹ç…§ç ”ç»æŠ¥å‘Š | Kingdom & Readiness</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "ä¿¡å¿ƒçš„åŠ›é‡ä¸ç¥å›½çš„ä¸´åˆ°",
                title_en: "Power of Faith & Coming of the Kingdom",
                summary_zh: "è·¯åŠ ç¦éŸ³ç¬¬17ç« æ˜¯ä¸€ç³»åˆ—å…³äºé—¨å¾’ç”Ÿæ´»æ ¸å¿ƒåŸåˆ™çš„æ•™å¯¼é›†é”¦ã€‚è€¶ç¨£è°ˆåˆ°äº†å…³äº'é¥¶æ•'çš„è‰°éš¾è¦æ±‚ï¼Œå…³äº'ä¿¡å¿ƒ'çš„å·¨å¤§æ½œèƒ½ï¼Œå…³äº'æœäº‹'çš„æ­£ç¡®æ€åº¦ã€‚éšåï¼Œå™äº‹è½¬å‘åä¸ªéº»é£ç—…äººå¾—åŒ»æ²»ï¼Œçªå‡ºäº†'æ„Ÿæ©'çš„é‡è¦æ€§ã€‚ç« èŠ‚çš„ååŠéƒ¨åˆ†æ˜¯å¯¹æ³•åˆ©èµ›äººå…³äºç¥å›½é™ä¸´çš„å›ç­”ï¼Œè€¶ç¨£é€šè¿‡'ç½—å¾—çš„æ—¥å­'å’Œ'æŒªäºšçš„æ—¥å­'ï¼Œè­¦å‘Šæœ«ä¸–çš„çªç„¶æ€§å’Œè­¦é†’çš„å¿…è¦æ€§ã€‚",
                summary_en: "Luke 17 is a collection of teachings on core discipleship principles. Jesus addresses the hard demand of 'forgiveness', the immense potential of 'faith', and the proper attitude of 'service'. The narrative shifts to the healing of ten lepers, highlighting 'gratitude'. The chapter concludes with a response to Pharisees about the Kingdom's coming, using 'Days of Lot' and 'Noah' to warn of the suddenness of the End and the need for readiness.",
                concepts: [
                    { title: "ç»Šå€’äºº", title_en: "Stumbling Block", greek: "Skandala", color: "text-red-700", desc_zh: "æŒ‡å¯¼è‡´ä»–äººè·Œå€’æˆ–çŠ¯ç½ªçš„é™·é˜±ã€‚è™½ç„¶ä¸å¯é¿å…ï¼Œä½†åˆ¶é€ è€…æœ‰ç¥¸äº†ã€‚", desc_en: "Traps causing others to fall. Inevitable, yet woe to the one who causes them." },
                    { title: "æ— ç”¨çš„", title_en: "Unworthy", greek: "Achreios", color: "text-slate-600", desc_zh: "æŒ‡'æ²¡æœ‰é¢å¤–åŠŸå¾·'ã€‚ä»†äººåšå®Œåˆ†å†…çš„äº‹ï¼Œä¸åº”æœŸå¾…ç‰¹æ®Šèµèµã€‚", desc_en: "Without extra merit. Servants doing their duty deserve no special praise." },
                    { title: "ç¥å›½", title_en: "Kingdom of God", greek: "Basileia", color: "text-purple-700", desc_zh: "æ—¢æ˜¯'å°±åœ¨ä½ ä»¬ä¸­é—´'ï¼ˆç°åœ¨æ€§ï¼‰ï¼Œä¹Ÿæ˜¯'äººå­çš„æ—¥å­'ï¼ˆå°†æ¥æ€§ï¼‰ã€‚", desc_en: "Both 'in your midst' (Present) and 'Day of Son of Man' (Future)." }
                ]
            },
            sections: [
                {
                    id: "forgiveness",
                    title: "å£¹ Â· é¥¶æ•ä¸ä¿¡å¿ƒï¼šä¸å¯èƒ½çš„ä»»åŠ¡ï¼Ÿ(17:1-6)",
                    title_en: "Forgiveness & Faith: Mission Impossible?",
                    desc: "æ¯å¤©ä¸ƒæ¬¡ | Seven Times a Day",
                    verses: [
                        {
                            ref: "17:3-6",
                            text_zh: "...è‹¥æ˜¯ä½ çš„å¼Ÿå…„å¾—ç½ªä½ ...æ‡Šæ‚”äº†ï¼Œå°±é¥¶æ•ä»–ã€‚å€˜è‹¥ä»–ä¸€å¤©ä¸ƒæ¬¡å¾—ç½ªä½ ...ä½ æ€»è¦é¥¶æ•ä»–ã€‚ä½¿å¾’å¯¹ä¸»è¯´ï¼š'æ±‚ä¸»åŠ å¢æˆ‘ä»¬çš„ä¿¡å¿ƒã€‚'",
                            text_en: "...if your brother sins, rebuke him, and if he repents, forgive him, and if he sins against you seven times in the day... you must forgive him. The apostles said to the Lord, 'Increase our faith!'",
                            academic: {
                                title: "æ— é™çš„é¥¶æ• (Unlimited Forgiveness)",
                                content_zh: "çŠ¹å¤ªæ‹‰æ¯”æ•™å¯¼é¥¶æ•ä¸‰æ¬¡å³æ­¢ï¼Œè€¶ç¨£è¦æ±‚çš„'ä¸€å¤©ä¸ƒæ¬¡'ï¼ˆå®Œå…¨æ•°ï¼‰æ„å‘³ç€æ— é™çš„å®½æ•ã€‚è¿™æ˜¯ä¸€ä¸ªæé«˜çš„é“å¾·æ ‡å‡†ï¼Œä»¥è‡³äºä½¿å¾’ä»¬æ„Ÿåˆ°åŠ›ä¸èƒ½èƒœï¼Œå› æ­¤è¯·æ±‚'åŠ å¢ä¿¡å¿ƒ'ã€‚è€¶ç¨£ç”¨'èŠ¥èœç§'ï¼ˆæœ€å°çš„ç§å­ï¼‰å’Œ'æ¡‘æ ‘'ï¼ˆæ ¹æ·±è’‚å›ºçš„å¤§æ ‘ï¼‰çš„æ¯”å–»å›ç­”ï¼šä¿¡å¿ƒä¸åœ¨äº'é‡'çš„å¤§å°ï¼Œè€Œåœ¨äºå…¶æœ¬è´¨çš„ç”Ÿå‘½åŠ›ã€‚åªè¦æœ‰çœŸä¿¡å¿ƒï¼Œå°±èƒ½æ‹”é™¤å¿ƒä¸­æ ¹æ·±è’‚å›ºçš„è‹¦æ¯’ï¼ˆæ¡‘æ ‘ï¼‰ã€‚",
                                content_en: "Rabbis taught forgiving three times; Jesus' 'seven times a day' implies unlimited forgiveness. This high standard overwhelmed the apostles, prompting the plea 'Increase our faith!'. Jesus answers with 'Mustard Seed' and 'Mulberry Tree': Faith isn't about 'quantity' but 'vitality'. Even tiny true faith can uproot deep-seated bitterness (mulberry tree)."
                            },
                            devotional: {
                                title: "æ‹”é™¤å¿ƒä¸­çš„æ¡‘æ ‘ (Uprooting the Mulberry Tree)",
                                content_zh: "é¥¶æ•ä¸€ä¸ªä¸æ–­ä¼¤å®³ä½ çš„äººï¼Œæ„Ÿè§‰å°±åƒè¦æŠŠä¸€æ£µå·¨å¤§çš„æ¡‘æ ‘æ‹”èµ·æ¥ä¸¢åœ¨æµ·é‡Œä¸€æ ·éš¾ã€‚æˆ‘ä»¬å¸¸è¯´ï¼š'æˆ‘åšä¸åˆ°ï¼Œæˆ‘ä¿¡å¿ƒä¸å¤Ÿã€‚' ä½†ä¸»è¯´ï¼Œä½ ä¸éœ€è¦å·¨å¤§çš„ä¿¡å¿ƒï¼Œåªéœ€è¦ä¸€ç‚¹ç‚¹'åƒèŠ¥èœç§'é‚£æ ·çœŸå®çš„ã€è¿æ¥äºç¥çš„ä¿¡å¿ƒã€‚ä¸è¦ç›¯ç€ä½ å—ä¼¤çš„æƒ…ç»ªï¼ˆæ¡‘æ ‘ï¼‰ï¼Œè¦ç›¯ç€é‚£ä½å…¨èƒ½çš„ä¸»ã€‚é¡ºæœå»é¥¶æ•ï¼Œå‰©ä¸‹çš„'æ‹”æ ‘'å·¥ä½œæ˜¯ç¥åšçš„ã€‚",
                                content_en: "Forgiving a repeat offender feels like uprooting a massive tree. We say, 'I can't, not enough faith.' The Lord says, you don't need huge faith, just tiny, genuine faith connected to God. Don't focus on the hurt (tree), but on the Almighty. Obey to forgive; God does the uprooting."
                            }
                        }
                    ]
                },
                {
                    id: "servant",
                    title: "è´° Â· æ— ç”¨çš„ä»†äººï¼šæœäº‹çš„æ€åº¦ (17:7-10)",
                    title_en: "Unworthy Servants: Attitude of Service",
                    desc: "åº”åˆ†åšçš„ | Duty Done",
                    verses: [
                        {
                            ref: "17:10",
                            text_zh: "è¿™æ ·ï¼Œä½ ä»¬åšå®Œäº†ä¸€åˆ‡æ‰€å©å’çš„ï¼Œåªå½“è¯´ï¼š'æˆ‘ä»¬æ˜¯æ— ç”¨çš„ä»†äººï¼Œæ‰€åšçš„æœ¬æ˜¯æˆ‘ä»¬åº”åˆ†åšçš„ã€‚'",
                            text_en: "So you also, when you have done all that you were commanded, say, 'We are unworthy servants; we have only done what was our duty.'",
                            academic: {
                                title: "ååŠŸå¾·ç¥å­¦ (Anti-Merit Theology)",
                                content_zh: "è¿™ä¸ªæ¯”å–»æŒ‘æˆ˜äº†å½“æ—¶çš„'åŠŸå¾·è§‚'ã€‚æ³•åˆ©èµ›äººè®¤ä¸ºé¡ºæœå¾‹æ³•å¯ä»¥èµšå–ç¥çš„äºæ¬ æˆ–é¢å¤–å¥–èµã€‚è€¶ç¨£æŒ‡å‡ºï¼Œä»†äººè€•åœ°ã€æ”¾ç¾Šã€ä¼ºå€™ä¸»äººåƒé¥­ï¼Œè¿™éƒ½æ˜¯'æœ¬åˆ†'ï¼ˆDutyï¼‰ï¼Œå¹¶ä¸å€¼å¾—ç‰¹æ®Šæ„Ÿè°¢ã€‚'æ— ç”¨'ï¼ˆUnworthyï¼‰å¹¶éæŒ‡æ¯«æ— ä»·å€¼ï¼Œè€Œæ˜¯æŒ‡'æ²¡æœ‰äº§ç”Ÿé¢å¤–åˆ©æ¶¦'ï¼ˆNo profit margin for meritï¼‰ã€‚æˆ‘ä»¬åœ¨ç¥é¢å‰æ°¸è¿œæ˜¯å—æ©è€…ï¼Œè€Œéå€ºæƒäººã€‚",
                                content_en: "Challenges 'Merit Theology'. Pharisees thought obedience earned God's debt. Jesus says: plowing, shepherding, serving dinner is just 'Duty', deserving no extra thanks. 'Unworthy' means 'no profit margin'â€”we haven't enriched God to put Him in our debt. We are always recipients of grace, not creditors."
                            },
                            devotional: {
                                title: "ç‰¹æƒè€Œéäº¤æ˜“ (Privilege, Not Trade)",
                                content_zh: "æˆ‘ä»¬åœ¨äº‹å¥‰ä¸­å¸¸å¸¦ç€ä¸€ç§'é›‡å·¥å¿ƒæ€'ï¼š'æˆ‘ä¸ºç¥åšäº†è¿™ä¹ˆå¤šï¼Œç¥åº”è¯¥ç¥ç¦æˆ‘...' å½“ç¥ç¦æ²¡æ¥æ—¶ï¼Œæˆ‘ä»¬å°±æŠ±æ€¨ã€‚è€¶ç¨£æé†’æˆ‘ä»¬ï¼šèƒ½äº‹å¥‰ä¸‡ç‹ä¹‹ç‹æœ¬èº«å°±æ˜¯ä¸€ç§ç‰¹æƒï¼Œè€Œä¸æ˜¯ä¸€ç§äº¤æ˜“ç­¹ç ã€‚å½“æˆ‘ä»¬åšå®Œä¸€åˆ‡ï¼Œæœ€å¥åº·çš„å¿ƒæ€æ˜¯ï¼š'ä¸»å•Šï¼Œè°¢è°¢ä½ ä½¿ç”¨æˆ‘è¿™ä¸ªä¸é…çš„äººã€‚'",
                                content_en: "We often serve with a 'hireling mindset': 'I did this, God owes me that.' When blessings delay, we complain. Jesus reminds us: Serving the King is a privilege, not a bargaining chip. The healthiest attitude after success is: 'Lord, thank you for using someone unworthy like me.'"
                            }
                        }
                    ]
                },
                {
                    id: "lepers",
                    title: "å Â· åä¸ªéº»é£ç—…äººï¼šæ„Ÿæ©çš„ç¨€ç¼º (17:11-19)",
                    title_en: "Ten Lepers: Scarcity of Gratitude",
                    desc: "å¤§å£°å½’è£è€€ä¸ç¥ | Loudly Glorifying God",
                    verses: [
                        {
                            ref: "17:17-19",
                            text_zh: "è€¶ç¨£è¯´ï¼š'æ´å‡€äº†çš„ä¸æ˜¯åä¸ªäººå—ï¼Ÿé‚£ä¹ä¸ªåœ¨å“ªé‡Œå‘¢ï¼Ÿé™¤äº†è¿™å¤–æ—äººï¼Œå†æ²¡æœ‰åˆ«äººå›æ¥å½’è£è€€ä¸ç¥å—ï¼Ÿ'å°±å¯¹é‚£äººè¯´ï¼š'èµ·æ¥ï¼Œèµ°å§ï¼ä½ çš„ä¿¡æ•‘äº†ä½ äº†ã€‚'",
                            text_en: "Then Jesus answered, 'Were not ten cleansed? Where are the nine? Was no one found to return and give praise to God except this foreigner?'... 'Rise and go your way; your faith has made you well.'",
                            academic: {
                                title: "èº«ä½“åŒ»æ²»ä¸å…¨äººæ•‘èµ (Healing vs Salvation)",
                                content_zh: "åä¸ªäººéƒ½å¾—äº†èº«ä½“çš„åŒ»æ²»ï¼ˆCleansedï¼‰ï¼Œå› ä¸ºä»–ä»¬éƒ½é¡ºæœå»ç»™ç¥­å¸å¯Ÿçœ‹ã€‚ä½†åªæœ‰é‚£ä¸ªè¢«è§†ä¸º'å¤–æ—äºº'çš„æ’’ç›åˆ©äºšäººå›æ¥äº†ã€‚è€¶ç¨£å¯¹ä»–è¯´ï¼š'ä½ çš„ä¿¡æ•‘äº†ä½ 'ï¼ˆSozoï¼‰ã€‚è¿™é‡Œçš„'æ•‘'æ¯”å‰ä¹ä¸ªäººçš„'æ´å‡€'æ›´æ·±ï¼ŒæŒ‡å…¨äººçš„æ•‘èµå’Œä¸ç¥å…³ç³»çš„æ¢å¤ã€‚è¿™è¡¨æ˜ï¼šçŠ¹å¤ªäººè™½ç„¶æ‰¿å—æ©å…¸å´å¾€å¾€ä¹ ä»¥ä¸ºå¸¸ï¼Œå¤–é‚¦äººå´å¸¸å› æ„Ÿæ©è€Œå¾—ç€æ›´æ·±çš„æ•‘æ©ã€‚",
                                content_en: "All ten were physically healed (cleansed) via obedience. But only the Samaritan ('foreigner') returned. Jesus tells him: 'Your faith has saved (Sozo) you.' This 'saved' is deeper than 'cleansed', implying holistic salvation. It highlights: Jews often took grace for granted; Gentiles often found deeper salvation through gratitude."
                            },
                            devotional: {
                                title: "ä½ æ˜¯é‚£ä¹ä¸ªï¼Œè¿˜æ˜¯é‚£ä¸€ä¸ªï¼Ÿ(Are You the Nine or the One?)",
                                content_zh: "æ„Ÿæ©ç‡åªæœ‰10%ã€‚æˆ‘ä»¬å¤§å¤šæ•°äººåœ¨æ€¥éš¾ä¸­éƒ½ä¼šå¤§å£°æ±‚æ•‘ï¼ˆ'å¯æ€œæˆ‘ä»¬å§ï¼'ï¼‰ï¼Œä½†åœ¨å¾—æ•‘åå´å¾ˆå°‘æœ‰äººå¤§å£°æ„Ÿæ©ã€‚æˆ‘ä»¬å¿™ç€å»'ç»™ç¥­å¸å¯Ÿçœ‹'ï¼ˆå¿™äºæ¢å¤æ­£å¸¸ç”Ÿæ´»ã€äº«å—ç¥ç¦ï¼‰ï¼Œå´å¿˜äº†å›è½¬å½’è£è€€ç»™ç¥ã€‚æ„Ÿæ©æ˜¯ä¿¡å¿ƒçš„å®Œæˆã€‚æ²¡æœ‰æ„Ÿæ©ï¼Œæ©å…¸å°±åƒæ°´æµè¿‡çŸ³å¤´ï¼›æœ‰äº†æ„Ÿæ©ï¼Œæ©å…¸å°±åƒæ°´æ»‹æ¶¦äº†åœŸåœ°ã€‚",
                                content_en: "Gratitude rate is 10%. We all cry loud in trouble ('Have mercy!'), but few cry loud in thanks. We rush to 'show the priest' (resume life/enjoy blessings), forgetting the Giver. Gratitude completes faith. Without it, grace is water over a rock; with it, grace waters the soil."
                            }
                        }
                    ]
                },
                {
                    id: "kingdom",
                    title: "è‚† Â· ç¥å›½çš„é™ä¸´ï¼šç°åœ¨ä¸å°†æ¥ (17:20-37)",
                    title_en: "Coming of the Kingdom: Now & Future",
                    desc: "å°±åœ¨ä½ ä»¬å¿ƒé‡Œ vs æ˜¾ç°çš„æ—¥å­ | Within You vs Day of Revelation",
                    verses: [
                        {
                            ref: "17:21, 26-30",
                            text_zh: "...å› ä¸ºç¥çš„å›½å°±åœ¨ä½ ä»¬å¿ƒé‡Œï¼ˆæˆ–è¯‘ï¼šä¸­é—´ï¼‰ã€‚...æŒªäºšçš„æ—¥å­æ€æ ·ï¼Œäººå­çš„æ—¥å­ä¹Ÿè¦æ€æ ·...åˆå¥½åƒç½—å¾—çš„æ—¥å­...äººå­æ˜¾ç°çš„æ—¥å­ä¹Ÿè¦è¿™æ ·ã€‚",
                            text_en: "...behold, the kingdom of God is in the midst of you... Just as it was in the days of Noah, so will it be in the days of the Son of Man... Likewise, just as it was in the days of Lot...",
                            academic: {
                                title: "å·²ç„¶ä¸æœªç„¶ (Already & Not Yet)",
                                content_zh: "å¯¹äºæ³•åˆ©èµ›äººï¼Œè€¶ç¨£è¯´ç¥å›½'å°±åœ¨ä½ ä»¬ä¸­é—´'ï¼ˆAlreadyï¼‰ï¼ŒæŒ‡å›ç‹è€¶ç¨£å·²ç»æ¥äº†ï¼Œä¸éœ€è¦åˆ°å¤„è§‚å¯Ÿå¯»æ‰¾ã€‚ä½†å¯¹äºé—¨å¾’ï¼Œè€¶ç¨£è°ˆè®º'äººå­çš„æ—¥å­'ï¼ˆNot Yetï¼‰ã€‚é‚£æ—¥å­å°†åƒé—ªç”µä¸€æ ·çªç„¶ã€‚ç”¨æŒªäºšå’Œç½—å¾—çš„ä¾‹å­ï¼Œè€¶ç¨£æŒ‡å‡ºæœ«ä¸–çš„ç‰¹å¾ä¸æ˜¯æˆ˜ä¹±ï¼Œè€Œæ˜¯'æ—¥å¸¸ç”Ÿæ´»çš„éº»æœ¨'ï¼ˆåƒå–å«å¨¶ä¹°å–ï¼‰ã€‚ç¾éš¾å°†åœ¨äººä»¬æœ€æ„æƒ³ä¸åˆ°çš„æ—¶åˆ»ï¼ˆå¹³å®‰ç¨³å¦¥æ—¶ï¼‰çªç„¶ä¸´åˆ°ã€‚",
                                content_en: "To Pharisees, Kingdom is 'Already' (in your midst) in Jesus. To disciples, He speaks of the 'Not Yet' (Day of Son of Man). It will be sudden like lightning. Using Noah and Lot, Jesus characterizes the End not by war, but by 'numb normalcy' (eating, buying). Judgment strikes suddenly when people feel safe."
                            },
                            devotional: {
                                title: "è®°å¾—ç½—å¾—çš„å¦»å­ (Remember Lot's Wife)",
                                content_zh: "åœ¨è¿™ä¸ªå¿™ç¢Œäºåƒå–ä¹°å–ç›–æ¥¼çš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å˜å¾—éº»æœ¨ã€‚è€¶ç¨£ç»™å‡ºäº†ä¸€ä¸ªç®€çŸ­è€Œéœ‡æ’¼çš„è­¦å‘Šï¼š'ä½ ä»¬è¦å›æƒ³ç½—å¾—çš„å¦»å­ã€‚' å¥¹è™½ç„¶èº«ä½“ç¦»å¼€äº†ç´¢å¤šç›ï¼Œå¿ƒå´è¿˜åœ¨é‚£é‡Œï¼Œå›å¤´ä¸€æœ›å°±æˆäº†ç›æŸ±ã€‚ä½ æ˜¯å¦ä¹Ÿè¢«ä¸–ç•Œçš„å®‰é€¸'ç²˜'ä½äº†ï¼Ÿåœ¨é‚£æ—¥å­ï¼Œä¸è¦ç•™æ‹åœ°ä¸Šçš„è´¢ç‰©ã€‚è­¦é†’æ„å‘³ç€éšæ—¶å‡†å¤‡æ”¾æ‰‹ã€‚",
                                content_en: "In a world busy with buying and building, we get numb. Jesus gives a short, shocking warning: 'Remember Lot's wife.' She left Sodom physically, but her heart looked back. Are you stuck to the world's comforts? On That Day, don't cling to earthly stuff. Watchfulness means being ready to let go instantly."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all',
            treeStatus: 'rooted', // rooted, uprooted
            lepers: Array(10).fill({ status: 'sick', returned: false }) // sick, healed, returned
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-slate-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-slate-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Interactive Functions ---
        function uprootTree() {
            const tree = document.getElementById('mulberry-tree');
            const scene = document.getElementById('tree-vis');
            const msg = document.getElementById('faith-msg');
            
            if (appState.treeStatus === 'rooted') {
                scene.classList.add('uprooted');
                appState.treeStatus = 'uprooted';
                msg.innerText = "è¿™æ¡‘æ ‘æ‹”èµ·ï¼Œæ ½åœ¨æµ·é‡Œäº†ï¼(Uprooted!)";
                msg.className = "text-center text-sm font-bold text-teal-700 h-6 mt-2";
            } else {
                scene.classList.remove('uprooted');
                appState.treeStatus = 'rooted';
                msg.innerText = "ç‚¹å‡»èŠ¥èœç§ï¼Œä½¿ç”¨ä¿¡å¿ƒ (Click Seed)";
                msg.className = "text-center text-sm text-slate-500 h-6 mt-2";
            }
        }

        function healLeper(index) {
            const icon = document.getElementById(`leper-${index}`);
            // Logic: Click to heal. If index is 9 (the 10th one, simulate Samaritan), click again to return.
            
            if (appState.lepers[index].status === 'sick') {
                appState.lepers[index].status = 'healed';
                icon.className = "leper-icon healed";
                icon.innerHTML = '<i class="fas fa-user"></i>'; // Healed person
            } else if (appState.lepers[index].status === 'healed' && index === 9) {
                // Only the last one returns in this simulation
                appState.lepers[index].returned = true;
                icon.className = "leper-icon returned";
            }
        }
        
        function resetLepers() {
            appState.lepers = Array(10).fill({ status: 'sick', returned: false });
            // This requires re-rendering or manual DOM reset. For simplicity in this structure:
            renderDashboard(); // Re-render to reset visuals
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-amber-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-amber-100 text-amber-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Kingdom</span>
                            <h2 class="text-3xl font-bold serif text-amber-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-slate-400 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-slate-600 leading-relaxed mb-4 text-lg border-l-4 border-amber-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-slate-500 leading-relaxed text-sm italic en-text border-l-4 border-slate-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col items-center text-center transition hover:bg-amber-50 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-slate-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-slate-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-slate-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-slate-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: Uprooting Simulator -->
                    <div class="lg:col-span-4 bg-white p-6 rounded-xl shadow-lg flex flex-col border border-yellow-200">
                         <h3 class="text-xl font-bold mb-1 text-center text-amber-900">æ¡‘æ ‘æ‹”èµ·æ¨¡æ‹Ÿå™¨</h3>
                         <p class="text-xs text-slate-400 mb-4 text-center en-text uppercase tracking-widest">Faith Simulator</p>
                         
                         <div id="tree-vis" class="tree-scene mb-2">
                             <div class="seed-btn" onclick="uprootTree()"><i class="fas fa-seedling text-amber-900"></i></div>
                             <div id="mulberry-tree" class="mulberry-tree"><i class="fas fa-tree"></i></div>
                             <div class="sea-splash"></div>
                         </div>
                         
                         <p id="faith-msg" class="text-center text-sm text-slate-500 h-6 mt-2">ç‚¹å‡»èŠ¥èœç§ï¼Œä½¿ç”¨ä¿¡å¿ƒ (Click Seed)</p>
                         <p class="text-[10px] text-center text-slate-400 italic">"è‹¥æ˜¯ä½ ä»¬æœ‰ä¿¡å¿ƒåƒä¸€ç²’èŠ¥èœç§..."</p>
                    </div>
                </div>

                <!-- Feature: Ten Lepers Interactive -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-teal-100">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-slate-700">
                            <i class="fas fa-heart text-teal-600 mr-2"></i> æ„Ÿæ©è®¡æ•°å™¨
                            <span class="text-sm font-normal text-slate-400 ml-2 en-text">The Gratitude Counter</span>
                        </h3>
                        <span class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded">Luke 17:17</span>
                    </div>
                    
                    <div class="lepers-container">
                        ${Array(10).fill(0).map((_, i) => `
                            <div id="leper-${i}" class="leper-icon" onclick="healLeper(${i})">
                                <i class="fas fa-head-side-mask"></i>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="flex justify-between items-center mt-4 border-t border-slate-100 pt-4">
                        <div class="text-xs text-slate-500">
                            <span class="block">1. ç‚¹å‡»å›¾æ ‡åŒ»æ²» (Click to Heal)</span>
                            <span class="block">2. ç‚¹å‡»ç¬¬10ä¸ªè®©ä»–å›æ¥ (Click 10th to Return)</span>
                        </div>
                        <button onclick="resetLepers()" class="text-xs text-teal-600 hover:text-teal-800 font-bold underline">é‡ç½® (Reset)</button>
                    </div>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#fffbeb]/95 backdrop-blur py-4 mb-6 border-b border-amber-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-amber-900 serif">é€èŠ‚ç ”è¯»å®¤ <span class="text-base font-normal text-slate-400 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-amber-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-amber-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">å…¨éƒ¨ All</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">ç»æ–‡å«ä¹‰ Exegesis</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-teal-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">çµä¿®åº”ç”¨ Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-amber-600">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-sm text-amber-600 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            // Safety checks
            const academicTitle = verse.academic ? verse.academic.title : "Title Missing";
            const academicContentZh = verse.academic ? verse.academic.content_zh : "Content missing";
            const academicContentEn = verse.academic ? verse.academic.content_en : "Content missing";
            
            const devotionalTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devotionalContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devotionalContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-amber-50 to-white p-5 border-b border-amber-100">
                        <span class="inline-block px-2 py-0.5 bg-amber-100 text-amber-800 text-xs font-bold rounded mb-2 font-mono border border-amber-200">${verse.ref}</span>
                        <p class="text-slate-800 font-serif text-lg leading-relaxed group-hover:text-amber-900 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-slate-500 font-serif text-sm italic en-text border-l-2 border-amber-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-amber-100">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-500">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">ç»æ–‡å«ä¹‰ Exegesis</h4>
                            </div>
                            <h5 class="font-bold text-slate-700 mb-2">${academicTitle}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify mb-2">${academicContentZh}</p>
                            <p class="text-xs text-slate-400 font-serif italic en-text border-t border-slate-300 pt-2 mt-2">${academicContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-teal-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">çµä¿®åº”ç”¨ Devotional</h4>
                            </div>
                            <h5 class="font-bold text-teal-800 mb-2">${devotionalTitle}</h5>
                            <p class="text-sm text-teal-900/80 leading-relaxed text-justify mb-2">${devotionalContentZh}</p>
                            <p class="text-xs text-teal-700/70 font-serif italic en-text border-t border-teal-200 pt-2 mt-2">${devotionalContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-slate-800">è§£ç»æ–¹æ³•è®ºæ€»ç»“</h2>
                        <p class="text-slate-500 en-text">Summary of Exegetical Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-slate-500 text-4xl mb-4"><i class="fas fa-book-reader"></i></div>
                            <h3 class="text-xl font-bold text-slate-700 mb-2">æƒå¨/ç»æ–‡æ€§è§£ç» (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">Historical & Rhetorical</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> åŸåˆ™ Principles</div>
                                    <div class="mb-1">ä¿®è¾é€»è¾‘åˆ†æï¼ˆä»è½»åˆ°é‡ï¼‰ã€‚éšå–»è§£æï¼ˆæ¡‘æ ‘ã€èŠ¥èœç§ï¼‰ã€‚æœ«ä¸–è®ºèƒŒæ™¯ï¼ˆç½—å¾—çš„æ—¥å­ã€æŒªäºšçš„æ—¥å­ï¼‰ã€‚</div>
                                    <div class="text-xs italic text-slate-400 en-text">Rhetorical logic (Lesser to Greater). Metaphor decoding (Mulberry, Mustard). Eschatological context (Noah/Lot).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> å¦‚ä½•è¿ç”¨ How to Apply</div>
                                    <div class="mb-1">ç†è§£ä¿¡å¿ƒçš„"æœ¬è´¨"é‡äº"æ•°é‡"ã€‚åŒºåˆ†"èº«ä½“æ´å‡€"ä¸"å…¨äººæ•‘æ©"ï¼ˆSozoï¼‰ã€‚</div>
                                    <div class="text-xs italic text-slate-400 en-text">Prioritize faith's 'nature' over 'quantity'. Distinguish 'healing' from 'wholeness' (Sozo).</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-teal-500 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-teal-500 text-4xl mb-4"><i class="fas fa-pray"></i></div>
                            <h3 class="text-xl font-bold text-teal-800 mb-2">çµä¿®/åº”ç”¨æ€§è§£ç» (Devotional)</h3>
                            <p class="text-xs text-teal-600/70 mb-6 uppercase tracking-wider">Gratitude & Readiness</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-teal-600 mb-1"><i class="fas fa-check-circle mr-2"></i> åŸåˆ™ Principles</div>
                                    <div class="mb-1">å°†æ„Ÿæ©è§†ä¸ºä¿¡å¿ƒçš„å®Œæˆã€‚åœ¨æœäº‹ä¸­ä¿æŒ"æ— ç”¨ä»†äºº"çš„è°¦å‘ã€‚åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ä¿æŒæœ«ä¸–è­¦é†’ã€‚</div>
                                    <div class="text-xs italic text-slate-400 en-text">Gratitude completes faith. Serving with 'unworthy servant' humility. Daily eschatological alertness.</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-teal-100 pt-3">
                                    <div class="flex items-center font-bold text-teal-600 mb-1"><i class="fas fa-check-circle mr-2"></i> å¦‚ä½•è¿ç”¨ How to Apply</div>
                                    <div class="mb-1">æ¯å¤©æ•°ç®—æ©å…¸å¹¶å›æ¥å½’è£è€€ç»™ç¥ã€‚ä¸è¦å›å¤´çœ‹ä¸–ç•Œï¼ˆç½—å¾—çš„å¦»å­ï¼‰ã€‚</div>
                                    <div class="text-xs italic text-slate-400 en-text">Count blessings daily and return praise. Don't look back (Lot's wife).</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>