<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luke 18: Prayer, Humility & Mercy | 路加福音第十八章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Justice Purple - The Judge, Authority, Royalty */
            --theme-primary: #6b21a8; 
            /* Repentance Grey - Ashes, Humility, Dust */
            --theme-accent: #525252;
            /* Faith Gold - Value, Eternal Life, Light */
            --theme-gold: #ca8a04;
            /* Background */
            --theme-bg: #faf5ff;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #3b0764;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #e9d5ff; /* Purple 200 */
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px rgba(107, 33, 168, 0.15);
            border-left-color: var(--theme-primary);
        }

        .academic-box {
            background-color: #f8fafc; /* Slate 50 */
            border-left: 3px solid #64748b; /* Slate 500 */
            color: #334155;
        }
        
        .devotional-box {
            background-color: #fffbeb; /* Amber 50 */
            border-left: 3px solid #d97706; /* Amber 600 */
            color: #78350f;
        }

        /* Scales of Justification Animation */
        .scales-wrapper {
            position: relative;
            height: 220px;
            background: linear-gradient(to bottom, #f3e8ff 0%, #e9d5ff 100%);
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid #a855f7;
        }

        .beam {
            width: 200px;
            height: 6px;
            background-color: #4b5563;
            position: relative;
            transition: transform 1s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .pan {
            width: 60px;
            height: 40px;
            border-bottom: 3px solid #4b5563;
            border-left: 3px solid #4b5563;
            border-right: 3px solid #4b5563;
            border-radius: 0 0 30px 30px;
            position: absolute;
            top: 20px;
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            justify-content: flex-start;
        }
        
        .pan::before {
            content: '';
            position: absolute;
            top: -20px;
            width: 2px;
            height: 20px;
            background-color: #9ca3af;
        }

        .pan-left { left: 0; transform: translateX(-50%); } /* Pharisee */
        .pan-right { right: 0; transform: translateX(50%); } /* Tax Collector */

        .weight-item {
            width: 50px;
            height: 10px;
            margin-bottom: 2px;
            border-radius: 2px;
            font-size: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            opacity: 0;
            animation: drop-in 0.5s forwards;
        }

        .w-pharisee { background-color: #93c5fd; color: #1e3a8a; }
        .w-tax { background-color: #fbbf24; color: #78350f; border: 1px solid #b45309; height: 30px; border-radius: 50%; }

        .pivot {
            position: absolute;
            width: 0; 
            height: 0; 
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 20px solid #4b5563;
            top: 60%;
        }

        /* Persistence Bar */
        .persistence-container {
            margin-top: 15px;
            background-color: white;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 5px;
        }
        .progress-fill {
            height: 100%;
            width: 0%;
            background-color: #9333ea;
            transition: width 0.2s;
        }

        @keyframes drop-in {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-purple-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-24 sm:h-20 items-center">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-purple-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-balance-scale-right mr-2 text-purple-600"></i> 路加福音 18章</span>
                        <span class="text-xs text-purple-700 en-text font-normal ml-8">Luke Chapter 18</span>
                    </span>
                </div>
                <div class="flex space-x-4 sm:space-x-8 items-center overflow-x-auto no-scrollbar">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center shrink-0">
                        祷告与称义 <br><span class="text-[10px] uppercase opacity-70 en-text">Prayer & Justification</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-purple-700 text-center shrink-0">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-purple-700 text-center shrink-0">
                        方法论总结 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-purple-200 mb-1">"凡自高的，必降为卑；自卑的，必升为高。"</p>
            <p class="text-sm italic text-slate-500 mb-2 en-text">"For everyone who exalts himself will be humbled, but the one who humbles himself will be exalted."</p>
            <p class="text-xs opacity-70">路加福音第十八章中英对照研经报告 | Persistent Faith</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "恒切的祷告与谦卑的心",
                title_en: "Persistent Prayer and a Humble Heart",
                summary_zh: "路加福音第18章通过一系列比喻和事件，深刻探讨了'人子来的时候'所寻找的信心。从寡妇不灰心的祷告，到税吏痛悔的呼求；从像小孩子般承受神国，到富有的官忧愁离开。这一章挑战了我们对'义'的理解，揭示了神国是赐给那些承认自己灵里贫穷、并在信心中坚持到底的人。",
                summary_en: "Luke 18 explores the kind of faith the Son of Man looks for upon His return. From the widow's persistent prayer to the tax collector's repentant cry; from receiving the Kingdom like a child to the rich ruler's sorrowful departure. This chapter challenges our understanding of 'righteousness', revealing that the Kingdom belongs to those who admit spiritual poverty and persist in faith.",
                concepts: [
                    { title: "伸冤", title_en: "Justice", greek: "Ekdikēsis", color: "text-purple-700", desc_zh: "指神为祂的选民施行公义的审判，这是末世论的盼望。", desc_en: "Vindication/Justice. God executing righteous judgment for His elect." },
                    { title: "开恩可怜", title_en: "Propitiate", greek: "Hilaskomai", color: "text-slate-600", desc_zh: "税吏的用词，意为'息怒'或'赎罪'。这是献祭用语。", desc_en: "Lit. 'Be propitiated' or 'atoned'. Sacrificial language asking for mercy." },
                    { title: "骆驼", title_en: "Camel", greek: "Kamēlos", color: "text-amber-700", desc_zh: "当时最大的动物，比喻富人进神国的'不可能'，以此反衬神的大能。", desc_en: "Largest local animal. Metaphor for the 'impossibility' of rich entering Kingdom." }
                ]
            },
            sections: [
                {
                    id: "widow",
                    title: "壹 · 寡妇与法官：常常祷告 (18:1-8)",
                    title_en: "Widow & Judge: Pray Always",
                    desc: "不灰心的信心 | Faith Not Losing Heart",
                    verses: [
                        {
                            ref: "18:1, 7-8",
                            text_zh: "耶稣设一个比喻，是要人常常祷告，不可灰心...神的选民昼夜呼吁他，他纵然为他们忍了多时，岂不终久给他们伸冤吗？...人子来的时候，遇得见世上有信德吗？",
                            text_en: "And he told them a parable to the effect that they ought always to pray and not lose heart... And will not God give justice to his elect, who cry to him day and night?... When the Son of Man comes, will he find faith on earth?",
                            academic: {
                                title: "从轻到重的论证 (Qal Wahomer)",
                                content_zh: "这是一个'从轻到重'（How much more）的比喻。如果不义的法官（不惧怕神、不尊重人）仅因怕麻烦都给寡妇伸冤，那么慈爱公义的神岂不更会回应祂选民的呼求吗？'忍了多时'可能指神对恶人的宽容，或是对信徒信心的试炼。最后的反问句（遇得见信德吗？）带有末世论的张力，暗示在漫长的等待中，坚持到底的信心是稀缺的。",
                                content_en: "A 'Lesser to Greater' argument. If an unjust judge answers due to annoyance, how much more will the Righteous God answer His elect? 'Will he find faith?' implies an eschatological tension: amidst delay and suffering, persistent faith is rare and precious."
                            },
                            devotional: {
                                title: "你还在敲门吗？(Are You Still Knocking?)",
                                content_zh: "当我们祷告许久未蒙应允时，最容易'灰心'（Lose heart）。我们开始怀疑神是否听见，或是否在乎。但耶稣用这个比喻告诉我们：延迟不等于拒绝。神不是那个冷漠的法官，但祂看重我们在等待中被熬炼出的'坚持的信心'。不要停止敲门，直到门开，或直到主来。",
                                content_en: "When prayers go unanswered, we lose heart, doubting God's care. Jesus says: Delay is not denial. God isn't the unjust judge, but He values the 'persistent faith' forged in waiting. Don't stop knocking until the door opens or the Lord comes."
                            }
                        }
                    ]
                },
                {
                    id: "pharisee-tax",
                    title: "贰 · 法利赛人与税吏：义的真谛 (18:9-14)",
                    title_en: "Pharisee & Tax Collector: True Righteousness",
                    desc: "自义 vs 痛悔 | Self-Righteousness vs Contrition",
                    verses: [
                        {
                            ref: "18:11-13",
                            text_zh: "法利赛人...自言自语...我一个礼拜禁食两次...税吏远远的站着...捶着胸说：'神啊，开恩可怜我这个罪人！'",
                            text_en: "The Pharisee... prayed thus: 'I fast twice a week...' But the tax collector... beat his breast, saying, 'God, be merciful to me, a sinner!'",
                            academic: {
                                title: "两种姿态与称义 (Two Postures & Justification)",
                                content_zh: "法利赛人的祷告其实是'对他自己的独白'（prayed to himself），充满了'我'做了什么。他依靠的是'超额功德'（律法只规定一年一次禁食，他一周两次）。税吏则'远远站着'（不配感），'捶胸'（极度悲伤），求神'开恩可怜'（Hilaskomai - 意为'做挽回祭'）。结果是惊人的：被社会鄙视的税吏'算为义'（Justified），而宗教精英却被拒绝。这是保罗'因信称义'神学的福音书版本。",
                                content_en: "The Pharisee's prayer was a monologue about his 'supererogatory merit' (fasting more than required). The Tax Collector stood 'far off', 'beating his breast' (grief), asking God to 'be propitiated' (atonement language). Shockingly, the outcast is 'Justified' while the elite is rejected. This is the Gospel parallel to Pauline Justification by Faith."
                            },
                            devotional: {
                                title: "你在和谁比较？(Who Are You Comparing With?)",
                                content_zh: "法利赛人的错误在于他是横向比较（我不像别人...不像这个税吏），这让他充满了优越感。税吏是纵向面对神，这让他看到了自己的本相。当我们在这世界上寻找优越感时，我们离神最远；当我们在这位圣洁的神面前承认一无所有时，我们离恩典最近。",
                                content_en: "The Pharisee compared horizontally ('not like other men'), breeding pride. The Tax Collector faced God vertically, seeing his true state. Seeking superiority distances us from God; admitting bankruptcy before Him brings us closest to Grace."
                            }
                        }
                    ]
                },
                {
                    id: "children",
                    title: "叁 · 婴孩与富人：进神国的条件 (18:15-30)",
                    title_en: "Infants & The Rich: Entering the Kingdom",
                    desc: "无助的依赖 vs 拥有的阻碍 | Helpless Dependence vs Obstacle of Possession",
                    verses: [
                        {
                            ref: "18:17, 24-25",
                            text_zh: "凡要承受神国的，若不像小孩子，断不能进去...有钱财的人进神的国是何等的难哪！骆驼穿过针的眼...",
                            text_en: "Whoever does not receive the kingdom of God like a child shall not enter it... How difficult it is for those who have wealth to enter the kingdom of God! For it is easier for a camel...",
                            academic: {
                                title: "接受 vs 赚取 (Receiving vs Earning)",
                                content_zh: "这段经文将'小孩子'（无地位、无资产、完全依赖）与'富有的官'（有地位、有资产、依靠行为）并列。小孩子代表'接受者'，富人代表'赚取者'。富人问'我该做什么'（Doing），耶稣挑战他'变卖一切'（Being - 生命重心的转移）。'骆驼穿针'是当时形容'不可能'的谚语。这表明救恩对任何人（特别是富人）都是人所不能的，但在神凡事都能。",
                                content_en: "Juxtaposes 'Infants' (status-less, dependent) with 'Rich Ruler' (status, possessive). Children represent 'Receivers'; the Ruler represents 'Earners' ('What must I do?'). Jesus challenges his idol (wealth). 'Camel through needle' means 'impossible'. Salvation is impossible for man, especially the self-sufficient, but possible with God."
                            },
                            devotional: {
                                title: "放手的艺术 (The Art of Letting Go)",
                                content_zh: "那个少年官'忧忧愁愁'地走了，因为他拥有的太多，放不下。我们手中也常紧握着某些东西（金钱、名声、控制权），以为那是保障，其实那是拦阻我们进窄门的'骆驼包袱'。像小孩子一样，意味着两手空空地伸向父亲。你愿意松开手，让神接管吗？",
                                content_en: "The ruler left sad because he held too much. We cling to money, fame, or control as security, but they are 'camel baggage' blocking the narrow door. Being like a child means reaching out with empty hands. Will you let go and let God take over?"
                            }
                        }
                    ]
                },
                {
                    id: "blind-man",
                    title: "肆 · 耶利哥的盲人：看见的信心 (18:35-43)",
                    title_en: "Blind Man at Jericho: Faith that Sees",
                    desc: "你要我为你做什么？ | What Do You Want?",
                    verses: [
                        {
                            ref: "18:38-41",
                            text_zh: "他就呼叫说：'大卫的子孙耶稣啊，可怜我吧！'...耶稣说：'你要我为你做什么？'他说：'主啊，我要能看见。'",
                            text_en: "And he cried out, 'Jesus, Son of David, have mercy on me!'... Jesus asked him, 'What do you want me to do for you?' He said, 'Lord, let me recover my sight.'",
                            academic: {
                                title: "属灵视力的恢复 (Restoration of Spiritual Sight)",
                                content_zh: "这个盲人（马可福音称巴底买）在肉体上是瞎的，灵里却比法利赛人看得更清楚——他认出耶稣是'大卫的子孙'（弥赛亚头衔）。众人试图让他闭嘴（拦阻），但他'越发大声'（坚持）。这与前文的'恒切祷告'相呼应。耶稣的问题'你要我为你做什么'引导他发出具体的信心宣告。'看见'（Anablepō）不仅是视力的恢复，也是跟随耶稣的开始（一路跟随）。",
                                content_en: "Physically blind, but spiritually sharper than Pharisees—he recognizes the 'Son of David'. Crowds silenced him, but he cried 'all the more' (Persistence). Jesus invites specific faith: 'What do you want?'. 'Recover sight' leads to 'following Him'. A picture of spiritual awakening."
                            },
                            devotional: {
                                title: "具体的祈求 (Specific Asking)",
                                content_zh: "神知道你的需要，但他仍问：'你要我为你做什么？' 这是一个邀请，让你理清内心的渴望，并用信心表达出来。不要只做模糊的祷告（'主啊祝福我'），要具体地求（'主啊，求你除去我的脾气'，'求你医治我的婚姻'）。具体的祷告带来具体的恩典。",
                                content_en: "God knows your need, yet asks, 'What do you want?' This invites you to clarify your desire and voice it in faith. Don't pray vaguely ('Bless me'); pray specifically ('Heal my anger', 'Restore my marriage'). Specific prayers invite specific grace."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all',
            scaleSide: 'balanced', // left, right
            knockProgress: 0
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-slate-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-slate-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Interactive Functions ---
        function weighScale(side) {
            const beam = document.querySelector('.beam');
            const result = document.getElementById('scale-result');
            const pWeights = document.querySelectorAll('.w-pharisee');
            const tWeights = document.querySelectorAll('.w-tax');
            
            if (side === 'pharisee') {
                beam.style.transform = 'rotate(-15deg)';
                result.innerHTML = "<span class='text-blue-600 font-bold'>自义 (Self-Righteous)</span><br><span class='text-xs text-slate-500'>这是人眼中的义，但在神面前不被称义。</span>";
                pWeights.forEach(w => w.style.animation = 'drop-in 0.5s forwards');
                tWeights.forEach(w => w.style.opacity = '0');
            } else if (side === 'tax') {
                beam.style.transform = 'rotate(15deg)'; // Tax collector heavier in God's eyes (Justified)
                result.innerHTML = "<span class='text-amber-600 font-bold'>被称义 (Justified!)</span><br><span class='text-xs text-slate-500'>痛悔的心，神必不轻看。</span>";
                pWeights.forEach(w => w.style.opacity = '0');
                tWeights.forEach(w => w.style.animation = 'drop-in 0.5s forwards');
            }
        }

        function knock() {
            const bar = document.getElementById('persist-bar');
            const msg = document.getElementById('persist-msg');
            
            if (appState.knockProgress < 100) {
                appState.knockProgress += 10;
                bar.style.width = appState.knockProgress + '%';
                
                if (appState.knockProgress < 30) msg.innerText = "不要灰心... (Don't lose heart)";
                else if (appState.knockProgress < 70) msg.innerText = "昼夜呼吁... (Cry day and night)";
                else if (appState.knockProgress < 100) msg.innerText = "快了！(Almost there!)";
                else msg.innerHTML = "<span class='text-purple-700 font-bold'>神必快快给他们伸冤！(Justice!)</span>";
            } else {
                // Reset
                appState.knockProgress = 0;
                bar.style.width = '0%';
                msg.innerText = "点击按钮开始祷告 (Click to Pray)";
            }
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-purple-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-purple-100 text-purple-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Parables</span>
                            <h2 class="text-3xl font-bold serif text-purple-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-slate-400 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-slate-600 leading-relaxed mb-4 text-lg border-l-4 border-purple-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-slate-500 leading-relaxed text-sm italic en-text border-l-4 border-slate-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col items-center text-center transition hover:bg-purple-50 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-slate-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-slate-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-slate-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-slate-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: The Justification Scale -->
                    <div class="lg:col-span-4 bg-white p-6 rounded-xl shadow-lg flex flex-col border border-purple-200">
                         <h3 class="text-xl font-bold mb-1 text-center text-purple-900">义的称量</h3>
                         <p class="text-xs text-slate-400 mb-4 text-center en-text uppercase tracking-widest">The Justification Scale</p>
                         
                         <div class="scales-wrapper mb-4">
                             <div class="pivot"></div>
                             <div class="beam">
                                 <div class="pan pan-left flex flex-col-reverse items-center pb-1">
                                     <!-- Weights Pharisee -->
                                     <div class="weight-item w-pharisee">禁食 Fast</div>
                                     <div class="weight-item w-pharisee">奉献 Tithe</div>
                                     <div class="weight-item w-pharisee">不勒索 Moral</div>
                                 </div>
                                 <div class="pan pan-right flex flex-col-reverse items-center pb-1">
                                     <!-- Weights Tax Collector -->
                                     <div class="weight-item w-tax text-xs">悔改 Repent</div>
                                 </div>
                             </div>
                         </div>
                         
                         <p id="scale-result" class="text-center text-sm text-slate-500 mb-4 h-10">谁算为义？(Who is Justified?)</p>

                         <div class="grid grid-cols-2 gap-2">
                             <button onclick="weighScale('pharisee')" class="py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded font-bold text-xs transition">
                                 <i class="fas fa-user-tie mr-1"></i> 法利赛人
                             </button>
                             <button onclick="weighScale('tax')" class="py-2 bg-amber-100 hover:bg-amber-200 text-amber-800 rounded font-bold text-xs transition">
                                 <i class="fas fa-user-injured mr-1"></i> 税吏
                             </button>
                         </div>
                    </div>
                </div>

                <!-- Feature: Persistence Bar -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-purple-100">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-slate-700">
                            <i class="fas fa-hourglass-half text-purple-600 mr-2"></i> 恒切祷告模拟
                            <span class="text-sm font-normal text-slate-400 ml-2 en-text">Persistent Prayer Simulator</span>
                        </h3>
                        <span class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded">Luke 18:1</span>
                    </div>
                    
                    <div class="persistence-container">
                        <div class="flex justify-between text-xs text-slate-500 mb-1">
                            <span>灰心 (Lose Heart)</span>
                            <span>伸冤 (Justice)</span>
                        </div>
                        <div class="progress-bar">
                            <div id="persist-bar" class="progress-fill"></div>
                        </div>
                        <p id="persist-msg" class="text-center text-sm font-bold text-slate-600 mt-2 h-6">点击按钮开始祷告 (Click to Pray)</p>
                        <button onclick="knock()" class="w-full mt-2 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded font-bold shadow transition transform active:scale-95">
                            <i class="fas fa-hand-rock mr-2"></i> 叩门 / 祷告 (Knock / Pray)
                        </button>
                    </div>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#faf5ff]/95 backdrop-blur py-4 mb-6 border-b border-purple-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-purple-900 serif">逐节研读室 <span class="text-base font-normal text-slate-400 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-purple-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-purple-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">全部 All</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">经文含义 Exegesis</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-amber-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">灵修应用 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-purple-600">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-sm text-purple-600 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            // Safety checks
            const academicTitle = verse.academic ? verse.academic.title : "Title Missing";
            const academicContentZh = verse.academic ? verse.academic.content_zh : "Content missing";
            const academicContentEn = verse.academic ? verse.academic.content_en : "Content missing";
            
            const devotionalTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devotionalContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devotionalContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-purple-50 to-white p-5 border-b border-purple-100">
                        <span class="inline-block px-2 py-0.5 bg-purple-100 text-purple-800 text-xs font-bold rounded mb-2 font-mono border border-purple-200">${verse.ref}</span>
                        <p class="text-slate-800 font-serif text-lg leading-relaxed group-hover:text-purple-900 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-slate-500 font-serif text-sm italic en-text border-l-2 border-purple-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-purple-100">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-500">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Exegesis</h4>
                            </div>
                            <h5 class="font-bold text-slate-700 mb-2">${academicTitle}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify mb-2">${academicContentZh}</p>
                            <p class="text-xs text-slate-400 font-serif italic en-text border-t border-slate-300 pt-2 mt-2">${academicContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-amber-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-amber-800 mb-2">${devotionalTitle}</h5>
                            <p class="text-sm text-amber-900/80 leading-relaxed text-justify mb-2">${devotionalContentZh}</p>
                            <p class="text-xs text-amber-700/70 font-serif italic en-text border-t border-amber-200 pt-2 mt-2">${devotionalContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-slate-800">解经方法论总结</h2>
                        <p class="text-slate-500 en-text">Summary of Exegetical Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-slate-500 text-4xl mb-4"><i class="fas fa-book-reader"></i></div>
                            <h3 class="text-xl font-bold text-slate-700 mb-2">权威/经文性解经 (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">Argument & Contrast</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-purple-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">比喻中的论证逻辑（Qal Wahomer）。神学术语分析（称义Justified）。角色对比（法利赛人vs税吏，富人vs小孩）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Argumentative logic in parables (Lesser to Greater). Theological terms (Justified). Character contrast.</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-purple-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">区分"功德"与"恩典"的运作模式。理解"神的国"对人心的要求（像小孩子）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Distinguish 'Merit' vs 'Grace'. Understand Kingdom's demand on the heart (childlikeness).</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-amber-500 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-amber-500 text-4xl mb-4"><i class="fas fa-pray"></i></div>
                            <h3 class="text-xl font-bold text-amber-800 mb-2">灵修/应用性解经 (Devotional)</h3>
                            <p class="text-xs text-amber-600/70 mb-6 uppercase tracking-wider">Humility & Dependence</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">在祷告中操练"恒切"（不灰心）。检查内心的骄傲（与人比较）。学习"放手"（放下拥有感）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Practice persistence in prayer. Check inner pride (comparison). Learn to 'let go' (possessiveness).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-amber-100 pt-3">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">不要停止祷告。不要自以为义。不要让财富阻挡你跟随主。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Don't stop praying. Don't be self-righteous. Don't let wealth hinder following.</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>