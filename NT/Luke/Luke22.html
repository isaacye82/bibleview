<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luke 22: The Covenant & The Cup | 路加福音第二十二章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Covenant Crimson - The Blood, Sacrifice, Love */
            --theme-primary: #9f1239; 
            /* Gethsemane Night - Darkness, Prayer, Struggle */
            --theme-dark: #1e1b4b;
            /* Broken Gold - The Body, Servant Leadership */
            --theme-accent: #b45309;
            /* Background */
            --theme-bg: #fff1f2;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #4a044e;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #fda4af; /* Rose 300 */
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px rgba(159, 18, 57, 0.15);
            border-left-color: var(--theme-primary);
        }

        .academic-box {
            background-color: #f8fafc; /* Slate 50 */
            border-left: 3px solid #64748b; /* Slate 500 */
            color: #334155;
        }
        
        .devotional-box {
            background-color: #fffbeb; /* Amber 50 */
            border-left: 3px solid #d97706; /* Amber 600 */
            color: #78350f;
        }

        /* Last Supper Animation */
        .table-scene {
            position: relative;
            height: 240px;
            background-color: #2a2a2a;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 4px solid #581c87;
        }

        .table-surface {
            width: 80%;
            height: 100px;
            background-color: #78350f;
            position: absolute;
            bottom: 40px;
            border-radius: 10px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            perspective: 500px;
        }

        .element {
            cursor: pointer;
            transition: transform 0.3s;
            position: relative;
        }
        .element:hover {
            transform: scale(1.1);
        }

        .bread {
            font-size: 3rem;
            color: #fbbf24;
            text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
        }
        .cup {
            font-size: 3rem;
            color: #ef4444;
            text-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
        }

        .covenant-text {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            color: #e5e7eb;
            font-size: 1rem;
            font-family: 'Playfair Display', serif;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .show-text {
            opacity: 1;
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 5px #fff; }
            to { text-shadow: 0 0 20px #fbbf24, 0 0 10px #ef4444; }
        }

        /* Sifting Wheat Animation */
        .sieve-container {
            width: 120px;
            height: 80px;
            border: 2px solid #a8a29e;
            border-radius: 5px;
            position: relative;
            background: repeating-linear-gradient(45deg, #a8a29e, #a8a29e 2px, transparent 2px, transparent 8px);
            margin: 0 auto;
        }

        .wheat-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background-color: #fbbf24;
            border-radius: 50%;
            top: 10px;
            left: 50%;
        }

        .sifting .sieve-container {
            animation: shake-sieve 0.2s infinite;
        }
        .sifting .wheat-particle {
            animation: fall-through 2s infinite;
        }

        @keyframes shake-sieve {
            0% { transform: translateX(-2px); }
            50% { transform: translateX(2px); }
            100% { transform: translateX(-2px); }
        }

        @keyframes fall-through {
            0% { top: 10px; opacity: 1; }
            80% { top: 150px; opacity: 1; }
            100% { top: 160px; opacity: 0; }
        }

        /* Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-rose-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-24 sm:h-20 items-center">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-rose-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-wine-glass-alt mr-2 text-rose-600"></i> 路加福音 22章</span>
                        <span class="text-xs text-rose-700 en-text font-normal ml-8">Luke Chapter 22</span>
                    </span>
                </div>
                <div class="flex space-x-4 sm:space-x-8 items-center overflow-x-auto no-scrollbar">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center shrink-0">
                        晚餐与客西马尼 <br><span class="text-[10px] uppercase opacity-70 en-text">Supper & Garden</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-rose-700 text-center shrink-0">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-rose-700 text-center shrink-0">
                        方法论总结 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-rose-200 mb-1">"不要成就我的意思，只要成就你的意思。"</p>
            <p class="text-sm italic text-slate-500 mb-2 en-text">"Not my will, but yours, be done."</p>
            <p class="text-xs opacity-70">路加福音第二十二章中英对照研经报告 | Covenant & Betrayal</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "新约的设立与人性的黑夜",
                title_en: "Institution of the New Covenant & The Night of Humanity",
                summary_zh: "路加福音第22章描述了耶稣受难前最后的时刻。本章充满了强烈的对比：耶稣设立圣餐的庄严与犹大出卖的诡诈；耶稣在客西马尼的顺服与门徒的沉睡；耶稣对彼得的挽回与彼得的跌倒。路加特别强调了耶稣作为'受苦仆人'的形象，以及祂在面临死亡时的祷告生活。这是一个关于立约、背叛、软弱与恩典的故事。",
                summary_en: "Luke 22 depicts the final moments before the Passion. It is full of sharp contrasts: the solemnity of the Last Supper vs. Judas' treachery; Jesus' submission in Gethsemane vs. the disciples' sleep; Jesus' restoration of Peter vs. Peter's fall. Luke emphasizes Jesus as the 'Suffering Servant' and His prayer life in the face of death. It is a story of covenant, betrayal, weakness, and grace.",
                concepts: [
                    { title: "约", title_en: "Covenant", greek: "Diathēkē", color: "text-rose-700", desc_zh: "耶稣用血设立的新关系，取代了西奈之约。是恩典的承诺。", desc_en: "New relationship established by blood, replacing Sinai. A promise of grace." },
                    { title: "记念", title_en: "Remembrance", greek: "Anamnēsis", color: "text-amber-600", desc_zh: "不仅是回忆过去，而是通过礼仪让过去在当下产生效力。", desc_en: "Not just mental recall, but making the past effective in the present via ritual." },
                    { title: "筛", title_en: "Sift", greek: "Siniazō", color: "text-slate-600", desc_zh: "像筛麦子一样震动。撒但试图通过试炼使门徒跌倒，失去信心。", desc_en: "To shake like grain. Satan's attempt to cause falling and loss of faith through trial." }
                ]
            },
            sections: [
                {
                    id: "supper",
                    title: "壹 · 最后的晚餐：新约的记号 (22:14-23)",
                    title_en: "The Last Supper: Sign of the New Covenant",
                    desc: "这是我的身体 | This is My Body",
                    verses: [
                        {
                            ref: "22:19-20",
                            text_zh: "又拿起饼来...说：'这是我的身体，为你们舍的...这杯是用我血所立的新约，是为你们流出来的。'",
                            text_en: "And he took bread... saying, 'This is my body, which is given for you... This cup that is poured out for you is the new covenant in my blood.'",
                            academic: {
                                title: "逾越节的转换 (Transformation of Passover)",
                                content_zh: "耶稣将古老的逾越节（纪念出埃及）转化为新约的圣餐。'身体为你们舍'（Substitution，代赎）和'用血立约'（Sacrifice，献祭）是核心神学。'新约'呼应了耶利米书31:31的预言。路加特别使用了'为你们'（Huper Hymon），强调了救赎的个人性和替代性。这不仅仅是一个仪式，而是神与人关系的根本性重构。",
                                content_en: "Jesus transforms Passover (Exodus memorial) into the Eucharist. 'Body given for you' (Substitution) and 'New Covenant in blood' (Sacrifice) are central. 'New Covenant' echoes Jer 31:31. Luke emphasizes 'for you' (Huper Hymon), highlighting the personal and substitutionary nature of redemption. It's a fundamental restructuring of the God-man relationship."
                            },
                            devotional: {
                                title: "为的是记念我 (Do This in Remembrance of Me)",
                                content_zh: "当我们在圣餐中拿起饼和杯时，我们不是在进行一项枯燥的宗教仪式，而是在'重演'历史上最伟大的爱。'记念'（Anamnesis）意味着让耶稣的牺牲在此时此刻对我的心再次变得真实。在这张桌子上，我们被提醒：虽然我们像门徒一样软弱甚至会背叛，但祂的约永不改变。",
                                content_en: "Communion isn't a dry ritual, but a 'reenactment' of the greatest Love. 'Remembrance' means making Jesus' sacrifice real to my heart right now. At this table, we are reminded: though we are weak and prone to betray like the disciples, His Covenant never changes."
                            }
                        }
                    ]
                },
                {
                    id: "greatness",
                    title: "贰 · 真正的为大：服事的倒置 (22:24-30)",
                    title_en: "True Greatness: Inversion of Service",
                    desc: "谁愿为首，就当服事人 | Leader as Servant",
                    verses: [
                        {
                            ref: "22:26-27",
                            text_zh: "但你们不可这样...因为谁为大？是坐席的呢？是服事人的呢？...然而，我在你们中间如同服事人的。",
                            text_en: "But not so with you... For who is the greater, one who reclines at table or one who serves?... But I am among you as the one who serves.",
                            academic: {
                                title: "恩主 (Benefactors) 的讽刺",
                                content_zh: "在希腊罗马文化中，掌权者被称为'恩主'（Euergetes），这是一种通过施惠来控制他人的权力展示。耶稣彻底颠覆了这种权力结构。在天国里，领袖不是'坐席'享受服事的人，而是'像侍者一样'（Diakonon）服事他人的人。耶稣自己就是最高榜样。这种'仆人式领导'（Servant Leadership）是教会治理的基石。",
                                content_en: "Greco-Roman rulers were called 'Benefactors' (Euergetes), asserting power via patronage. Jesus inverts this structure. In the Kingdom, leaders aren't those 'reclining' (being served) but those 'serving' (Diakonon). Jesus is the prime example. This 'Servant Leadership' is the cornerstone of church governance."
                            },
                            devotional: {
                                title: "你是在做恩主还是做仆人？(Benefactor or Servant?)",
                                content_zh: "我们很多时候想要'服事'，其实是想要'掌权'，想要被人称为'恩主'（让人觉得欠我们人情）。但耶稣说：'不可这样'。真正的服事是不求回报、不求地位、甚至不被人注意的。当你弯下腰去洗脚时，你就离耶稣最近。",
                                content_en: "We often 'serve' to gain power or be called 'Benefactor' (making others indebted). Jesus says: 'Not so.' True service is unrequited, seeking no status, often unnoticed. You are closest to Jesus when you bend down to wash feet."
                            }
                        }
                    ]
                },
                {
                    id: "peter",
                    title: "叁 · 彼得的跌倒与代求 (22:31-34)",
                    title_en: "Peter's Fall & Intercession",
                    desc: "筛麦子与回头 | Sifting Wheat & Turning Back",
                    verses: [
                        {
                            ref: "22:31-32",
                            text_zh: "西门！西门！撒但想要得着你们，好筛你们像筛麦子一样；但我已经为你祈求，叫你不至于失了信心...",
                            text_en: "Simon, Simon, behold, Satan demanded to have you, that he might sift you like wheat, but I have prayed for you that your faith may not fail...",
                            academic: {
                                title: "代求的神学 (Theology of Intercession)",
                                content_zh: "撒但的攻击需要神的许可（类似约伯记）。'筛'（Sift）是为了将人震散，显出其无价值（糠皮）。但耶稣的代求是彼得得胜的关键。这里有一个惊人的神学：耶稣并没有祈求彼得'不跌倒'（祂预言了彼得会跌倒），而是祈求他'不失了信心'（Total apostasy）。'回头'（Epistrepsas）意味着悔改后的恢复，这成为了彼得坚固弟兄的资格。",
                                content_en: "Satan needs permission to attack (like Job). 'Sifting' aims to scatter and reveal worthlessness (chaff). Jesus' intercession is key. Surprisingly, Jesus didn't pray Peter 'wouldn't fall' (He predicted it), but that his 'faith wouldn't fail' (total apostasy). 'Turn back' implies restoration after repentance, qualifying Peter to strengthen others."
                            },
                            devotional: {
                                title: "失败不是终局 (Failure is Not the End)",
                                content_zh: "我们都会经历被'筛'的时刻——环境的压力、诱惑的摇动，甚至惨痛的跌倒。但请记住，在大祭司耶稣的祷告名单上，有你的名字。祂允许你跌倒，是为了筛去你的骄傲（糠皮），但祂的祷告托住了你的信心（麦子）。当你失败时，不要绝望，因为主在为你祈求。你要回头，去帮助其他软弱的人。",
                                content_en: "We all get 'sifted'—pressures, temptations, failures. Remember, your name is on Jesus' prayer list. He allows the fall to sift out pride (chaff), but His prayer sustains your faith (wheat). Don't despair in failure; the Lord intercedes. Turn back, and strengthen others."
                            }
                        }
                    ]
                },
                {
                    id: "gethsemane",
                    title: "肆 · 客西马尼：顺服的极痛 (22:39-46)",
                    title_en: "Gethsemane: Agony of Submission",
                    desc: "汗如大血点 | Sweat Like Blood",
                    verses: [
                        {
                            ref: "22:42, 44",
                            text_zh: "...不要成就我的意思，只要成就你的意思。耶稣极其伤痛，祷告更加恳切，汗珠如大血点滴在地上。",
                            text_en: "...not my will, but yours, be done. And being in an agony he prayed more earnestly; and his sweat became like great drops of blood falling down to the ground.",
                            academic: {
                                title: "两个意志的挣扎 (Struggle of Two Wills)",
                                content_zh: "这是耶稣人性的真实写照。面对即将到来的'杯'（不仅是死亡，更是神对罪的忿怒），耶稣的人性意愿（My will）本能地退缩。但祂通过极度痛苦的祷告（Agonia，原指运动员的拼搏），将自己的意志顺服在父的意志之下。'汗如大血点'（Hematidrosis）是极度精神压力下的生理现象。这是第二次亚当在园子里的得胜，扭转了第一次亚当在伊甸园的失败。",
                                content_en: "A portrayal of Jesus' humanity. Facing the 'Cup' (God's wrath on sin), His human will recoiled. Through 'Agony' (struggle), He subordinated His will to the Father's. 'Sweat like blood' (Hematidrosis) indicates extreme stress. This is the Second Adam's victory in a garden, reversing the First Adam's failure in Eden."
                            },
                            devotional: {
                                title: "不仅是接受，更是降服 (Surrender, Not Just Acceptance)",
                                content_zh: "我们常以为顺服就是无奈地接受命运。但耶稣的顺服是一场'战斗'。在'我的意思'和'神的意思'之间，有一场生与死的搏斗。你现在面临什么苦杯吗？不要压抑你的挣扎，把它带到父面前，像耶稣一样诚实地祈求，直到你能从心里说：'愿你的旨意成就。' 那是力量的源头。",
                                content_en: "We mistake surrender for passive resignation. Jesus' submission was a 'battle'. Between 'My Will' and 'God's Will' lies a fight. Facing a bitter cup? Don't suppress the struggle; bring it to the Father until you can truly say, 'Thy will be done.' That is the source of strength."
                            }
                        }
                    ]
                },
                {
                    id: "denial",
                    title: "伍 · 彼得的否认：主转过身看他 (22:54-62)",
                    title_en: "Peter's Denial: The Lord Turned and Looked",
                    desc: "鸡叫与痛哭 | Rooster & Weeping",
                    verses: [
                        {
                            ref: "22:61-62",
                            text_zh: "主转过身来看彼得，彼得便想起主对他所说的话...他就出去痛哭。",
                            text_en: "And the Lord turned and looked at Peter. And Peter remembered the saying of the Lord... And he went out and wept bitterly.",
                            academic: {
                                title: "无言的注视 (The Silent Gaze)",
                                content_zh: "路加独家记载了这一细节：'主转过身来看彼得'。这一眼胜过千言万语。这不仅是责备，更是恩典的唤醒。彼得的失败在于'远不远地跟着'（22:54）和自信。鸡叫不仅是预言的应验，更是唤醒良心的号角。彼得的'痛哭'（Bitterly wept）标志着真正的悔改，这与犹大的绝望（太27:5）形成了鲜明对比。",
                                content_en: "Luke alone records 'The Lord turned and looked'. This gaze spoke volumes—rebuke mixed with awakening grace. Peter failed by 'following at a distance' and self-confidence. The rooster was a conscience alarm. Peter's 'bitter weeping' marks true repentance, contrasting sharply with Judas' despair."
                            },
                            devotional: {
                                title: "在主的眼光中悔改 (Repentance in His Sight)",
                                content_zh: "当我们犯罪跌倒时，我们也需要'看见'主在看我们。那不是定罪的眼光（定罪让人逃跑），那是以此唤醒我们、让我们心碎的慈爱眼光。如果你正在罪中挣扎或已经跌倒，不要躲避主的眼目。让祂的目光以此刺透你的心，带出悔改的眼泪。眼泪是灵魂的洗澡水。",
                                content_en: "When we fall, we need to 'see' the Lord looking at us. Not a gaze of condemnation (which drives us away), but a heartbreaking look of love. If you are struggling, don't hide. Let His gaze pierce your heart and bring tears of repentance. Tears are the soul's bath."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all',
            showBread: false,
            showCup: false,
            sifting: false
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-slate-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-slate-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Interactive Functions ---
        function toggleElement(type) {
            const text = document.getElementById('covenant-text');
            if (type === 'bread') {
                appState.showBread = true;
                text.innerText = "这是我的身体，为你们舍的 (This is My Body)";
                text.classList.add('show-text');
            } else if (type === 'cup') {
                appState.showCup = true;
                text.innerText = "这是用我血所立的新约 (New Covenant in My Blood)";
                text.classList.add('show-text');
            }
            
            // Auto hide text after delay
            setTimeout(() => {
                text.classList.remove('show-text');
            }, 3000);
        }

        function startSifting() {
            const sieve = document.getElementById('sieve-box');
            const btn = document.getElementById('sift-btn');
            
            if (!appState.sifting) {
                appState.sifting = true;
                sieve.classList.add('sifting');
                btn.innerText = "停止筛动 (Stop Sifting)";
                btn.className = "w-full py-2 bg-slate-600 hover:bg-slate-700 rounded text-white font-bold transition";
            } else {
                appState.sifting = false;
                sieve.classList.remove('sifting');
                btn.innerText = "撒但要筛你们 (Satan demands to sift)";
                btn.className = "w-full py-2 bg-rose-700 hover:bg-rose-800 rounded text-white font-bold transition shadow-md";
            }
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-rose-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-rose-100 text-rose-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Passion</span>
                            <h2 class="text-3xl font-bold serif text-rose-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-slate-400 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-slate-600 leading-relaxed mb-4 text-lg border-l-4 border-rose-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-slate-500 leading-relaxed text-sm italic en-text border-l-4 border-slate-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col items-center text-center transition hover:bg-rose-50 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-slate-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-slate-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-slate-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-slate-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: The Last Supper Table -->
                    <div class="lg:col-span-4 bg-slate-900 p-6 rounded-xl shadow-lg flex flex-col border border-rose-900 relative overflow-hidden">
                         <h3 class="text-xl font-bold mb-1 text-center text-rose-200">最后的晚餐</h3>
                         <p class="text-xs text-slate-400 mb-4 text-center en-text uppercase tracking-widest">Interactive Table</p>
                         
                         <div class="table-scene mb-4">
                            <div class="covenant-text" id="covenant-text"></div>
                            <div class="table-surface">
                                <div class="element bread" onclick="toggleElement('bread')"><i class="fas fa-bread-slice"></i></div>
                                <div class="element cup" onclick="toggleElement('cup')"><i class="fas fa-wine-glass"></i></div>
                            </div>
                         </div>
                         
                         <p class="text-center text-xs text-slate-500 mb-2 italic">点击饼或杯查看含义 (Click Bread or Cup)</p>
                    </div>
                </div>

                <!-- Feature: Sifting Wheat -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-rose-100">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-slate-700">
                            <i class="fas fa-wind text-rose-600 mr-2"></i> 彼得的筛子
                            <span class="text-sm font-normal text-slate-400 ml-2 en-text">Sifting like Wheat</span>
                        </h3>
                        <span class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded">Luke 22:31</span>
                    </div>
                    
                    <div class="flex flex-col items-center">
                        <div id="sieve-box" class="sieve-container mb-4">
                            ${Array(10).fill(0).map((_, i) => `<div class="wheat-particle" style="left:${Math.random()*80+10}%; animation-delay:${Math.random()}s"></div>`).join('')}
                        </div>
                        
                        <div class="text-center mb-4">
                            <p class="text-sm font-bold text-slate-700">但耶稣说："我已经为你祈求"</p>
                            <p class="text-xs text-slate-500 italic en-text">"But I have prayed for you"</p>
                        </div>
                        
                        <button id="sift-btn" onclick="startSifting()" class="w-full py-2 bg-rose-700 hover:bg-rose-800 rounded text-white font-bold transition shadow-md">
                            撒但要筛你们 (Satan demands to sift)
                        </button>
                    </div>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#fff1f2]/95 backdrop-blur py-4 mb-6 border-b border-rose-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-rose-900 serif">逐节研读室 <span class="text-base font-normal text-slate-400 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-rose-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-rose-800 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">全部 All</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">经文含义 Exegesis</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-amber-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">灵修应用 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-rose-800">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-sm text-rose-800 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            // Safety checks
            const academicTitle = verse.academic ? verse.academic.title : "Title Missing";
            const academicContentZh = verse.academic ? verse.academic.content_zh : "Content missing";
            const academicContentEn = verse.academic ? verse.academic.content_en : "Content missing";
            
            const devotionalTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devotionalContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devotionalContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-rose-50 to-white p-5 border-b border-rose-100">
                        <span class="inline-block px-2 py-0.5 bg-rose-100 text-rose-800 text-xs font-bold rounded mb-2 font-mono border border-rose-200">${verse.ref}</span>
                        <p class="text-slate-800 font-serif text-lg leading-relaxed group-hover:text-rose-900 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-slate-500 font-serif text-sm italic en-text border-l-2 border-rose-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-rose-100">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-500">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Exegesis</h4>
                            </div>
                            <h5 class="font-bold text-slate-700 mb-2">${academicTitle}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify mb-2">${academicContentZh}</p>
                            <p class="text-xs text-slate-400 font-serif italic en-text border-t border-slate-300 pt-2 mt-2">${academicContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-amber-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-amber-800 mb-2">${devotionalTitle}</h5>
                            <p class="text-sm text-amber-900/80 leading-relaxed text-justify mb-2">${devotionalContentZh}</p>
                            <p class="text-xs text-amber-700/70 font-serif italic en-text border-t border-amber-200 pt-2 mt-2">${devotionalContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-slate-800">解经方法论总结</h2>
                        <p class="text-slate-500 en-text">Summary of Exegetical Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-slate-500 text-4xl mb-4"><i class="fas fa-book-reader"></i></div>
                            <h3 class="text-xl font-bold text-slate-700 mb-2">权威/经文性解经 (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">Historical & Theological</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-rose-800 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">礼仪背景研究（逾越节vs圣餐）。词源分析（Agony, Sift）。社会背景（恩主Euergetes）。对比修辞（彼得vs犹大）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Liturgical context (Passover). Etymology. Social context (Benefactors). Comparative rhetoric.</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-rose-800 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">理解受难叙事中的"替代性"救赎。分辨属世权力与属天事奉的区别。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Understand 'Substitutionary' redemption. Distinguish worldly power vs heavenly service.</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-amber-500 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-amber-500 text-4xl mb-4"><i class="fas fa-pray"></i></div>
                            <h3 class="text-xl font-bold text-amber-800 mb-2">灵修/应用性解经 (Devotional)</h3>
                            <p class="text-xs text-amber-600/70 mb-6 uppercase tracking-wider">Surrender & Restoration</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">将意志降服于神（客西马尼）。在失败中寻找恩典（彼得）。在事奉中学习谦卑（不是恩主）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Surrender will (Gethsemane). Find grace in failure (Peter). Humility in service (Not Benefactor).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-amber-100 pt-3">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">把挣扎带到祷告中。在跌倒后仰望主的祈求。以记念主的心领受圣餐。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Bring struggle to prayer. Look to His intercession after falling. Remember Him in Communion.</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>