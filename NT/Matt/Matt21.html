<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matthew 21: The King's Entry & Judgment | 马太福音第二十一章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Palm Green - Hosanna, Triumphal Entry, Life (initially) */
            --theme-primary: #15803d; 
            /* Withered Brown - Judgment, Hypocrisy, No Fruit */
            --theme-accent: #a16207;
            /* Cornerstone Grey - The Foundation, Rejection */
            --theme-stone: #475569;
            /* Background */
            --theme-bg: #f0fdf4;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #14532d;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #bbf7d0; /* Green 200 */
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px rgba(21, 128, 61, 0.15);
            border-left-color: var(--theme-primary);
        }

        .academic-box {
            background-color: #f8fafc; /* Slate 50 */
            border-left: 3px solid #64748b; /* Slate 500 */
            color: #334155;
        }
        
        .devotional-box {
            background-color: #fffbeb; /* Amber 50 */
            border-left: 3px solid #d97706; /* Amber 600 */
            color: #78350f;
        }

        /* Fig Tree Animation */
        .tree-container {
            position: relative;
            height: 220px;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            background: linear-gradient(to bottom, #ecfccb 0%, #dcfce7 100%);
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid #86efac;
        }

        .tree-trunk {
            width: 20px;
            height: 100px;
            background-color: #5d4037;
            position: relative;
            transition: background-color 2s ease;
        }

        .tree-leaves {
            position: absolute;
            bottom: 80px;
            width: 120px;
            height: 120px;
            background-color: #15803d; /* Green */
            border-radius: 50%;
            transition: all 2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .leaf-detail {
            font-size: 0.8rem;
            color: rgba(255,255,255,0.8);
            opacity: 1;
            transition: opacity 1s;
        }

        .fruit {
            position: absolute;
            width: 12px;
            height: 12px;
            background-color: #7e22ce; /* Fig purple */
            border-radius: 50%;
            opacity: 0; /* No fruit initially */
        }

        /* Withered State */
        .withered .tree-leaves {
            background-color: #a16207; /* Brown */
            transform: scale(0.8) rotate(10deg);
            box-shadow: none;
        }
        .withered .tree-trunk {
            background-color: #3e2723;
        }
        .withered .leaf-detail {
            opacity: 0;
        }

        /* Palm Branch Icon */
        .palm-icon {
            color: #15803d;
            animation: wave 2s ease-in-out infinite;
            transform-origin: bottom center;
        }

        @keyframes wave {
            0% { transform: rotate(-10deg); }
            50% { transform: rotate(10deg); }
            100% { transform: rotate(-10deg); }
        }

        /* Cornerstone Visual */
        .stone-wall {
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            gap: 2px;
        }
        .stone-row {
            display: flex;
            gap: 2px;
        }
        .stone {
            width: 40px;
            height: 20px;
            background-color: #cbd5e1;
            border-radius: 2px;
        }
        .cornerstone {
            width: 60px;
            height: 30px;
            background-color: #475569;
            color: white;
            font-size: 0.6rem;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(71, 85, 105, 0.5);
        }

        /* Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-green-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-24 sm:h-20 items-center">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-green-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-leaf mr-2 text-green-600"></i> 马太福音 21章</span>
                        <span class="text-xs text-green-700 en-text font-normal ml-8">Matthew Chapter 21</span>
                    </span>
                </div>
                <div class="flex space-x-4 sm:space-x-8 items-center overflow-x-auto no-scrollbar">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center shrink-0">
                        进京与审判 <br><span class="text-[10px] uppercase opacity-70 en-text">Entry & Judgment</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-green-700 text-center shrink-0">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-green-700 text-center shrink-0">
                        方法论总结 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-green-200 mb-1">"匠人所弃的石头已作了房角的头块石头"</p>
            <p class="text-sm italic text-slate-500 mb-2 en-text">"The stone that the builders rejected has become the cornerstone."</p>
            <p class="text-xs opacity-70">马太福音第二十一章中英对照研经报告 | Authority & Fruitfulness</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "君王的来临与权柄的转移",
                title_en: "Arrival of the King & Transfer of Authority",
                summary_zh: "马太福音第21章是受难周的开始。耶稣以君王的姿态骑驴进京，应验了撒迦利亚的预言，但在圣殿中，祂却像审判者一样推倒了兑换银钱的桌子。本章充满了关于'权柄'的冲突。耶稣通过咒诅无花果树和一系列比喻（两个儿子、凶恶园户），宣告了旧犹太教体系（有叶无果）的审判，并将天国的权柄转移给'那能结果子的百姓'。",
                summary_en: "Matthew 21 begins the Passion Week. Jesus enters Jerusalem as King, fulfilling Zechariah, but acts as Judge in the Temple, overturning tables. The chapter is rife with conflict over 'Authority'. Through cursing the fig tree and a series of parables (Two Sons, Wicked Tenants), Jesus pronounces judgment on the old Jewish system (leaves without fruit) and transfers Kingdom authority to 'a people producing its fruits'.",
                concepts: [
                    { title: "和散那", title_en: "Hosanna", greek: "Hōsanna", color: "text-green-600", desc_zh: "希伯来语'求你拯救'。在此处既是呼求也是赞美，承认耶稣是弥赛亚。", desc_en: "Hebrew 'Save now'. Here, both a cry for help and praise, acknowledging Jesus as Messiah." },
                    { title: "房角石", title_en: "Cornerstone", greek: "Kephalē Gōnias", color: "text-slate-600", desc_zh: "建筑中最重要的基石，决定墙的方向。被弃者成为根基。", desc_en: "Most important stone determining the wall's direction. The Rejected One becomes the Foundation." },
                    { title: "果子", title_en: "Fruit", greek: "Karpos", color: "text-amber-700", desc_zh: "内在生命的可见证据。本章的核心审判标准。", desc_en: "Visible evidence of inner life. The core criterion of judgment in this chapter." }
                ]
            },
            sections: [
                {
                    id: "entry",
                    title: "壹 · 凯旋进京：温柔的君王 (21:1-11)",
                    title_en: "Triumphal Entry: The Gentle King",
                    desc: "驴驹与棕树枝 | Donkey & Palm Branches",
                    verses: [
                        {
                            ref: "21:4-5, 9",
                            text_zh: "这事成就，是要应验先知的话...你的王来到你这里是温柔的，又骑着驴...和散那归于大卫的子孙！",
                            text_en: "This took place to fulfill what was spoken by the prophet... behold, your king is coming to you, humble, and mounted on a donkey... Hosanna to the Son of David!",
                            academic: {
                                title: "反征服者的形象 (Anti-Conqueror Image)",
                                content_zh: "罗马将军骑战马进城象征战争与征服；耶稣骑驴驹（和平的牲畜）进城，应验了撒迦利亚书9:9。这是对'弥赛亚是军事领袖'这一民族主义期待的刻意修正。祂是温柔（Praus）的王。群众喊着诗篇118篇（修殿节/逾越节颂歌），虽然此时他们热烈欢迎，但许多人其实误解了祂的使命，这也是几天后他们喊'钉死他'的原因。",
                                content_en: "Roman generals rode warhorses; Jesus rode a donkey (peace animal), fulfilling Zech 9:9. This deliberately corrects the nationalist expectation of a Military Messiah. He is the Gentle (Praus) King. Crowds chanted Psalm 118, but their enthusiasm was based on misunderstanding, explaining why they shouted 'Crucify him' days later."
                            },
                            devotional: {
                                title: "你想要什么样的王？(What Kind of King Do You Want?)",
                                content_zh: "当耶稣进入你的生活时，你期待祂像一位强大的将军替你解决所有麻烦，还是像一位温柔的王骑着驴驹来掌管你的心？如果耶稣没有按你的方式行事（比如没有推翻你生活中的'罗马政权'），你会失望吗？真正的敬拜是欢迎祂按'祂的方式'做王，而不是按'我们的期待'做王。",
                                content_en: "When Jesus enters your life, do you expect a General to fix your problems, or a Gentle King to rule your heart? If He doesn't act as you wish (overthrowing your 'Romans'), will you be disappointed? True worship welcomes Him to rule in 'His way', not 'our way'."
                            }
                        }
                    ]
                },
                {
                    id: "temple",
                    title: "贰 · 洁净圣殿：祷告的殿 (21:12-17)",
                    title_en: "Cleansing the Temple: House of Prayer",
                    desc: "贼窝与医治之地 | Den of Robbers vs Place of Healing",
                    verses: [
                        {
                            ref: "21:13-14",
                            text_zh: "...'我的殿必称为祷告的殿'，你们倒使它成为贼窝了！在殿里有瞎子、瘸子到耶稣跟前，他就治好了他们。",
                            text_en: "...'My house shall be called a house of prayer,' but you make it a den of robbers. And the blind and the lame came to him in the temple, and he healed them.",
                            academic: {
                                title: "耶利米书的审判与以赛亚书的应许",
                                content_zh: "耶稣引用的'贼窝'来自耶利米书7:11，指犹太人把圣殿当作犯罪后的避难所，以为有了圣殿就安全了，却不悔改。洁净圣殿不仅是清理商业，更是宣告审判。紧接着，瞎子瘸子在殿里得医治（大卫曾禁止他们入殿，撒下5:8），这象征着耶稣恢复了圣殿的真正功能——不仅是祷告，更是慈爱与医治的中心。",
                                content_en: "Jesus quotes Jer 7:11 ('Den of Robbers'), condemning Jews who used the Temple as a safe hideout for sin without repentance. Cleansing is judgment. Immediately, blind/lame are healed (formerly barred by David, 2 Sam 5:8), symbolizing Jesus restoring the Temple's true function: a center of mercy and healing, not just ritual."
                            },
                            devotional: {
                                title: "你的心是贼窝还是祷告殿？(Den or House of Prayer?)",
                                content_zh: "我们的身体就是圣灵的殿。看看你的内心，里面充满了什么？是像兑换银钱的桌子一样充满了世俗的焦虑和交易，还是充满了祷告和与神的交通？有时，耶稣需要推翻我们心中的桌子，赶出那些杂乱的思虑，好让这殿重新成为祷告的地方，让软弱的部分（瞎子瘸子）得医治。",
                                content_en: "Our body is the Temple. Look inside: is it full of tables of transaction and anxiety, or prayer and communion? Sometimes Jesus needs to overturn tables in our hearts, driving out distractions, so we can be a House of Prayer where our broken parts (blind/lame) get healed."
                            }
                        }
                    ]
                },
                {
                    id: "fig-tree",
                    title: "叁 · 无花果树：有叶无果的审判 (21:18-22)",
                    title_en: "The Fig Tree: Judgment on Fruitlessness",
                    desc: "虚伪的宗教 | Hypocritical Religion",
                    verses: [
                        {
                            ref: "21:19",
                            text_zh: "...看见一棵无花果树，就走到跟前，在树上找不着什么，不过是叶子，就对树说：'从今以后，你永不结果子！'...",
                            text_en: "...Seeing a fig tree... he went to it and found nothing on it but only leaves. And he said to it, 'May no fruit ever come from you again!'...",
                            academic: {
                                title: "行动化的比喻 (Acted Parable)",
                                content_zh: "这不仅仅是因为耶稣饿了发脾气。这是一次先知性的行动。在旧约中，无花果树常象征以色列。这棵树'只有叶子'（茂盛的宗教仪式、圣殿敬拜），却'找不着果子'（公义、怜悯、信实）。耶稣的咒诅是对当时虚伪犹太教体系的审判宣告：因为它不结果子，它将枯干并被废弃。这也是对今日教会的严厉警告。",
                                content_en: "Not a temper tantrum due to hunger, but a Prophetic Action. The Fig Tree symbolizes Israel (OT). 'Leaves only' = lush rituals/Temple worship; 'No fruit' = lack of justice/mercy. The curse pronounces judgment on the hypocritical religious system: because it is fruitless, it will wither and be discarded. A warning to the Church today."
                            },
                            devotional: {
                                title: "你是只有叶子吗？(Only Leaves?)",
                                content_zh: "我们可以拥有很茂盛的'叶子'：按时聚会、熟读圣经、甚至在教会服事。但当主靠近我们寻找'果子'（圣灵的果子：爱、喜乐、忍耐...）时，祂能找到吗？'有叶无果'是属灵生命中最危险的状态，因为它给人一种活着的假象。求主修剪我们，让我们不仅看起来像基督徒，更活出基督的生命。",
                                content_en: "We can have lush 'leaves': attendance, Bible knowledge, service. But when the Lord looks for 'fruit' (Spirit's fruit: love, joy...), does He find any? 'Leaves without fruit' is a dangerous state, offering an illusion of life. Ask God to prune us, that we may not just look like Christians, but live out Christ's life."
                            }
                        }
                    ]
                },
                {
                    id: "tenants",
                    title: "肆 · 凶恶园户：权柄的转移 (21:33-46)",
                    title_en: "Wicked Tenants: Transfer of Authority",
                    desc: "被弃的石头成为房角石 | Rejected Stone as Cornerstone",
                    verses: [
                        {
                            ref: "21:42-43",
                            text_zh: "...'匠人所弃的石头已作了房角的头块石头'......神的国必从你们夺去，赐给那能结果子的百姓。",
                            text_en: "...'The stone that the builders rejected has become the cornerstone'... the kingdom of God will be taken away from you and given to a people producing its fruits.",
                            academic: {
                                title: "救恩历史的转折点 (Turning Point of Salvation History)",
                                content_zh: "这个比喻概括了以色列的历史：神（家主）差遣先知（仆人）收果子，却被以色列领袖（园户）逼迫杀害。最后差遣儿子，也被杀（预言十字架）。结论是惊人的：'神的国必从你们夺去'。这宣告了旧约神权政治的终结，新约教会（'那能结果子的百姓'，包含犹太人和外邦人）将取代腐败的祭司体系。'房角石'（引用诗篇118）成为了新的建造根基。",
                                content_en: "Summarizes Israel's history: God (Owner) sent prophets (servants), Israel's leaders (tenants) killed them. Finally, the Son is sent and killed (Cross). The conclusion is shocking: 'Kingdom taken from you'. This announces the end of the corrupt theocracy and the rise of the Church ('people producing fruits'). The 'Cornerstone' (Ps 118) becomes the new foundation."
                            },
                            devotional: {
                                title: "你是好管家吗？(Are You a Good Tenant?)",
                                content_zh: "我们都是神葡萄园里的'租户'（管家），生命、恩赐、机会都是神租借给我们的。神期待在适当的时候收'果子'。我们是否像那些恶园户一样，想要霸占葡萄园（把生命据为己有），甚至拒绝神派来的使者（圣灵的感动、神的话语）？所有权属于神，我们必须交账。",
                                content_en: "We are 'tenants' (stewards). Life, gifts, opportunities are leased from God. He expects 'fruit'. Do we act like wicked tenants, trying to seize ownership (living for self), rejecting His messengers (Spirit's conviction)? Ownership belongs to God; we must give an account."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all',
            treeState: 'leafy' // leafy, withered
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-slate-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-slate-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Interactive Functions ---
        function inspectTree() {
            const tree = document.getElementById('fig-tree-vis');
            const status = document.getElementById('tree-status');
            const btn = document.getElementById('inspect-btn');
            
            if (appState.treeState === 'leafy') {
                // Try to find fruit -> Fail -> Wither
                status.innerHTML = "<span class='text-amber-600'>寻找果子... 没有果子！(Searching... No Fruit!)</span>";
                btn.disabled = true;
                
                setTimeout(() => {
                    tree.classList.add('withered');
                    status.innerHTML = "<span class='text-stone-600 font-bold'>树枯干了！(The tree withered!) - 审判虚伪</span>";
                    appState.treeState = 'withered';
                    btn.innerHTML = '<i class="fas fa-redo mr-2"></i> 重置 (Reset)';
                    btn.disabled = false;
                    btn.classList.replace('bg-green-600', 'bg-stone-600');
                }, 1000);
            } else {
                // Reset
                tree.classList.remove('withered');
                appState.treeState = 'leafy';
                status.innerHTML = "看起来很茂盛... (Looks leafy...)";
                btn.innerHTML = '<i class="fas fa-search mr-2"></i> 寻找果子 (Inspect for Fruit)';
                btn.classList.replace('bg-stone-600', 'bg-green-600');
            }
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-green-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-green-100 text-green-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Passion Week</span>
                            <h2 class="text-3xl font-bold serif text-green-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-slate-400 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-slate-600 leading-relaxed mb-4 text-lg border-l-4 border-green-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-slate-500 leading-relaxed text-sm italic en-text border-l-4 border-slate-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col items-center text-center transition hover:bg-green-50 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-slate-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-slate-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-slate-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-slate-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: The Fig Tree Simulator -->
                    <div class="lg:col-span-4 bg-white p-6 rounded-xl shadow-lg flex flex-col border border-green-200">
                         <h3 class="text-xl font-bold mb-1 text-center text-green-900">无花果树模拟器</h3>
                         <p class="text-xs text-slate-400 mb-4 text-center en-text uppercase tracking-widest">Fig Tree & Judgment</p>
                         
                         <div id="fig-tree-vis" class="tree-container mb-4">
                            <div class="tree-trunk"></div>
                            <div class="tree-leaves">
                                <span class="leaf-detail text-center">茂盛的叶子<br><span class="text-[10px] italic">Only Leaves</span></span>
                            </div>
                         </div>
                         
                         <p id="tree-status" class="text-center text-sm text-slate-500 mb-4 h-6">看起来很茂盛... (Looks leafy...)</p>

                         <button id="inspect-btn" onclick="inspectTree()" class="w-full py-2 bg-green-600 hover:bg-green-700 rounded text-white font-bold transition shadow-md">
                             <i class="fas fa-search mr-2"></i> 寻找果子 (Inspect for Fruit)
                         </button>
                    </div>
                </div>

                <!-- Feature: The Cornerstone & Authority Flow -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                    <!-- Triumphal Entry -->
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-green-100">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-bold text-slate-700"><i class="fas fa-crown text-green-600 mr-2"></i> 温柔的君王</h3>
                            <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Matt 21:5</span>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="text-4xl text-green-600 palm-icon"><i class="fas fa-leaf"></i></div>
                            <div>
                                <h4 class="font-bold text-slate-800 text-sm">反转的凯旋 (Inverted Triumph)</h4>
                                <p class="text-xs text-slate-500 mt-1">不是战马，而是驴驹。<br>不是武力，而是谦卑。</p>
                            </div>
                        </div>
                        <p class="mt-4 text-center text-xl font-serif text-green-800 italic">"Hosanna!"</p>
                    </div>

                    <!-- The Cornerstone -->
                    <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-600 text-white">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-bold text-slate-200"><i class="fas fa-cubes mr-2"></i> 房角石</h3>
                            <span class="text-xs bg-slate-600 text-slate-300 px-2 py-1 rounded">Matt 21:42</span>
                        </div>
                        
                        <div class="flex justify-center mb-4">
                            <div class="stone-wall">
                                <div class="stone-row">
                                    <div class="stone"></div><div class="stone"></div><div class="stone"></div>
                                </div>
                                <div class="stone-row">
                                    <div class="stone"></div><div class="stone"></div>
                                </div>
                                <div class="cornerstone text-center">JESUS<br>Cornerstone</div>
                            </div>
                        </div>
                        
                        <p class="text-xs text-center text-slate-400">
                            "跌在这石头上的，必要跌碎；这石头掉在谁的身上，就要把谁砸得稀烂。" (v44)
                        </p>
                    </div>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#f0fdf4]/95 backdrop-blur py-4 mb-6 border-b border-green-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-green-900 serif">逐节研读室 <span class="text-base font-normal text-slate-400 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-green-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-green-700 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">全部 All</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">经文含义 Exegesis</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-amber-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">灵修应用 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-green-600">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-sm text-green-600 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            // Safety checks
            const academicTitle = verse.academic ? verse.academic.title : "Title Missing";
            const academicContentZh = verse.academic ? verse.academic.content_zh : "Content missing";
            const academicContentEn = verse.academic ? verse.academic.content_en : "Content missing";
            
            const devotionalTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devotionalContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devotionalContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-green-50 to-white p-5 border-b border-green-100">
                        <span class="inline-block px-2 py-0.5 bg-green-100 text-green-800 text-xs font-bold rounded mb-2 font-mono border border-green-200">${verse.ref}</span>
                        <p class="text-slate-800 font-serif text-lg leading-relaxed group-hover:text-green-900 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-slate-500 font-serif text-sm italic en-text border-l-2 border-green-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-green-100">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-500">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Exegesis</h4>
                            </div>
                            <h5 class="font-bold text-slate-700 mb-2">${academicTitle}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify mb-2">${academicContentZh}</p>
                            <p class="text-xs text-slate-400 font-serif italic en-text border-t border-slate-300 pt-2 mt-2">${academicContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-amber-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-amber-800 mb-2">${devotionalTitle}</h5>
                            <p class="text-sm text-amber-900/80 leading-relaxed text-justify mb-2">${devotionalContentZh}</p>
                            <p class="text-xs text-amber-700/70 font-serif italic en-text border-t border-amber-200 pt-2 mt-2">${devotionalContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-slate-800">解经方法论总结</h2>
                        <p class="text-slate-500 en-text">Summary of Exegetical Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-slate-500 text-4xl mb-4"><i class="fas fa-book-reader"></i></div>
                            <h3 class="text-xl font-bold text-slate-700 mb-2">权威/经文性解经 (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">Symbolic & Prophetic</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-green-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">行动化比喻解析（无花果树、洁净圣殿）。旧约预言应验（亚9:9，耶7:11）。救恩历史阶段分析（权柄从犹太领袖转移到教会）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Acted parable analysis. OT prophecy fulfillment. Salvation history analysis (authority transfer).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-green-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">理解审判是针对"虚伪"和"无果子"，而非针对软弱。确立以基督为房角石的信仰根基。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Understand judgment targets hypocrisy/fruitlessness. Establish faith on Christ the Cornerstone.</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-amber-500 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-amber-500 text-4xl mb-4"><i class="fas fa-pray"></i></div>
                            <h3 class="text-xl font-bold text-amber-800 mb-2">灵修/应用性解经 (Devotional)</h3>
                            <p class="text-xs text-amber-600/70 mb-6 uppercase tracking-wider">Fruit & Worship</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">省察内在生命（叶子 vs 果子）。洁净心中的殿（祷告 vs 交易）。顺服温柔的王。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Examining inner life (Leaves vs Fruit). Cleansing the heart temple. Submitting to the Gentle King.</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-amber-100 pt-3">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">每天问自己：我是那个结果子的园户吗？我的敬拜是真实的吗？</div>
                                    <div class="text-xs italic text-slate-400 en-text">Ask daily: Am I a fruitful tenant? Is my worship authentic?</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>