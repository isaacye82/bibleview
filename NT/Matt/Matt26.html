<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matthew 26: The Cup & The Covenant | 马太福音第二十六章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Passion Red - Blood, Wine, Suffering */
            --theme-primary: #7f1d1d; 
            /* Shadow Grey - Betrayal, Night, Denial */
            --theme-accent: #3f3f46;
            /* Anointing Gold - Worship, Value */
            --theme-gold: #d97706;
            /* Background */
            --theme-bg: #fef2f2;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #450a0a;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #fecaca; /* Red 200 */
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px rgba(127, 29, 29, 0.15);
            border-left-color: var(--theme-primary);
        }

        .academic-box {
            background-color: #f8fafc; /* Slate 50 */
            border-left: 3px solid #64748b; /* Slate 500 */
            color: #334155;
        }
        
        .devotional-box {
            background-color: #fffbeb; /* Amber 50 */
            border-left: 3px solid #d97706; /* Amber 600 */
            color: #78350f;
        }

        /* Gethsemane Cup Animation */
        .cup-container {
            position: relative;
            height: 240px;
            background: linear-gradient(to bottom, #27272a 0%, #000000 100%);
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid #52525b;
        }

        .cup {
            position: relative;
            width: 80px;
            height: 100px;
            border-left: 4px solid #a1a1aa;
            border-right: 4px solid #a1a1aa;
            border-bottom: 4px solid #a1a1aa;
            border-radius: 0 0 40px 40px;
            overflow: hidden;
            z-index: 10;
        }

        .liquid {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80%;
            background-color: #7f1d1d; /* Wrath Red */
            transition: all 2s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0.9;
        }

        .liquid.tremble {
            animation: shake-liquid 0.2s infinite;
        }

        .liquid.drained {
            height: 0%;
        }

        .drop {
            position: absolute;
            top: -20px;
            left: 50%;
            width: 8px;
            height: 12px;
            background-color: #ef4444;
            border-radius: 50%;
            opacity: 0;
        }

        .sweat {
            animation: sweat-drop 2s infinite;
        }

        @keyframes shake-liquid {
            0% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(2px) rotate(1deg); }
            50% { transform: translateY(0) rotate(0deg); }
            75% { transform: translateY(-2px) rotate(-1deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }

        @keyframes sweat-drop {
            0% { top: 20px; opacity: 1; }
            100% { top: 150px; opacity: 0; }
        }

        /* Silver Coins Visual */
        .coin-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            justify-content: center;
            max-width: 150px;
        }
        .silver-coin {
            width: 20px;
            height: 20px;
            background-color: #cbd5e1;
            border-radius: 50%;
            border: 2px solid #94a3b8;
            box-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            display: inline-block;
        }

        /* Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-red-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-24 sm:h-20 items-center">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-red-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-wine-glass mr-2 text-red-700"></i> 马太福音 26章</span>
                        <span class="text-xs text-red-700 en-text font-normal ml-8">Matthew Chapter 26</span>
                    </span>
                </div>
                <div class="flex space-x-4 sm:space-x-8 items-center overflow-x-auto no-scrollbar">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center shrink-0">
                        受难前夜 <br><span class="text-[10px] uppercase opacity-70 en-text">Passion Eve</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-red-700 text-center shrink-0">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-red-700 text-center shrink-0">
                        方法论总结 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-red-200 mb-1">"我父啊，愿你的旨意成全！"</p>
            <p class="text-sm italic text-slate-500 mb-2 en-text">"My Father, your will be done."</p>
            <p class="text-xs opacity-70">马太福音第二十六章中英对照研经报告 | Betrayal & Covenant</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "漫漫长夜：从膏抹到被捕",
                title_en: "The Long Night: From Anointing to Arrest",
                summary_zh: "马太福音第26章是受难叙事的正式开始。整章充满了强烈的对比：玛利亚的'枉费'与犹大的'贪婪'；耶稣的'擘开'与门徒的'四散'；客西马尼的'警醒'与门徒的'沉睡'；耶稣的'承认'（你是神的儿子）与彼得的'否认'。这一章展示了人性的全然失败（出卖、逃跑、否认）与神子全然的顺服（喝杯、立约、受死）。",
                summary_en: "Matthew 26 initiates the Passion narrative. The chapter is a study in contrasts: Mary's 'waste' vs Judas' 'greed'; Jesus' 'breaking' vs the disciples' 'scattering'; Gethsemane's 'watchfulness' vs the disciples' 'sleeping'; Jesus' 'confession' vs Peter's 'denial'. It displays the total failure of humanity (betrayal, flight, denial) against the total submission of the Son of God (drinking the cup, cutting the covenant, dying).",
                concepts: [
                    { title: "约", title_en: "Covenant", greek: "Diathēkē", color: "text-red-700", desc_zh: "神与人建立关系的盟约。耶稣用自己的血设立了'新约'。", desc_en: "A binding agreement. Jesus institutes the 'New Covenant' in His blood." },
                    { title: "杯", title_en: "Cup", greek: "Potērion", color: "text-amber-800", desc_zh: "旧约中象征神对罪恶的愤怒与审判。耶稣代替我们喝下。", desc_en: "OT symbol for God's wrath against sin. Jesus drinks it in our place." },
                    { title: "交给/卖", title_en: "Betray/Deliver", greek: "Paradidōmi", color: "text-slate-600", desc_zh: "本章出现多达7次。指把耶稣移交给敌对势力。", desc_en: "Appears 7 times. Handing Jesus over to hostile powers." }
                ]
            },
            sections: [
                {
                    id: "anointing",
                    title: "壹 · 伯大尼的膏抹：价值的冲突 (26:6-13)",
                    title_en: "Anointing at Bethany: Conflict of Value",
                    desc: "枉费还是美事？ | Waste or Beautiful Thing?",
                    verses: [
                        {
                            ref: "26:8-10",
                            text_zh: "门徒看见就很不喜悦，说：'何用这样的枉费呢？'...耶稣看出...说：'她在我身上做的是一件美事。'",
                            text_en: "But when the disciples saw it, they were indignant, saying, 'Why this waste?'... But Jesus... said to them, 'She has done a beautiful thing to me.'",
                            academic: {
                                title: "枉费 (Apōleia) 的双重含义",
                                content_zh: "门徒用'Apōleia'（毁灭/浪费）形容玛利亚的行动，而同一个词也被用来形容'灭亡之子'犹大（约17:12）。这是价值观的终极冲突：功利主义认为敬拜是一种浪费，应该用于'更有用'的事（济贫）。耶稣却定义这是'美事'（Kalon），并将其与安葬（死亡）联系起来。这确立了敬拜优先于事工的原则。",
                                content_en: "Disciples used 'Apōleia' (destruction/waste) for Mary's act—the same word for Judas, 'Son of Perdition'. This is the ultimate value clash: Utilitarianism sees worship as waste, preferring 'useful' charity. Jesus defines it as 'Beautiful' (Kalon), linking it to His burial. This establishes the priority of Worship over Ministry."
                            },
                            devotional: {
                                title: "神配得你的'枉费'吗？(Is God Worth Your 'Waste'?)",
                                content_zh: "世界总是问：'这有什么用？' 但爱总是问：'这值不值得？' 在这女人眼中，耶稣值得她打破玉瓶，倾倒一切。在旁人看来这是浪费，在主看来这是馨香。如果你从未在神身上做过任何'不计成本'、'看似愚蠢'的奉献，或许你还未真正认识祂的价值。",
                                content_en: "The world asks, 'Is it useful?' Love asks, 'Is He worthy?' To her, Jesus was worth breaking the flask and pouring all. To others, waste; to Him, fragrance. If you've never done anything 'costly' or 'foolish' for God, perhaps you haven't truly seen His worth."
                            }
                        }
                    ]
                },
                {
                    id: "supper",
                    title: "贰 · 最后的晚餐：新约的设立 (26:26-29)",
                    title_en: "The Last Supper: Institution of the New Covenant",
                    desc: "为了你们 | For You",
                    verses: [
                        {
                            ref: "26:27-28",
                            text_zh: "...你们都喝这个；因为这是我立约的血，为多人流出来，使罪得赦。",
                            text_en: "...Drink of it, all of you, for this is my blood of the covenant, which is poured out for many for the forgiveness of sins.",
                            academic: {
                                title: "逾越节的重释 (Reinterpretation of Passover)",
                                content_zh: "耶稣在此重写了逾越节的礼仪。饼不再只纪念出埃及的苦难，而是指祂的身体；杯不再只象征羊羔的血，而是'立约的血'（回响出埃及记24:8和耶利米书31:31）。'为多人'（For many）呼应以赛亚书53章受苦仆人的代赎。这标志着旧约祭祀体系的终结，新约在祂的血中开启。",
                                content_en: "Jesus rewrites the Passover liturgy. Bread is no longer just memory of Exodus, but His Body. The Cup is no longer just lamb's blood, but 'Blood of the Covenant' (echoing Ex 24:8, Jer 31:31). 'For many' echoes Isaiah 53's Suffering Servant. This marks the end of the OT sacrificial system; the New Covenant begins in His blood."
                            },
                            devotional: {
                                title: "罪得赦免的筵席 (Feast of Forgiveness)",
                                content_zh: "在这张桌子上，犹大（背叛者）、彼得（否认者）和其余门徒（逃跑者）都坐席了。耶稣知道他们会做什么，却依然递给他们饼和杯。这就是恩典：我们在还作罪人的时候，祂就为我们死。每次领圣餐，不是庆祝我们的完美，而是庆祝祂对罪人的接纳。",
                                content_en: "At this table sat Judas (betrayer), Peter (denier), and the rest (deserters). Jesus knew, yet served them. This is Grace: while we were yet sinners, He died for us. Communion isn't celebrating our perfection, but His acceptance of sinners."
                            }
                        }
                    ]
                },
                {
                    id: "gethsemane",
                    title: "叁 · 客西马尼：意志的降服 (26:36-46)",
                    title_en: "Gethsemane: Surrender of the Will",
                    desc: "不要照我的意思 | Not as I Will",
                    verses: [
                        {
                            ref: "26:39",
                            text_zh: "...我父啊，倘若可行，求你叫这杯离开我。然而，不要照我的意思，只要照你的意思。",
                            text_en: "...My Father, if it be possible, let this cup pass from me; nevertheless, not as I will, but as you will.",
                            academic: {
                                title: "两个亚当的花园 (Garden of Two Adams)",
                                content_zh: "在伊甸园，第一个亚当说：'照我的意思（不照神的）'，带来了死亡。在客西马尼（榨油坊），末后的亚当说：'照你的意思（不照我的）'，带来了生命。耶稣的'惊恐'（Agonia）表明这杯不是身体的死亡，而是神对罪恶的愤怒（与父隔绝）。祂的顺服不是被动的宿命论，而是主动的意志降服。",
                                content_en: "In Eden, the First Adam said, 'My will be done,' bringing death. In Gethsemane (Oil Press), the Last Adam said, 'Thy will be done,' bringing life. Jesus' 'agony' shows the Cup wasn't physical death, but Divine Wrath (separation). His submission wasn't passive fatalism, but active surrender of will."
                            },
                            devotional: {
                                title: "你的'客西马尼'时刻 (Your Gethsemane Moment)",
                                content_zh: "每个人都会面临'客西马尼'时刻：你想要的（我的意思）和神想要的（神的意思）发生剧烈冲突。那是压榨（Gethsemane）灵魂的地方。顺服神并不意味着没有挣扎或流泪，而是意味着在挣扎中依然选择说：'愿你的旨意成就。' 只有经过压榨，生命的新酒才能流出。",
                                content_en: "Everyone faces a Gethsemane: where 'My Will' clashes violently with 'God's Will'. It presses the soul. Obedience doesn't mean no struggle or tears; it means saying 'Thy will be done' amidst the struggle. Only through pressing does the new wine of life flow."
                            }
                        }
                    ]
                },
                {
                    id: "denial",
                    title: "肆 · 彼得的否认：自信的崩塌 (26:69-75)",
                    title_en: "Peter's Denial: Collapse of Confidence",
                    desc: "鸡叫以后 | After the Rooster Crows",
                    verses: [
                        {
                            ref: "26:74-75",
                            text_zh: "彼得就发咒起誓地说：'我不认得那个人。' 立时，鸡就叫了...他就出去痛哭。",
                            text_en: "Then he began to invoke a curse on himself and to swear, 'I do not know the man.' And immediately the rooster crowed... And he went out and wept bitterly.",
                            academic: {
                                title: "从'即使'到'不认得' (From 'Even If' to 'Do Not Know')",
                                content_zh: "几小时前，彼得还豪言'即使众人都跌倒，我也不跌倒'。现在，为了在一个婢女面前自保，他竟发咒起誓否认主。这是一个关于'肉体自信'彻底破产的案例。'鸡叫'不仅是预言的应验，更是神恩典的唤醒钟声。彼得的眼泪标志着悔改的开始，这与犹大的绝望（27章）形成对比。",
                                content_en: "Hours ago, Peter boasted, 'Even if all fall away, I will not.' Now, to save face before a servant girl, he curses and denies Him. This is the total bankruptcy of 'fleshly confidence'. The rooster is not just prophecy fulfilled, but a wake-up call of Grace. Peter's tears mark the start of repentance, contrasting Judas' despair."
                            },
                            devotional: {
                                title: "跌倒后的恩典 (Grace After Falling)",
                                content_zh: "彼得的失败是惨痛的，但这并不是终点。犹大出卖了耶稣并为此绝望，彼得否认了耶稣却痛哭悔改。区别不在于罪的大小，而在于对神恩典的信靠。如果你也像彼得一样在压力下妥协了、失败了，不要绝望。鸡叫声是唤醒的信号，眼泪是回家的路。主允许我们跌倒，是为了打碎我们的骄傲，好让我们以后能靠着祂站立。",
                                content_en: "Peter's failure was bitter, but not final. Judas betrayed and despaired; Peter denied and wept in repentance. The difference isn't the size of the sin, but trust in Grace. If you have compromised or failed like Peter, don't despair. The rooster's crow is a wake-up call; tears are the path home. The Lord allows us to fall to break our pride, so we may stand in Him later."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all',
            cupState: 'full' // full, draining, empty
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-slate-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-slate-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Interactive Functions ---
        function drinkCup() {
            const liquid = document.getElementById('cup-liquid');
            const status = document.getElementById('cup-status');
            const drop = document.getElementById('sweat-drop');
            const btn = document.getElementById('cup-btn');
            
            if (appState.cupState === 'full') {
                liquid.classList.add('tremble');
                drop.classList.add('sweat');
                status.innerText = "挣扎中... (Struggling...)";
                status.className = "text-center text-sm mb-4 font-bold text-amber-600";
                
                setTimeout(() => {
                    liquid.classList.remove('tremble');
                    liquid.classList.add('drained');
                    drop.classList.remove('sweat');
                    status.innerText = "愿你的旨意成全 (Thy Will Be Done)";
                    status.className = "text-center text-sm mb-4 font-bold text-green-700";
                    btn.innerText = "重置 (Reset)";
                    btn.className = "w-full py-2 bg-slate-600 hover:bg-slate-700 text-white rounded font-bold transition";
                    appState.cupState = 'empty';
                }, 2000);
            } else {
                liquid.classList.remove('drained');
                status.innerText = "愤怒的杯 (Cup of Wrath)";
                status.className = "text-center text-sm mb-4 font-bold text-red-800";
                btn.innerText = "顺服饮杯 (Drink in Obedience)";
                btn.className = "w-full py-2 bg-red-800 hover:bg-red-900 text-white rounded font-bold transition shadow-lg border border-red-600";
                appState.cupState = 'full';
            }
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-red-800">
                        <div class="flex items-center mb-4">
                            <span class="bg-red-100 text-red-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Passion</span>
                            <h2 class="text-3xl font-bold serif text-red-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-slate-400 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-slate-600 leading-relaxed mb-4 text-lg border-l-4 border-red-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-slate-500 leading-relaxed text-sm italic en-text border-l-4 border-slate-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col items-center text-center transition hover:bg-red-50 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-slate-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-slate-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-slate-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-slate-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: Gethsemane Cup -->
                    <div class="lg:col-span-4 bg-slate-900 p-6 rounded-xl shadow-lg flex flex-col border border-slate-700 relative overflow-hidden">
                         <h3 class="text-xl font-bold mb-1 text-center text-red-500">客西马尼的苦杯</h3>
                         <p class="text-xs text-slate-400 mb-4 text-center en-text uppercase tracking-widest">Gethsemane Simulator</p>
                         
                         <div id="cup-vis" class="cup-container mb-4">
                            <div class="cup">
                                <div id="cup-liquid" class="liquid"></div>
                            </div>
                            <div id="sweat-drop" class="drop"></div>
                         </div>
                         
                         <p id="cup-status" class="text-center text-sm text-red-400 mb-4 h-6 font-bold">愤怒的杯 (Cup of Wrath)</p>

                         <button id="cup-btn" onclick="drinkCup()" class="w-full py-2 bg-red-800 hover:bg-red-900 text-white rounded font-bold transition shadow-lg border border-red-600">
                             <i class="fas fa-wine-glass-alt mr-2"></i> 顺服饮杯 (Drink in Obedience)
                         </button>
                    </div>
                </div>

                <!-- Feature: Betrayal & Anointing -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                    <!-- 30 Silver Coins -->
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-300">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-bold text-slate-700"><i class="fas fa-coins text-slate-500 mr-2"></i> 背叛的代价</h3>
                            <span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded">Matt 26:15</span>
                        </div>
                        <div class="text-center">
                            <div class="coin-stack mb-2">
                                ${Array(30).fill(0).map(() => `<div class="silver-coin"></div>`).join('')}
                            </div>
                            <p class="text-3xl font-bold text-slate-800">30 块银子</p>
                            <p class="text-xs text-slate-500">奴隶的赎价 (Price of a Slave, Ex 21:32)</p>
                        </div>
                    </div>

                    <!-- Alabaster Jar -->
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-amber-200">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-bold text-amber-800"><i class="fas fa-flask text-amber-500 mr-2"></i> 极贵的膏油</h3>
                            <span class="text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded">Matt 26:7</span>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="text-5xl text-amber-400"><i class="fas fa-oil-can"></i></div>
                            <div>
                                <h4 class="font-bold text-slate-700">这世界说：枉费 (Waste)</h4>
                                <h4 class="font-bold text-red-700">耶稣说：美事 (Beautiful)</h4>
                                <p class="text-xs text-slate-500 mt-2 italic">她将这香膏浇在我身上是为我安葬做的。</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#fef2f2]/95 backdrop-blur py-4 mb-6 border-b border-red-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-red-900 serif">逐节研读室 <span class="text-base font-normal text-slate-400 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-red-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-red-800 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">全部 All</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">经文含义 Exegesis</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-amber-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">灵修应用 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-red-800">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-sm text-red-800 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            // Safety checks
            const academicTitle = verse.academic ? verse.academic.title : "Title Missing";
            const academicContentZh = verse.academic ? verse.academic.content_zh : "Content missing";
            const academicContentEn = verse.academic ? verse.academic.content_en : "Content missing";
            
            const devotionalTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devotionalContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devotionalContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-red-50 to-white p-5 border-b border-red-100">
                        <span class="inline-block px-2 py-0.5 bg-red-100 text-red-800 text-xs font-bold rounded mb-2 font-mono border border-red-200">${verse.ref}</span>
                        <p class="text-slate-800 font-serif text-lg leading-relaxed group-hover:text-red-900 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-slate-500 font-serif text-sm italic en-text border-l-2 border-red-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-red-100">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-500">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Exegesis</h4>
                            </div>
                            <h5 class="font-bold text-slate-700 mb-2">${academicTitle}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify mb-2">${academicContentZh}</p>
                            <p class="text-xs text-slate-400 font-serif italic en-text border-t border-slate-300 pt-2 mt-2">${academicContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-amber-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-amber-800 mb-2">${devotionalTitle}</h5>
                            <p class="text-sm text-amber-900/80 leading-relaxed text-justify mb-2">${devotionalContentZh}</p>
                            <p class="text-xs text-amber-700/70 font-serif italic en-text border-t border-amber-200 pt-2 mt-2">${devotionalContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-slate-800">解经方法论总结</h2>
                        <p class="text-slate-500 en-text">Summary of Exegetical Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-slate-500 text-4xl mb-4"><i class="fas fa-book-reader"></i></div>
                            <h3 class="text-xl font-bold text-slate-700 mb-2">权威/经文性解经 (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">Historical & Symbolic</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-red-800 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">词义分析（后悔vs悔改）。预言应验（血田）。神学象征（幔子裂开、正午黑暗）。代赎类比（巴拉巴）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Word study (Regret vs Repent). Prophecy fulfillment (Field of Blood). Theological symbolism (Veil, Darkness). Substitution analogy (Barabbas).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-red-800 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">在历史事件中看到神学必然性。理解十字架是神愤怒与慈爱的交汇点。</div>
                                    <div class="text-xs italic text-slate-400 en-text">See theological necessity in history. Understand the Cross as intersection of Wrath and Love.</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-amber-500 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-amber-500 text-4xl mb-4"><i class="fas fa-pray"></i></div>
                            <h3 class="text-xl font-bold text-amber-800 mb-2">灵修/应用性解经 (Devotional)</h3>
                            <p class="text-xs text-amber-600/70 mb-6 uppercase tracking-wider">Access & Identity</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">个人代入（我就是巴拉巴）。处理罪疚（跑向恩典）。坦然无惧的应用（进入至圣所）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Personal identification (I am Barabbas). Handling guilt (Run to Grace). Applying boldness (Enter Holy of Holies).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-amber-100 pt-3">
                                    <div class="flex items-center font-bold text-amber-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">不要停留在后悔中，要进入悔改。利用幔子裂开的特权，每天来到神面前。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Don't stop at regret; move to repentance. Use the privilege of the torn veil to approach God daily.</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>