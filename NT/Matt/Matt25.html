<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matthew 25: Preparation & Judgment | 马太福音第二十五章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Oil Gold - Preparation, Light, Holy Spirit */
            --theme-primary: #ca8a04; 
            /* Midnight Blue - The Delay, The Night, Waiting */
            --theme-accent: #1e1b4b;
            /* Judgment Purple - The King, Royalty, Finality */
            --theme-dark: #581c87;
            /* Background */
            --theme-bg: #fffbeb;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #422006;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #fde047; /* Yellow 300 */
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px rgba(202, 138, 4, 0.15);
            border-left-color: var(--theme-primary);
        }

        .academic-box {
            background-color: #f8fafc; /* Slate 50 */
            border-left: 3px solid #64748b; /* Slate 500 */
            color: #334155;
        }
        
        .devotional-box {
            background-color: #faf5ff; /* Purple 50 */
            border-left: 3px solid #7e22ce; /* Purple 600 */
            color: #581c87;
        }

        /* Oil Lamp Animation */
        .lamp-scene {
            position: relative;
            height: 220px;
            background: linear-gradient(to bottom, #172554 0%, #1e1b4b 100%);
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            border: 2px solid #1e3a8a;
        }

        .lamp {
            position: relative;
            width: 80px;
            height: 50px;
            background-color: #b45309; /* Bronze/Clay */
            border-radius: 20px 20px 40px 40px;
            margin-bottom: 40px;
            z-index: 10;
        }
        
        .lamp::before { /* Spout */
            content: '';
            position: absolute;
            top: 5px;
            right: -15px;
            width: 30px;
            height: 20px;
            background-color: #b45309;
            border-radius: 5px 20px 5px 0;
        }

        .flame {
            position: absolute;
            top: -30px;
            right: -25px;
            width: 20px;
            height: 30px;
            background: radial-gradient(ellipse at center, #fef08a 0%, #facc15 60%, #ea580c 100%);
            border-radius: 50% 50% 20% 20%;
            box-shadow: 0 0 20px #facc15;
            animation: flicker 0.2s infinite alternate;
            transform-origin: bottom center;
            opacity: 1;
            transition: all 1s ease;
        }

        .oil-meter {
            position: absolute;
            left: 10px;
            top: 10px;
            width: 20px;
            height: 100px;
            background-color: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .oil-level {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%; /* Dynamic */
            background-color: #eab308;
            transition: height 0.5s ease;
        }

        /* Animation States */
        .out-of-oil .flame {
            transform: scale(0);
            opacity: 0;
        }
        
        .out-of-oil .lamp {
            filter: grayscale(80%);
        }

        @keyframes flicker {
            0% { transform: scale(1) rotate(-2deg); opacity: 0.9; }
            100% { transform: scale(1.1) rotate(2deg); opacity: 1; }
        }

        /* Talent Multiplier Visual */
        .talent-bag {
            width: 50px;
            height: 60px;
            background-color: #cbd5e1;
            border-radius: 10px 10px 20px 20px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: #475569;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .talent-bag::before { /* Tie */
            content: '';
            position: absolute;
            top: 10px;
            width: 100%;
            height: 4px;
            background-color: #64748b;
        }

        .multiplied {
            background-color: #fbbf24;
            color: #b45309;
            transform: scale(1.2);
            box-shadow: 0 0 15px #fbbf24;
        }
        
        .buried {
            background-color: #475569;
            color: #94a3b8;
            transform: translateY(20px);
            opacity: 0.6;
        }

        /* Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-yellow-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-24 sm:h-20 items-center">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-yellow-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-balance-scale mr-2 text-yellow-600"></i> 马太福音 25章</span>
                        <span class="text-xs text-yellow-700 en-text font-normal ml-8">Matthew Chapter 25</span>
                    </span>
                </div>
                <div class="flex space-x-4 sm:space-x-8 items-center overflow-x-auto no-scrollbar">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center shrink-0">
                        终极审判 <br><span class="text-[10px] uppercase opacity-70 en-text">Final Judgment</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-yellow-700 text-center shrink-0">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-yellow-700 text-center shrink-0">
                        方法论总结 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-yellow-200 mb-1">"好，你这又良善又忠心的仆人"</p>
            <p class="text-sm italic text-slate-500 mb-2 en-text">"Well done, good and faithful servant."</p>
            <p class="text-xs opacity-70">马太福音第二十五章中英对照研经报告 | Vigilance & Faithfulness</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "末世的三重奏：预备、忠心与爱",
                title_en: "The Eschatological Trio: Preparation, Faithfulness & Love",
                summary_zh: "马太福音第25章通过三个著名的比喻，进一步阐释了24章'警醒'的含义。这不仅仅是等待，而是积极的行动。'十童女'强调内在生命的预备（圣灵/恩典的储备）；'按才受托'强调外在恩赐的运用（忠心与风险）；'绵羊与山羊'揭示了审判的终极标准（对他人的爱）。这章告诉我们，真正的等待是在爱中服事，直到王来。",
                summary_en: "Matthew 25 elaborates on the 'Watchfulness' of Ch 24 through three famous parables. It's not passive waiting, but active engagement. 'Ten Virgins' emphasizes inner spiritual preparation (Oil); 'The Talents' emphasizes the outer use of gifts (Faithfulness & Risk); 'Sheep and Goats' reveals the final criterion of judgment (Love for others). True waiting is serving in love until the King returns.",
                concepts: [
                    { title: "聪明的", title_en: "Wise", greek: "Phronimos", color: "text-green-700", desc_zh: "指具有预见性、审慎的智慧。知道新郎可能迟延，因此预备了额外所需。", desc_en: "Prudent, sensible. Knowing the Bridegroom might delay, thus preparing extra." },
                    { title: "银子/才", title_en: "Talent", greek: "Talanton", color: "text-slate-600", desc_zh: "巨额货币单位（一他连得约6000得那利，即20年工资）。象征神托付的巨大资产。", desc_en: "A huge sum (~20 years' wages). Symbolizes the immense assets God entrusts." },
                    { title: "最小的", title_en: "The Least", greek: "Elachistos", color: "text-rose-700", desc_zh: "社会边缘人、受苦者。耶稣将自己与这些人完全认同。", desc_en: "The marginalized, the suffering. Jesus identifies Himself fully with them." }
                ]
            },
            sections: [
                {
                    id: "virgins",
                    title: "壹 · 十童女的比喻：预备与迟延 (25:1-13)",
                    title_en: "Parable of the Ten Virgins: Preparation & Delay",
                    desc: "无法借用的油 | Non-Transferable Oil",
                    verses: [
                        {
                            ref: "25:3-4, 10",
                            text_zh: "愚拙的拿着灯，却不预备油；聪明的拿着灯，又预备油...新郎到了...门就关了。",
                            text_en: "For when the foolish took their lamps, they took no oil with them, but the wise took flasks of oil... the bridegroom came... and the door was shut.",
                            academic: {
                                title: "油的象征意义 (Symbolism of Oil)",
                                content_zh: "在这个比喻中，所有的童女都打盹睡着了（这是人性的软弱），区别在于她们醒来时是否有足够的油。'油'常被解释为圣灵的内住、真实的信心或重生的生命。关键神学点在于：这种属灵的储备是'不可转让'的（Incommunicable）。没有人能借用别人的信心或圣灵经历得救。这是个人对神的责任。'门就关了'标志着机会的终结性。",
                                content_en: "All virgins slept (human frailty); the difference was the oil upon waking. 'Oil' symbolizes the indwelling Spirit, genuine faith, or regenerate life. The key theological point: This spiritual reserve is 'Incommunicable'. One cannot borrow another's faith or spiritual experience for salvation. It is a personal responsibility. 'The door was shut' signifies the finality of opportunity."
                            },
                            devotional: {
                                title: "你的灯还有油吗？(Is Your Lamp Full?)",
                                content_zh: "许多基督徒拥有'灯'（外在的宗教形式、事奉、名号），却缺乏'器皿里的油'（内在与神深交的生命）。我们在顺境中都能发光，但当'半夜'（危机、长期的等待、试炼）来临时，唯有那些平时在隐密处积蓄了深厚属灵生命的人，才能坚持到底。不要等到危机时刻才去买油，现在就是预备的时候。",
                                content_en: "Many have 'lamps' (religious form, ministry) but lack 'oil in flasks' (inner intimacy with God). We all shine in good times, but when 'midnight' (crisis, long delays) comes, only those with deep spiritual reserves endure. Don't wait for the crisis to buy oil; now is the time to prepare."
                            }
                        }
                    ]
                },
                {
                    id: "talents",
                    title: "贰 · 按才受托的比喻：忠心与风险 (25:14-30)",
                    title_en: "Parable of the Talents: Faithfulness & Risk",
                    desc: "不做事的罪 | The Sin of Doing Nothing",
                    verses: [
                        {
                            ref: "25:21, 25",
                            text_zh: "...好，你这又良善又忠心的仆人...我就害怕，去把你的一千银子埋藏在地里...",
                            text_en: "...Well done, good and faithful servant... so I was afraid, and I went and hid your talent in the ground...",
                            academic: {
                                title: "管家的伦理 (Stewardship Ethics)",
                                content_zh: "神给每个人的托付不同（五千、二千、一千），但对'忠心'的奖赏是一样的（享受主人的快乐）。第三个仆人的罪不在于他贪污或浪费，而在于他'不做事'（Passivity）。他的动机是'害怕'——对神错误的认知（忍心的人）。这表明：为了神的国度而不愿承担风险、只想'保本'的安全感，在神眼中是'又恶又懒'的。忠心意味着为了主人的利益去冒险投资。",
                                content_en: "God entrusts differently (5, 2, 1), but rewards 'faithfulness' equally. The third servant's sin wasn't theft, but 'Passivity'. His motive was 'fear'—a wrong view of God (hard man). This shows: Seeking safety and refusing to take risks for the Kingdom is 'wicked and slothful'. Faithfulness implies risk-taking investment for the Master's gain."
                            },
                            devotional: {
                                title: "不要埋没你的才干 (Don't Bury Your Talent)",
                                content_zh: "你是否因为觉得自己恩赐小（只有一千），或者害怕失败，就选择把才干'埋'起来（不服事、不尝试、不分享）？神不要求你赚得和布道家一样多，但他要求你尽你所能去'经营'。哪怕是微小的恩赐，只要拿出来使用，神就会使它倍增。埋藏恩赐不仅是浪费，更是对赐予者的侮辱。",
                                content_en: "Do you bury your talent (don't serve/share) because it feels small or you fear failure? God doesn't demand you match Billy Graham, but He demands you 'trade' with what you have. Even tiny gifts multiply when used. Burying gifts isn't just waste; it's an insult to the Giver."
                            }
                        }
                    ]
                },
                {
                    id: "sheep-goats",
                    title: "叁 · 绵羊与山羊：审判的标准 (25:31-46)",
                    title_en: "Sheep and Goats: Criteria of Judgment",
                    desc: "爱心的实据 | Evidence of Love",
                    verses: [
                        {
                            ref: "25:40, 45",
                            text_zh: "...这些事你们既做在我这弟兄中一个最小的身上，就是做在我身上了...这些事你们既不做...",
                            text_en: "...As you did it to one of the least of these my brothers, you did it to me... As you did not do it...",
                            academic: {
                                title: "无意识的义行 (Unconscious Righteousness)",
                                content_zh: "这是对万民的审判。令人惊讶的是，义人和恶人都感到困惑：'我们什么时候见你...？' 这表明真正的义行是发自新生命的自然流露，而不是为了赚取救恩的刻意表演。'弟兄中最小的'特指受苦的门徒或广义上的贫穷软弱者。耶稣将自己与苦难者神圣同化。这不仅是伦理教导，更是基督论的高峰——审判王就是那位在饥饿者中的受苦者。",
                                content_en: "Judgment of nations. Surprisingly, both righteous and wicked are puzzled: 'When did we see you...?' True righteousness flows naturally from new life, not calculated for reward. 'Least of these' refers to suffering disciples or the poor generally. Jesus divinely identifies with the suffering. This is high Christology: The Judge is the Sufferer in the hungry."
                            },
                            devotional: {
                                title: "看见伪装的耶稣 (Seeing Jesus in Disguise)",
                                content_zh: "特蕾莎修女说：'耶稣以令人厌恶的装扮出现在穷人中。' 我们的信仰很容易变成抽象的教条，但审判的标准却是具体的行动：给吃的、给喝的、留宿、看顾。当你忽略身边那个不起眼、甚至有些麻烦的人时，你可能刚刚错过了服事耶稣的机会。爱神必须体现为爱人，否则就是空谈。",
                                content_en: "Mother Teresa said Jesus comes 'in the distressing disguise of the poor'. Our faith easily becomes abstract doctrine, but Judgment is based on concrete acts: feeding, hosting, visiting. When you ignore that insignificant or troublesome person, you might be missing Jesus. Love for God must manifest as love for people, or it is empty."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all',
            oilLevel: 100, // percentage
            lampState: 'burning' // burning, dying, out
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
            startLampTimer();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-slate-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-slate-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Interactive Functions ---
        function startLampTimer() {
            // Only run if element exists
            const meter = document.getElementById('oil-meter-fill');
            if(!meter) return;

            const interval = setInterval(() => {
                // If user navigates away, stop updating but keep interval running logic simple
                if(!document.getElementById('oil-meter-fill')) return;

                if (appState.oilLevel > 0) {
                    appState.oilLevel -= 2; // Burn oil
                    updateLampVisuals();
                } else {
                    appState.lampState = 'out';
                    updateLampVisuals();
                }
            }, 500);
        }

        function addOil() {
            appState.oilLevel = Math.min(appState.oilLevel + 30, 100);
            appState.lampState = 'burning';
            updateLampVisuals();
        }

        function updateLampVisuals() {
            const meter = document.getElementById('oil-meter-fill');
            const flame = document.getElementById('lamp-flame');
            const container = document.getElementById('lamp-container');
            const status = document.getElementById('lamp-status');
            
            if(!meter) return;

            meter.style.height = `${appState.oilLevel}%`;
            
            if (appState.oilLevel > 50) {
                meter.style.backgroundColor = '#eab308'; // High oil
                flame.style.transform = 'scale(1) rotate(0deg)';
                flame.style.opacity = '1';
                container.classList.remove('out-of-oil');
                status.innerText = "灯火通明 (Burning Bright)";
            } else if (appState.oilLevel > 0) {
                meter.style.backgroundColor = '#ef4444'; // Low oil
                flame.style.transform = `scale(${appState.oilLevel/100 + 0.2})`;
                flame.style.opacity = '0.7';
                container.classList.remove('out-of-oil');
                status.innerText = "灯火将残... (Fading...)";
            } else {
                container.classList.add('out-of-oil');
                status.innerHTML = "<span class='text-red-500 font-bold'>油尽灯枯！门关了！(Out of Oil! Door Shut!)</span>";
            }
        }

        function investTalent(amount) {
            const bag = document.getElementById(`talent-${amount}`);
            const result = document.getElementById('talent-result');
            
            // Reset others
            document.querySelectorAll('.talent-bag').forEach(b => b.className = 'talent-bag');
            
            if (amount === 1) {
                bag.classList.add('buried');
                result.innerHTML = "<span class='text-slate-500'>埋在地里：0 回报 (Buried: 0 Return) - <span class='font-bold'>又恶又懒</span></span>";
            } else {
                bag.classList.add('multiplied');
                let gain = amount * 2;
                result.innerHTML = `<span class='text-yellow-700 font-bold'>赚了 ${amount}！总共 ${gain} (Gained ${amount}! Total ${gain}) - <span class='font-bold'>良善忠心</span></span>`;
            }
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-yellow-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-yellow-100 text-yellow-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Parables</span>
                            <h2 class="text-3xl font-bold serif text-yellow-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-slate-400 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-slate-600 leading-relaxed mb-4 text-lg border-l-4 border-yellow-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-slate-500 leading-relaxed text-sm italic en-text border-l-4 border-slate-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col items-center text-center transition hover:bg-yellow-50 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-slate-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-slate-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-slate-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-slate-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: Oil Lamp Simulator -->
                    <div class="lg:col-span-4 bg-slate-900 p-6 rounded-xl shadow-lg flex flex-col border border-slate-700 relative overflow-hidden">
                         <h3 class="text-xl font-bold mb-1 text-center text-yellow-400">灯油储备</h3>
                         <p class="text-xs text-slate-400 mb-4 text-center en-text uppercase tracking-widest">Oil Reserve Simulator</p>
                         
                         <div id="lamp-container" class="lamp-scene mb-4">
                            <div class="oil-meter">
                                <div id="oil-meter-fill" class="oil-level" style="height: 100%;"></div>
                            </div>
                            <div class="lamp">
                                <div id="lamp-flame" class="flame"></div>
                            </div>
                         </div>
                         
                         <p id="lamp-status" class="text-center text-sm text-yellow-200 mb-4 h-6">灯火通明 (Burning Bright)</p>

                         <button onclick="addOil()" class="w-full py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-full font-bold transition shadow-lg border border-yellow-500">
                             <i class="fas fa-fill-drip mr-2"></i> 添加灯油 (Add Oil)
                         </button>
                         <p class="text-[10px] text-center mt-2 text-slate-500 italic">"预备油在器皿里..."</p>
                    </div>
                </div>

                <!-- Feature: Talents & Judgment -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                    <!-- Talents Game -->
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-bold text-slate-700"><i class="fas fa-coins text-yellow-600 mr-2"></i> 按才受托</h3>
                            <span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded">Matt 25:14</span>
                        </div>
                        <div class="flex justify-around items-end h-24 mb-4">
                            <div id="talent-5" class="talent-bag cursor-pointer" onclick="investTalent(5)" style="height: 80px;">5才</div>
                            <div id="talent-2" class="talent-bag cursor-pointer" onclick="investTalent(2)" style="height: 60px;">2才</div>
                            <div id="talent-1" class="talent-bag cursor-pointer" onclick="investTalent(1)" style="height: 40px;">1才</div>
                        </div>
                        <p id="talent-result" class="text-center text-sm text-slate-600 h-6">点击钱袋进行投资 (Click bag to invest)</p>
                    </div>

                    <!-- Sheep vs Goats -->
                    <div class="bg-gradient-to-br from-purple-50 to-white p-6 rounded-xl shadow-lg border border-purple-100">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-bold text-purple-800"><i class="fas fa-gavel text-purple-600 mr-2"></i> 绵羊与山羊</h3>
                            <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded">Matt 25:31</span>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex items-center p-2 bg-green-100 rounded border-l-4 border-green-500">
                                <div class="w-8 text-center text-green-700 font-bold mr-2">右</div>
                                <div>
                                    <h4 class="font-bold text-green-900 text-sm">绵羊 (Sheep)</h4>
                                    <p class="text-xs text-green-800">做在最小的弟兄身上 (Did it to the least)</p>
                                </div>
                            </div>
                            <div class="flex items-center p-2 bg-slate-200 rounded border-l-4 border-slate-500">
                                <div class="w-8 text-center text-slate-700 font-bold mr-2">左</div>
                                <div>
                                    <h4 class="font-bold text-slate-900 text-sm">山羊 (Goats)</h4>
                                    <p class="text-xs text-slate-800">不做在最小的弟兄身上 (Did not do it)</p>
                                </div>
                            </div>
                        </div>
                        <p class="mt-3 text-[10px] text-purple-800 text-center italic">
                            "这些事你们既做在我这弟兄中一个最小的身上，就是做在我身上了。"
                        </p>
                    </div>
                </div>
            `;
            
            // Re-init timer if returning to dashboard
            startLampTimer();
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#fffbeb]/95 backdrop-blur py-4 mb-6 border-b border-yellow-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-yellow-900 serif">逐节研读室 <span class="text-base font-normal text-slate-400 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-yellow-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-yellow-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">全部 All</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">经文含义 Exegesis</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-purple-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">灵修应用 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-yellow-600">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-sm text-yellow-700 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            // Safety checks
            const academicTitle = verse.academic ? verse.academic.title : "Title Missing";
            const academicContentZh = verse.academic ? verse.academic.content_zh : "Content missing";
            const academicContentEn = verse.academic ? verse.academic.content_en : "Content missing";
            
            const devotionalTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devotionalContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devotionalContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-yellow-50 to-white p-5 border-b border-yellow-100">
                        <span class="inline-block px-2 py-0.5 bg-yellow-100 text-yellow-800 text-xs font-bold rounded mb-2 font-mono border border-yellow-200">${verse.ref}</span>
                        <p class="text-slate-800 font-serif text-lg leading-relaxed group-hover:text-yellow-900 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-slate-500 font-serif text-sm italic en-text border-l-2 border-yellow-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-yellow-100">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-500">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Exegesis</h4>
                            </div>
                            <h5 class="font-bold text-slate-700 mb-2">${academicTitle}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify mb-2">${academicContentZh}</p>
                            <p class="text-xs text-slate-400 font-serif italic en-text border-t border-slate-300 pt-2 mt-2">${academicContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-purple-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-purple-800 mb-2">${devotionalTitle}</h5>
                            <p class="text-sm text-purple-900/80 leading-relaxed text-justify mb-2">${devotionalContentZh}</p>
                            <p class="text-xs text-purple-700/70 font-serif italic en-text border-t border-purple-200 pt-2 mt-2">${devotionalContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-slate-800">解经方法论总结</h2>
                        <p class="text-slate-500 en-text">Summary of Exegetical Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-slate-500 text-4xl mb-4"><i class="fas fa-book-reader"></i></div>
                            <h3 class="text-xl font-bold text-slate-700 mb-2">权威/经文性解经 (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">Parabolic & Prophetic</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-yellow-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">象征分析（油、银子、山羊的含义）。末世论背景（迟延Parousia、终极审判）。基督论应用（耶稣与受苦者的认同）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Symbolic analysis (Oil, Talents, Goats). Eschatological context (Delay, Judgment). Christological application (Jesus identified with sufferers).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-yellow-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">区分"得救的信心"（灯油）与"事奉的忠心"（银子）。理解审判是基于"生命流露的果子"。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Distinguish saving faith (Oil) from serving faithfulness (Talents). Judgment based on fruit of life.</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-purple-500 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-purple-500 text-4xl mb-4"><i class="fas fa-pray"></i></div>
                            <h3 class="text-xl font-bold text-purple-800 mb-2">灵修/应用性解经 (Devotional)</h3>
                            <p class="text-xs text-purple-600/70 mb-6 uppercase tracking-wider">Action & Heart</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-purple-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">将等待转化为行动（投资恩赐、爱邻舍）。在日常中预备见主。克服对失败的恐惧。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Turning waiting into action (Investing gifts, Loving neighbors). Preparing daily. Overcoming fear of failure.</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-purple-100 pt-3">
                                    <div class="flex items-center font-bold text-purple-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">不仅要"信"，还要"预备油"。不仅要"守"，还要"赚"。不仅要"敬拜神"，还要"爱弟兄"。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Not just believe, but prepare oil. Not just keep, but gain. Not just worship God, but love brothers.</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>