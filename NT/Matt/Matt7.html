<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matthew 7: Two Ways & Two Foundations | 马太福音第七章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Foundation Slate - The Rock, Stability, Judgment */
            --theme-primary: #334155; 
            /* Narrow Way Green - Life, Growth */
            --theme-accent: #059669;
            /* Warning Red - Fire, False Prophets */
            --theme-warn: #be123c;
            /* Background */
            --theme-bg: #f1f5f9;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #1e293b;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #cbd5e1; /* Slate 300 */
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px -5px rgba(51, 65, 85, 0.15);
            border-left-color: var(--theme-accent);
        }

        .academic-box {
            background-color: #f8fafc; /* Slate 50 */
            border-left: 3px solid #64748b; /* Slate 500 */
            color: #334155;
        }
        
        .devotional-box {
            background-color: #f0fdf4; /* Green 50 */
            border-left: 3px solid #059669; /* Green 600 */
            color: #064e3b;
        }

        /* Animation: House on Rock vs Sand */
        .foundation-scene {
            position: relative;
            height: 200px;
            overflow: hidden;
            background: linear-gradient(to bottom, #94a3b8 0%, #cbd5e1 100%);
            border-radius: 0.75rem;
        }
        
        .house {
            position: absolute;
            bottom: 40px;
            width: 60px;
            height: 50px;
            background-color: #e2e8f0;
            border: 2px solid #475569;
            z-index: 10;
        }
        .house::before {
            content: '';
            position: absolute;
            top: -30px;
            left: -10%;
            width: 120%;
            height: 30px;
            background-color: #be123c;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }

        .house-rock { left: 25%; }
        .house-sand { right: 25%; }

        .base-rock {
            position: absolute;
            bottom: 0;
            left: 15%;
            width: 20%;
            height: 40px;
            background-color: #334155;
            border-radius: 5px 5px 0 0;
        }
        
        .base-sand {
            position: absolute;
            bottom: 0;
            right: 15%;
            width: 20%;
            height: 40px;
            background-color: #fbbf24;
            border-radius: 50% 50% 0 0 / 20% 20% 0 0;
        }

        .rain {
            position: absolute;
            top: -50px;
            width: 2px;
            height: 10px;
            background-color: #1e3a8a;
            animation: rain-drop 0.5s linear infinite;
            opacity: 0;
        }

        /* Storm Animation Classes */
        .storm-active .rain { opacity: 0.6; }
        .storm-active .foundation-scene { background: linear-gradient(to bottom, #475569 0%, #64748b 100%); }
        
        .storm-active .house-sand {
            animation: shake 0.5s ease-in-out infinite;
            transform-origin: bottom center;
        }
        
        .collapsed {
            transform: rotate(45deg) translateY(20px) !important;
            transition: transform 1s ease;
        }

        @keyframes rain-drop {
            0% { transform: translateY(0); }
            100% { transform: translateY(250px); }
        }

        @keyframes shake {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(-5deg); }
            100% { transform: rotate(0deg); }
        }

        /* Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md sticky top-0 z-50 border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-24 sm:h-20 items-center">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-slate-800 serif flex flex-col leading-tight">
                        <span><i class="fas fa-archway mr-2 text-slate-600"></i> 马太福音 7章</span>
                        <span class="text-xs text-slate-500 en-text font-normal ml-8">Matthew Chapter 7</span>
                    </span>
                </div>
                <div class="flex space-x-4 sm:space-x-8 items-center overflow-x-auto no-scrollbar">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center shrink-0">
                        终极抉择 <br><span class="text-[10px] uppercase opacity-70 en-text">The Choice</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-slate-700 text-center shrink-0">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-slate-500 hover:text-slate-700 text-center shrink-0">
                        方法论总结 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-emerald-200 mb-1">"聪明人把房子盖在磐石上"</p>
            <p class="text-sm italic text-slate-500 mb-2 en-text">"The wise man built his house on the rock."</p>
            <p class="text-xs opacity-70">马太福音第七章中英对照研经报告 | Judgment & Foundations</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "抉择时刻：两条路与两个根基",
                title_en: "The Time of Decision: Two Ways & Two Foundations",
                summary_zh: "马太福音第七章是登山宝训的终章。如果说第五章设定了标准，第六章净化了动机，那么第七章则呼召行动。耶稣以一系列强烈的二元对比（宽门vs窄门，好树vs坏树，磐石vs沙土）迫使听众做出决定。这一章也处理了我们在人际关系中极易犯的错误——论断，以及如何分辨真伪。这不是一个可以中立旁观的结论，而是一场必须参与的考试。",
                summary_en: "Matthew 7 serves as the finale of the Sermon on the Mount. If Chapter 5 set the standard and Chapter 6 purified the motive, Chapter 7 demands action. Jesus forces a decision through a series of stark binaries: wide vs. narrow gates, good vs. bad trees, rock vs. sand foundations. It also addresses judgmentalism and discernment. This is not a conclusion for neutral observation, but a test that requires participation.",
                concepts: [
                    { title: "论断", title_en: "Judge", greek: "Krinō", color: "text-slate-600", desc_zh: "指吹毛求疵、自以为义的定罪，而非指缺乏辨识力。", desc_en: "Censorious, hypocritical condemnation, not lack of discernment." },
                    { title: "认识", title_en: "Knew", greek: "Ginōskō", color: "text-emerald-600", desc_zh: "关系性的认识，不仅是认知上的知道（亚当认识夏娃）。", desc_en: "Relational knowledge/intimacy, not just cognitive data." },
                    { title: "根基", title_en: "Foundation", greek: "Themelios", color: "text-slate-800", desc_zh: "指听到主的话并且去行（听道+行道）。", desc_en: "Refers to hearing the Lord's words AND doing them." }
                ]
            },
            sections: [
                {
                    id: "judging",
                    title: "壹 · 梁木与刺：关系的智慧 (7:1-6)",
                    title_en: "The Log and the Speck: Relational Wisdom",
                    desc: "自我省察与神圣辨识 | Self-Examination & Holy Discernment",
                    verses: [
                        {
                            ref: "7:1-5",
                            text_zh: "你们不要论断人，免得你们被论断...先去掉自己眼中的梁木，然后才能看得清楚...",
                            text_en: "Judge not, that you be not judged... First take the log out of your own eye, and then you will see clearly...",
                            academic: {
                                title: "论断 (Krino) 的真正含义",
                                content_zh: "这节经文常被误用为禁止一切道德判断。然而根据上下文（第6节叫人分辨猪和狗，15节叫人防备假先知），耶稣禁止的是'伪善的审判'（Hypocritical Judgment）。'梁木'（Log）是夸张的讽刺，指对自己巨大的盲点视而不见，却对别人微小的过失（刺）吹毛求疵。这是为了恢复视觉的清晰，而非禁止帮助别人。",
                                content_en: "Often misused to ban all moral judgment. Context (v6, v15) shows Jesus forbids 'hypocritical judgment'. 'Log' is hyperbole for ignoring one's own massive blind spots while nitpicking others' specks. The goal is restored vision to actually help, not to ignore sin."
                            },
                            devotional: {
                                title: "你是眼科医生还是法官？(Optometrist or Judge?)",
                                content_zh: "当你看到弟兄眼中有刺时，你的第一反应是审判（Judge）还是医治（Heal）？耶稣希望我们成为能够帮助别人取刺的'眼科医生'。但前提是，你必须先在手术台前处理掉阻碍视线的梁木——你自己的骄傲、苦毒或同样的罪。只有谦卑的罪人才能帮助另一个罪人。",
                                content_en: "When you see a speck, is your instinct to judge or heal? Jesus wants us to be 'optometrists' who help remove specks. But first, you must remove the log—your pride or bitterness—on the operating table. Only a humbled sinner can help another sinner."
                            }
                        },
                        {
                            ref: "7:6",
                            text_zh: "不要把圣物给狗，也不要把你们的珍珠丢在猪前...",
                            text_en: "Do not give dogs what is holy, and do not throw your pearls before pigs...",
                            academic: {
                                title: "辨识力 (Discernment) 的平衡",
                                content_zh: "这是一个交叉结构（Chiasmus）。'圣物'可能指祭肉。在犹太背景中，狗和猪是不洁净的动物。这是一种必要的平衡：虽然我们不应论断（1-5节），但也绝不能天真（6节）。我们需要分辨谁是那些不仅不领受真理，反而会转过来践踏真理并攻击传讲者的人。",
                                content_en: "A necessary balance: while we must not judge hypocritically (v1-5), we must not be naive (v6). 'Holy things' likely refers to sacrificial meat. We need discernment to identify those who not only reject truth but will trample it and attack the messenger."
                            },
                            devotional: {
                                title: "珍惜你的珍珠 (Cherish Your Pearls)",
                                content_zh: "神希望我们有爱心，但也希望我们有智慧。有些深刻的属灵经历、真理或见证（珍珠），并不适合分享给那些只会嘲笑、践踏或攻击的人（猪/狗）。保护好神给你的珍宝，不要让它被轻慢。智慧在于知道何时开口分享，何时保持神圣的沉默。",
                                content_en: "God wants us to be loving, but also wise. Some deep spiritual experiences or truths (pearls) are not meant for those who only mock or attack (pigs/dogs). Protect the treasures God gives you. Wisdom is knowing when to speak and when to keep holy silence."
                            }
                        }
                    ]
                },
                {
                    id: "asking",
                    title: "贰 · 祈求与黄金律 (7:7-12)",
                    title_en: "Ask, Seek, Knock & The Golden Rule",
                    desc: "天父的良善与主动的爱 | Father's Goodness & Active Love",
                    verses: [
                        {
                            ref: "7:7-11",
                            text_zh: "你们祈求，就给你们...你们虽然不好，尚且知道拿好东西给儿女，何况你们在天上的父...",
                            text_en: "Ask, and it will be given to you... If you then, who are evil, know how to give good gifts to your children, how much more will your Father...",
                            academic: {
                                title: "从轻到重的辩论 (Qal Wahomer)",
                                content_zh: "耶稣再次使用'从轻到重'的拉比辩论法。如果有罪的人类父母都有天然的良善（拿饼给孩子而不是石头），那么那位完美的天父岂不更会将'好东西'（路加福音11章指明是'圣灵'）赐给求祂的人吗？这是对祷告蒙垂听的逻辑确据。",
                                content_en: "Jesus uses the 'lesser to greater' argument again. If sinful human parents have natural benevolence (giving bread, not stones), how much more will the perfect Father give 'good things' (Luke 11 clarifies as 'Holy Spirit')? A logical assurance for prayer."
                            },
                            devotional: {
                                title: "持续的叩门 (Persistent Knocking)",
                                content_zh: "希腊文的祈求、寻找、叩门都是现在时态的命令语气（Present Imperative），意味着'持续不断地求'。很多时候我们没有得着，是因为我们在这场属灵的捉迷藏中太早放弃了。神不仅想给我们要的东西，更想在'寻找'的过程中把祂自己给我们。",
                                content_en: "The Greek verbs are present imperatives: 'Keep asking, keep seeking, keep knocking'. We often miss out because we quit too early in this spiritual hide-and-seek. God wants to give us Himself in the process of seeking, not just the object we ask for."
                            }
                        },
                        {
                            ref: "7:12",
                            text_zh: "所以，无论何事，你们愿意人怎样待你们，你们也要怎样待人...",
                            text_en: "So whatever you wish that others would do to you, do also to them...",
                            academic: {
                                title: "黄金律的主动性 (The Active Golden Rule)",
                                content_zh: "这是律法和先知的总纲。拉比希勒尔（Hillel）曾教导'白银律'：'己所不欲，勿施于人'（消极的不伤害）。耶稣将其转化为积极的主动语态：'己所欲，施于人'。这不是仅仅避免作恶，而是创造性地去爱，去主动行善。",
                                content_en: "Rabbi Hillel taught the 'Silver Rule': 'Do NOT do to others what you hate' (passive restraint). Jesus transforms it into the active voice: 'Do to others what you wish...' It's not just avoiding harm, but creatively and proactively initiating love."
                            },
                            devotional: {
                                title: "主动去爱 (Proactive Love)",
                                content_zh: "我们常等待别人先对我们友善、先道歉、先帮助我们。黄金律挑战我们打破这种被动。既然你渴望被理解，就先去理解人；既然你渴望被宽恕，就先去宽恕人。不要做那个等待回声的人，要做那个发出声音的人。",
                                content_en: "We often wait for others to be kind first. The Golden Rule challenges this passivity. If you crave understanding, understand others first. Don't wait for the echo; be the voice. Initiate the love you wish to receive."
                            }
                        }
                    ]
                },
                {
                    id: "two-ways",
                    title: "叁 · 窄门与假先知 (7:13-23)",
                    title_en: "The Narrow Gate & False Prophets",
                    desc: "两条路与两种树 | Two Ways & Two Trees",
                    verses: [
                        {
                            ref: "7:13-14",
                            text_zh: "你们要进窄门...引到永生，那门是窄的，路是小的，找着的人也少。",
                            text_en: "Enter by the narrow gate... For the gate is narrow and the way is hard that leads to life, and those who find it are few.",
                            academic: {
                                title: "反文化的路径 (Counter-Cultural Path)",
                                content_zh: "'窄'（Stene）意味着受限、受压。'小'（Thlimmene）意为被挤压的路径。这表明天国的道路与主流文化（宽门、大路）是背道而驰的。大众的认可往往是错误的标志。这不是关于精英主义，而是关于跟随耶稣必须付出的代价和舍己。",
                                content_en: "'Narrow' implies restricted; 'hard' means pressed/compressed. The Kingdom path is inherently counter-cultural. Popularity is often a sign of the wrong path. It's not about elitism, but the cost of discipleship and self-denial required to follow Jesus."
                            },
                            devotional: {
                                title: "拥抱'被挤压'的路 (Embracing the Compressed Way)",
                                content_zh: "我们天然喜欢舒适和宽敞。但耶稣应许的是一条'受压'的路。当你的信仰让你在职场、家庭或文化中感到格格不入、受到挤压时，不要惊讶，这证明你走对了。宽路虽然拥挤热闹，但终点是灭亡；窄路虽然孤单，但每一步都有主的脚踪。",
                                content_en: "We naturally love comfort. But Jesus promises a 'compressed' way. When faith makes you feel squeezed or out of place in culture, take heart—it proves you're on the right path. The broad road is crowded but fatal; the narrow road is lonely but paved with His footprints."
                            }
                        },
                        {
                            ref: "7:21-23",
                            text_zh: "凡称呼我'主啊，主啊'的人不能都进天国...我从来不认识你们...",
                            text_en: "Not everyone who says to me, 'Lord, Lord,' will enter the kingdom of heaven... I never knew you...",
                            academic: {
                                title: "口头认信 vs 关系性认识 (Profession vs Relation)",
                                content_zh: "这可能是整本圣经中最可怕的经文。这些人不仅有正确的认信（称呼'主啊'），甚至有惊人的事工（赶鬼、行异能）。但他们缺失了最关键的——'认识'（Ginosko）。这里的认识指盟约中的亲密关系（如同夫妻）。'作恶的人'原文指'无法无天'（Anomia），即在神的关系之外独立运作。",
                                content_en: "Perhaps the scariest verse. They had correct confession ('Lord') and amazing ministry (miracles), but lacked 'knowing' (Ginosko - covenant intimacy). 'Workers of lawlessness' implies they operated independently of God's will, despite their religious activity."
                            },
                            devotional: {
                                title: "关系的亲密性 (Intimacy over Activity)",
                                content_zh: "你可以忙碌于教会事工，讲道、赶鬼、行异能，却完全不认识主。神在乎的不是我们为他'做'了多少（Doing），而是我们与他'是'什么关系（Being）。不要用忙碌的事工代替了与主在隐秘处的亲密相交。主最想听到的不是'我为你做了什么'，而是'我爱你'。",
                                content_en: "You can be busy with ministry, yet not know the Lord. God cares less about what we 'do' for Him than who we 'are' with Him. Do not substitute busy service for intimate communion. The Lord values 'I love You' more than 'I did this for You'."
                            }
                        }
                    ]
                },
                {
                    id: "foundations",
                    title: "肆 · 两种根基 (7:24-27)",
                    title_en: "The Two Foundations",
                    desc: "聪明人与无知人 | The Wise & The Foolish",
                    verses: [
                        {
                            ref: "7:24-27",
                            text_zh: "凡听见我这话就去行的...盖在磐石上...凡听见我这话不去行的...盖在沙土上...",
                            text_en: "Everyone then who hears these words of mine and does them... on the rock... Everyone who hears... and does not do them... on the sand...",
                            academic: {
                                title: "听道与行道的二元论",
                                content_zh: "这个比喻的重点在于：两所房子在风暴来临前看起来是一样的。唯一的区别在于看不见的'根基'。'磐石'在犹太传统中常指圣殿的基石，这里指耶稣的教导。'无知'（Moros）并非指智商低，而是指道德上的迟钝——听了却不行动。风暴（审判/试炼）是不可避免的，它会揭露一切工程的真相。",
                                content_en: "The houses look identical until the storm. The only difference is the invisible foundation. 'Rock' implies Jesus' teachings. 'Foolish' (Moros) isn't low IQ, but moral dullness—hearing without doing. The storm (judgment/trials) is inevitable and reveals the truth of every structure."
                            },
                            devotional: {
                                title: "你在建造什么？(What Are You Building?)",
                                content_zh: "我们每个人都是建筑师，每天都在用我们的决定建造生命的房子。参加查经班、听道、记笔记，这些都只是在'收集材料'。唯有当你顺服神的话去'行'——去原谅、去施舍、去爱——那时你才是在'打地基'。不要等到风暴来了才开始找根基。",
                                content_en: "We are all builders. Bible studies and sermons are just 'gathering materials'. Only when you obey—forgive, give, love—are you actually 'pouring the foundation'. Don't wait for the storm to start looking for the rock."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all',
            stormActive: false
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-slate-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-slate-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Actions ---
        function toggleStorm() {
            appState.stormActive = !appState.stormActive;
            const container = document.querySelector('.foundation-scene');
            const sandHouse = document.querySelector('.house-sand');
            const rainDrops = document.querySelectorAll('.rain');
            
            if (appState.stormActive) {
                container.classList.add('storm-active');
                // Create rain drops if not exist
                if (rainDrops.length === 0) {
                    for(let i=0; i<20; i++) {
                        let drop = document.createElement('div');
                        drop.className = 'rain';
                        drop.style.left = Math.random() * 100 + '%';
                        drop.style.animationDelay = Math.random() * 0.5 + 's';
                        container.appendChild(drop);
                    }
                }
                setTimeout(() => {
                    if(appState.stormActive) sandHouse.classList.add('collapsed');
                }, 2000);
            } else {
                container.classList.remove('storm-active');
                sandHouse.classList.remove('collapsed');
                // Remove rain
                document.querySelectorAll('.rain').forEach(e => e.remove());
            }
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 animate-fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-slate-100 text-slate-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Conclusion</span>
                            <h2 class="text-3xl font-bold serif text-slate-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-slate-400 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-slate-600 leading-relaxed mb-4 text-lg border-l-4 border-slate-300 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-slate-500 leading-relaxed text-sm italic en-text border-l-4 border-slate-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col items-center text-center transition hover:bg-slate-100 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-slate-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-slate-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-slate-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-slate-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: Two Foundations Simulator -->
                    <div class="lg:col-span-4 bg-slate-800 text-white p-6 rounded-xl shadow-lg flex flex-col relative overflow-hidden">
                         <h3 class="text-xl font-bold mb-1 z-10 text-center text-slate-200">根基模拟器</h3>
                         <p class="text-xs text-slate-400 mb-4 z-10 text-center en-text uppercase tracking-widest">The Foundation Simulator</p>
                         
                         <div class="foundation-scene mb-4" id="scene">
                            <div class="house house-rock"></div>
                            <div class="house house-sand"></div>
                            <div class="base-rock"></div>
                            <div class="base-sand"></div>
                         </div>

                         <div class="flex justify-between items-center text-xs text-slate-300 px-4 mb-4">
                            <div class="text-center">
                                <span class="block font-bold">听道+行道</span>
                                <span class="en-text text-[10px] opacity-70">Hear & Do (Rock)</span>
                            </div>
                            <div class="text-center">
                                <span class="block font-bold">只听道</span>
                                <span class="en-text text-[10px] opacity-70">Hear Only (Sand)</span>
                            </div>
                         </div>
                         
                         <button onclick="toggleStorm()" class="w-full py-2 bg-rose-600 hover:bg-rose-700 rounded-lg text-white font-bold transition shadow-md border border-rose-500">
                            <i class="fas fa-cloud-showers-heavy mr-2"></i> ${appState.stormActive ? '停止风暴 Stop Storm' : '测试风暴 Test Storm'}
                         </button>
                    </div>
                </div>

                <!-- Feature: The Two Trees -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-emerald-100">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-slate-700">
                            <i class="fas fa-tree text-emerald-600 mr-2"></i> 果树识别器
                            <span class="text-sm font-normal text-slate-400 ml-2 en-text">Fruit Inspection (True vs False)</span>
                        </h3>
                        <span class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded">Discernment</span>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Good Tree -->
                        <div class="p-4 bg-emerald-50 rounded-lg border border-emerald-100 flex items-center">
                            <div class="text-4xl text-emerald-600 mr-4"><i class="fas fa-apple-alt"></i></div>
                            <div>
                                <h4 class="font-bold text-emerald-800">好树结好果子 Good Tree</h4>
                                <p class="text-xs text-emerald-700 mt-1">生命的改变、圣灵的果子、遵行天父旨意。</p>
                                <p class="text-[10px] text-emerald-600/70 italic en-text">Transformation, Fruit of Spirit, Doing God's Will.</p>
                            </div>
                        </div>
                        <!-- Bad Tree -->
                        <div class="p-4 bg-rose-50 rounded-lg border border-rose-100 flex items-center">
                            <div class="text-4xl text-rose-600 mr-4"><i class="fas fa-exclamation-triangle"></i></div>
                            <div>
                                <h4 class="font-bold text-rose-800">坏树结坏果子 Bad Tree</h4>
                                <p class="text-xs text-rose-700 mt-1">羊皮下的狼、无法无天、只有恩赐没有生命。</p>
                                <p class="text-[10px] text-rose-600/70 italic en-text">Wolves in sheep's clothing, Lawlessness, Gifts without Life.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#f1f5f9]/95 backdrop-blur py-4 mb-6 border-b border-slate-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-slate-900 serif">逐节研读室 <span class="text-base font-normal text-slate-400 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-slate-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-slate-700 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">全部 All</button>
                            <button onclick="updateFilter('academic')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'academic' ? 'bg-slate-500 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">经文含义 Exegesis</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-emerald-600 text-white font-bold' : 'text-slate-500 hover:bg-slate-100'}">灵修应用 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-slate-600">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-sm text-slate-600 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            // Safety checks
            const academicTitle = verse.academic ? verse.academic.title : "Title Missing";
            const academicContentZh = verse.academic ? verse.academic.content_zh : "Content missing";
            const academicContentEn = verse.academic ? verse.academic.content_en : "Content missing";
            
            const devotionalTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devotionalContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devotionalContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-slate-50 to-white p-5 border-b border-slate-200">
                        <span class="inline-block px-2 py-0.5 bg-slate-200 text-slate-800 text-xs font-bold rounded mb-2 font-mono border border-slate-300">${verse.ref}</span>
                        <p class="text-slate-800 font-serif text-lg leading-relaxed group-hover:text-slate-900 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-slate-500 font-serif text-sm italic en-text border-l-2 border-slate-300 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-slate-200">
                        <!-- Academic -->
                        <div class="p-6 academic-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-slate-500">
                                <i class="fas fa-university mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Exegesis</h4>
                            </div>
                            <h5 class="font-bold text-slate-700 mb-2">${academicTitle}</h5>
                            <p class="text-sm text-slate-600 leading-relaxed text-justify mb-2">${academicContentZh}</p>
                            <p class="text-xs text-slate-400 font-serif italic en-text border-t border-slate-300 pt-2 mt-2">${academicContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'academic' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-emerald-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-emerald-800 mb-2">${devotionalTitle}</h5>
                            <p class="text-sm text-emerald-900/80 leading-relaxed text-justify mb-2">${devotionalContentZh}</p>
                            <p class="text-xs text-emerald-700/70 font-serif italic en-text border-t border-emerald-200 pt-2 mt-2">${devotionalContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-slate-800">解经方法论总结</h2>
                        <p class="text-slate-500 en-text">Summary of Exegetical Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-slate-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-slate-500 text-4xl mb-4"><i class="fas fa-book-reader"></i></div>
                            <h3 class="text-xl font-bold text-slate-700 mb-2">权威/经文性解经 (Exegesis)</h3>
                            <p class="text-xs text-slate-400 mb-6 uppercase tracking-wider">Literary & Contextual</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-slate-700 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">识别二元对立结构（Dualism: Two ways, Two trees）。分析拉比辩论法（Qal Wahomer: 从轻到重）。理解犹太习俗（狗与圣物、磐石作为圣殿根基）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Identifying binary structures. Analyzing rabbinic arguments. Understanding Jewish customs (dogs, foundation stones).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-slate-700 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">不要孤立地解释“不要论断”，要结合第6节的“分辨”。区分“口头认信”与“真实顺服”的圣经定义。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Don't interpret 'Judge not' in isolation; couple with discernment (v6). Distinguish between verbal confession and biblical obedience.</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-emerald-500 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-emerald-500 text-4xl mb-4"><i class="fas fa-pray"></i></div>
                            <h3 class="text-xl font-bold text-emerald-800 mb-2">灵修/应用性解经 (Devotional)</h3>
                            <p class="text-xs text-emerald-600/70 mb-6 uppercase tracking-wider">Decision & Action</p>
                            
                            <ul class="space-y-4 text-sm text-slate-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-emerald-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 原则 Principles</div>
                                    <div class="mb-1">自我应用优先于应用他人（先去自己眼中的梁木）。将“知道”转化为“认识”（关系）和“行动”（建造）。</div>
                                    <div class="text-xs italic text-slate-400 en-text">Self-application precedes applying to others (remove own log first). Converting 'knowing' into 'relationship' and 'action'.</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-emerald-100 pt-3">
                                    <div class="flex items-center font-bold text-emerald-600 mb-1"><i class="fas fa-check-circle mr-2"></i> 如何运用 How to Apply</div>
                                    <div class="mb-1">面对抉择时，选择那条更难、更窄、更少人走的路。每天问自己：我今天是在收集材料（听道）还是在打地基（行道）？</div>
                                    <div class="text-xs italic text-slate-400 en-text">In decisions, choose the harder, narrower path. Ask daily: Am I gathering materials (hearing) or pouring foundation (doing)?</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>