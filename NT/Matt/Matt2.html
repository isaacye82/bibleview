<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matthew 2: The Star & The Sword | 马太福音第二章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Midnight Star Blue - The Magi */
            --theme-primary: #1e3a8a; 
            /* Royal Gold - The King */
            --theme-accent: #f59e0b;
            /* Danger Red - Herod */
            --theme-dark: #991b1b;
            /* Background */
            --theme-bg: #eff6ff;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #172554;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #bfdbfe;
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px -5px rgba(30, 58, 138, 0.15);
            border-left-color: var(--theme-primary);
        }

        .exegesis-box {
            background-color: #f0f9ff; /* Blue 50 */
            border-left: 3px solid #1e40af; /* Blue 800 */
            color: #1e3a8a;
        }
        
        .devotional-box {
            background-color: #fffbeb; /* Amber 50 */
            border-left: 3px solid #d97706; /* Amber 600 */
            color: #92400e;
        }

        /* Animation */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Star Animation */
        .guiding-star {
            filter: drop-shadow(0 0 10px rgba(253, 224, 71, 0.8));
            animation: float 3s infinite ease-in-out;
        }
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }

        /* Map Path Animation */
        .map-path {
            stroke-dasharray: 10;
            animation: dash 30s linear infinite;
        }
        @keyframes dash {
            to { stroke-dashoffset: -100; }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-blue-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-blue-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-star mr-2 text-yellow-500"></i> 马太福音 2章</span>
                        <span class="text-xs text-blue-800 en-text font-normal ml-8">Matthew Chapter 2</span>
                    </span>
                </div>
                <div class="flex space-x-8 items-center">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center">
                        全景概览 <br><span class="text-[10px] uppercase opacity-70 en-text">Overview</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-stone-500 hover:text-blue-700 text-center">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-stone-500 hover:text-blue-700 text-center">
                        方法论 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-stone-900 text-stone-400 mt-auto border-t-4 border-blue-600">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-blue-200 mb-1">"我们在东方看见他的星，特来拜他"</p>
            <p class="text-sm italic text-stone-500 mb-2 en-text">"For we saw his star when it rose and have come to worship him."</p>
            <p class="text-xs opacity-70">马太福音第二章中英对照研经报告 | The Star & The Sword</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "星光指引与逃亡的君王",
                title_en: "Starlight Guidance and the Exiled King",
                summary_zh: "马太福音第二章充满了戏剧性的对比：外邦的博士长途跋涉来朝拜，而犹太的王希律却企图杀害这位新生王。这一章通过四个具体的地理移动（伯利恒、埃及、拉玛、拿撒勒），展示了旧约预言如何在耶稣身上奇妙应验。耶稣不仅是以色列的王，更是全人类的救主（博士的朝拜），同时也是那位受苦的仆人（逃亡与屠杀）。",
                summary_en: "Matthew 2 is filled with dramatic contrasts: Gentile Magi travel far to worship, while the Jewish King Herod plots to kill the newborn King. Through four geographic movements (Bethlehem, Egypt, Ramah, Nazareth), the chapter shows the miraculous fulfillment of OT prophecies. Jesus is revealed as King of Israel, Savior of the nations (Magi's worship), and the Suffering Servant (exile and massacre).",
                concepts: [
                    { title: "博士", title_en: "Magi", greek: "Magoi", color: "text-blue-600", desc_zh: "东方（可能是波斯或巴比伦）的天文学家或智者。", desc_en: "Astronomers or wise men from the East (Persia/Babylon)." },
                    { title: "朝拜", title_en: "Worship", greek: "Proskuneō", color: "text-yellow-600", desc_zh: "俯伏在地，表达对君王或神的最高敬意。", desc_en: "To fall down/prostrate in homage to a king or God." },
                    { title: "应验", title_en: "Fulfill", greek: "Plēroō", color: "text-green-600", desc_zh: "使充满、完成。马太用此强调历史的预定性。", desc_en: "To make full/complete. Matthew emphasizes predestined history." }
                ]
            },
            sections: [
                {
                    id: "magi",
                    title: "壹 · 博士的寻找与希律的不安 (2:1-12)",
                    title_en: "The Quest of the Magi and Herod's Trouble",
                    desc: "外邦人的光 | Light to the Gentiles",
                    verses: [
                        {
                            ref: "2:1-3",
                            text_zh: "...有几个博士从东方来到耶路撒冷，说：‘那生下来作犹太人之王的在哪里？我们在东方看见他的星，特来拜他。’希律王听见了，就心里不安...",
                            text_en: "...wise men from the East came to Jerusalem, saying, 'Where is he who has been born king of the Jews? For we saw his star... and have come to worship him.' When Herod the king heard this, he was troubled...",
                            exegesis: {
                                title: "两个君王的对立 (Two Kings Conflict)",
                                content_zh: "“博士”（Magoi）可能受丹尼尔在巴比伦遗留的影响，关注犹太人的星象。他们称耶稣为“生下来作王”的，而希律是“被任命”的王（Edomite/Idumean血统，罗马分封）。这是政权合法性的直接冲突。“不安”（tarassō）表明希律感到王位受威胁，全耶路撒冷也因惧怕政治动荡而不安。",
                                content_en: "The 'Magi' likely knew Jewish prophecy via Daniel's legacy in Babylon. They call Jesus 'born king,' contrasting Herod, the 'appointed king' (Idumean, Roman vassal). This is a conflict of legitimacy. 'Troubled' (tarassō) reveals Herod's paranoia, and Jerusalem feared political instability."
                            },
                            devotional: {
                                title: "你愿意付多大代价去寻找？(The Cost of Seeking)",
                                content_zh: "祭司长和文士知道弥赛亚生在伯利恒（只有几英里远），却没有人动身去寻找。相反，外邦的博士走了几个月。这不仅是距离的问题，更是心的问题。拥有正确的圣经知识如果不产生行动，是毫无益处的。神往往向那些虽无知识但有饥渴之心的人显现。",
                                content_en: "The priests knew the Messiah was in Bethlehem (miles away) but didn't move. The Gentile Magi traveled months. It's not about distance, but heart. Correct theology without action is useless. God often reveals Himself to those with little knowledge but hungry hearts."
                            }
                        },
                        {
                            ref: "2:11",
                            text_zh: "进了房子，看见小孩子和他母亲马利亚，就俯伏拜那小孩子，揭开宝盒，拿黄金、乳香、没药为礼物献给他。",
                            text_en: "And going into the house, they saw the child with Mary his mother, and they fell down and worshiped him. Then, opening their treasures, they offered him gifts, gold and frankincense and myrrh.",
                            exegesis: {
                                title: "礼物的预表 (Typology of Gifts)",
                                content_zh: "这是君王的尊荣。“俯伏拜”（Proskuneō）通常只用于神或君王。黄金象征王权；乳香象征神性（祭司职分）；没药象征受苦与死亡（用于膏遗体）。这些外邦人不仅带来了财富（可能资助了去埃及的旅费），更在无意中预言了耶稣的一生。",
                                content_en: "Royal honor. 'Worship' implies divine/royal reverence. Gold symbolizes Kingship; Frankincense symbolizes Deity/Priesthood; Myrrh symbolizes Suffering/Death (embalming). These Gentiles brought provision (for Egypt) and unwittingly prophesied Jesus' life mission."
                            },
                            devotional: { // FIXED: Added missing devotional content
                                title: "献上最好的 (Give Your Best)",
                                content_zh: "博士们没有空手而来，他们打开宝盒，献上了当时最昂贵的礼物。真正的敬拜不仅仅是唱诗或言语，而是包含实质性的奉献。黄金代表我们的财富，乳香代表我们的敬虔，没药代表我们愿意为主受苦的心志。今天，你宝盒里最好的是什么？你愿意把它献给耶稣吗？",
                                content_en: "The Magi didn't come empty-handed. They opened their treasures and gave the best. True worship isn't just words; it involves substance. Gold represents our wealth; Frankincense, our devotion; Myrrh, our willingness to suffer. What is the best thing in your treasure box today? Will you offer it to Jesus?"
                            }
                        }
                    ]
                },
                {
                    id: "egypt",
                    title: "贰 · 逃往埃及与屠杀婴孩 (2:13-18)",
                    title_en: "Flight to Egypt and the Massacre",
                    desc: "新的出埃及 | The New Exodus",
                    verses: [
                        {
                            ref: "2:13-15",
                            text_zh: "...起来！带着小孩子同他母亲逃往埃及...这是要应验主藉先知所说的话，说：‘我从埃及召出我的儿子来。’",
                            text_en: "...Rise, take the child and his mother, and flee to Egypt... This was to fulfill what the Lord had spoken by the prophet, 'Out of Egypt I called my son.'",
                            exegesis: {
                                title: "预表性解经 (Typological Fulfillment)",
                                content_zh: "马太引用何西阿书11:1。原经文指以色列民族出埃及的历史。马太将其应用在耶稣身上，表明耶稣是“真以色列”。以色列作为一个民族在旷野失败了，但耶稣作为神的儿子将重走这道路并得胜。这就是“预表”（Typology）：历史模式的重演与升华。",
                                content_en: "Matthew quotes Hosea 11:1, originally about Israel's exodus. Matthew applies it to Jesus, presenting Him as the 'True Israel.' Where the nation failed in the wilderness, the Son will succeed. This is 'Typology': the recapitulation and elevation of historical patterns."
                            },
                            devotional: {
                                title: "当神让你绕道而行 (When God Says Detour)",
                                content_zh: "神没有选择直接消灭希律，而是让约瑟一家连夜逃亡。有时神的保护看起来像是“挫折”或“绕路”。如果神让你离开舒适区，进入未知的“埃及”，不要惊慌。那是祂保存你生命、预备你未来的方式。顺服不仅是行动，更是对神时间表的信任。",
                                content_en: "God didn't smite Herod; He told Joseph to flee. Sometimes divine protection looks like a 'detour' or 'setback.' If God moves you from comfort to an unknown 'Egypt,' don't panic. It's His way of preserving and preparing you. Obedience is trusting His timing."
                            }
                        },
                        {
                            ref: "2:16-18",
                            text_zh: "希律见自己被博士愚弄，就大大发怒...将伯利恒...两岁以里的男孩把他们都杀尽了...在拉玛听见号啕大哭的声音...",
                            text_en: "Then Herod... was furiously angry, and he sent and killed all the male children in Bethlehem... 'A voice was heard in Ramah, weeping and loud lamentation...'",
                            exegesis: {
                                title: "拉玛的哭声 (Weeping at Ramah)",
                                content_zh: "马太引用耶利米书31:15。拉玛是犹太人被掳巴比伦时的集合点，拉结（以色列之母）被拟人化地描述为在哭泣。这里，马太将希律的暴行与被掳的悲剧相连。这显示了弥赛亚降生进入了一个充满敌意和痛苦的世界，祂分担了百姓的苦难。",
                                content_en: "Matthew quotes Jeremiah 31:15. Ramah was the staging point for the Babylonian exile. Rachel is personified weeping. Matthew connects Herod's atrocity with the tragedy of Exile. It shows the Messiah entering a hostile, painful world, participating in His people's suffering."
                            },
                            devotional: { // FIXED: Added missing devotional content
                                title: "苦难中的眼泪 (Tears in Suffering)",
                                content_zh: "为什么神允许无辜的婴孩被杀？这是圣经中最难解的痛。但经文告诉我们，神听见了拉玛的哭声。即使在看起来毫无意义的悲剧中，神也没有缺席。耶稣的降生不是为了消除所有的苦难，而是为了通过十字架，最终战胜制造苦难的罪恶权势。你的眼泪，神都记在皮袋里。",
                                content_en: "Why did God allow the massacre? It's a painful mystery. But Scripture says God heard the weeping. Even in senseless tragedy, God is not absent. Jesus didn't come to instantly erase suffering, but to defeat the sin that causes it via the Cross. God keeps your tears in His bottle."
                            }
                        }
                    ]
                },
                {
                    id: "nazareth",
                    title: "叁 · 归回拿撒勒 (2:19-23)",
                    title_en: "Return to Nazareth",
                    desc: "卑微的开始 | Humble Beginnings",
                    verses: [
                        {
                            ref: "2:23",
                            text_zh: "到了一座城，名叫拿撒勒，就住在那里。这是要应验先知所说，他将称为拿撒勒人的话了。",
                            text_en: "And he went and lived in a city called Nazareth, so that what was spoken by the prophets might be fulfilled, that he would be called a Nazarene.",
                            exegesis: {
                                title: "拿撒勒人的谜题 (The Nazarene Enigma)",
                                content_zh: "旧约并没有一处经文直接说“弥赛亚将称为拿撒勒人”。这可能是一个双关语：1. *Netzer*（枝子，赛11:1），指大卫的苗裔。2. 指拿撒勒是一个被藐视的小地方（约1:46）。马太可能是在总结众先知的信息：弥赛亚将是一位卑微的、被藐视的“枝子”。",
                                content_en: "No single OT verse says this directly. It's likely a wordplay: 1. *Netzer* (Branch, Isa 11:1), refering to Davidic shoot. 2. Nazareth as a despised place (John 1:46). Matthew summarizes the prophets: The Messiah will be a humble, despised 'Branch'."
                            },
                            devotional: {
                                title: "神在卑微处工作 (God Works in the Lowly)",
                                content_zh: "耶稣被称为“拿撒勒人”，这在当时是一个带有轻视意味的标签。神选择了最不起眼的地方作为祂儿子的成长地。不要因为你的出身、环境或目前的地位卑微而感到羞耻。神最伟大的工作往往是在“拿撒勒”——那些被世界遗忘的角落——悄悄开始的。",
                                content_en: "Jesus carried the label 'Nazarene,' a term of contempt. God chose an obscure place for His Son. Don't be ashamed of humble beginnings or low status. God's greatest works often start quietly in 'Nazareth'—the corners forgotten by the world."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all'
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-stone-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-stone-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-blue-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-blue-100 text-blue-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Theme</span>
                            <h2 class="text-3xl font-bold serif text-blue-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-stone-500 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-stone-700 leading-relaxed mb-4 text-lg border-l-4 border-blue-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-stone-500 leading-relaxed text-sm italic en-text border-l-4 border-stone-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200 flex flex-col items-center text-center transition hover:bg-blue-100 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-stone-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-stone-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-stone-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-stone-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: The Magi's Journey Map -->
                    <div class="lg:col-span-4 bg-gradient-to-br from-blue-900 to-stone-900 text-white p-8 rounded-xl shadow-lg flex flex-col justify-center items-center relative overflow-hidden">
                         <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"></div>
                         
                         <h3 class="text-xl font-bold mb-1 z-10 text-center text-yellow-300">博士的旅程</h3>
                         <p class="text-xs text-blue-200 mb-6 z-10 en-text uppercase tracking-widest border-b border-yellow-500 pb-2">Journey of the Magi</p>
                         
                         <div class="relative w-full h-48 z-10 flex flex-col items-center">
                            <!-- Star -->
                            <i class="fas fa-star text-4xl text-yellow-400 guiding-star absolute top-0"></i>
                            
                            <!-- Path Visualization -->
                            <div class="mt-12 w-full flex justify-between items-center px-4 relative">
                                <svg class="absolute top-1/2 left-0 w-full h-10 -translate-y-1/2" style="z-index: 0;">
                                    <path d="M 20 20 Q 100 50 180 20 T 300 20" stroke="rgba(255,255,255,0.3)" stroke-width="2" fill="none" class="map-path"/>
                                </svg>
                                
                                <div class="flex flex-col items-center z-10">
                                    <i class="fas fa-mosque text-stone-400"></i>
                                    <span class="text-[9px] mt-1">East</span>
                                </div>
                                <div class="flex flex-col items-center z-10">
                                    <i class="fas fa-city text-red-400"></i>
                                    <span class="text-[9px] mt-1">Jerusalem</span>
                                </div>
                                <div class="flex flex-col items-center z-10">
                                    <i class="fas fa-dungeon text-yellow-200"></i>
                                    <span class="text-[9px] mt-1">Bethlehem</span>
                                </div>
                            </div>
                            
                            <div class="mt-8 text-center text-xs text-blue-200 italic">
                                "We saw his star..."
                            </div>
                         </div>
                    </div>
                </div>

                <!-- Concept Section: Prophecies Fulfilled -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-blue-100 fade-in">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-stone-700">
                            <i class="fas fa-scroll text-blue-600 mr-2"></i> 应验的预言清单 
                            <span class="text-sm font-normal text-stone-400 ml-2 en-text">Prophecies Fulfilled (Matthew 2)</span>
                        </h3>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="p-4 bg-blue-50 rounded border-l-4 border-blue-500">
                            <div class="text-xs text-blue-400 uppercase font-bold mb-1">Place</div>
                            <h4 class="font-bold text-blue-900">Bethlehem</h4>
                            <p class="text-xs text-stone-500 mt-1">Micah 5:2</p>
                            <p class="text-xs text-stone-600 italic mt-2">"Ruler... shepherd my people"</p>
                        </div>
                        <div class="p-4 bg-red-50 rounded border-l-4 border-red-500">
                            <div class="text-xs text-red-400 uppercase font-bold mb-1">Sorrow</div>
                            <h4 class="font-bold text-red-900">Ramah Weeping</h4>
                            <p class="text-xs text-stone-500 mt-1">Jeremiah 31:15</p>
                            <p class="text-xs text-stone-600 italic mt-2">"Rachel weeping for children"</p>
                        </div>
                        <div class="p-4 bg-green-50 rounded border-l-4 border-green-500">
                            <div class="text-xs text-green-400 uppercase font-bold mb-1">Identity</div>
                            <h4 class="font-bold text-green-900">Nazarene</h4>
                            <p class="text-xs text-stone-500 mt-1">Prophets (General)</p>
                            <p class="text-xs text-stone-600 italic mt-2">"He shall be called a Nazarene"</p>
                        </div>
                    </div>
                    <p class="text-center text-xs text-stone-400 mt-4 italic">每一个地理位置的变动都是为了应验神的话。Every move fulfilled God's Word.</p>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#eff6ff]/95 backdrop-blur py-4 mb-6 border-b border-blue-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-blue-900 serif">逐节研读室 <span class="text-base font-normal text-blue-700 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-blue-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-blue-600 text-white font-bold' : 'text-stone-500 hover:bg-stone-100'}">全部 All</button>
                            <button onclick="updateFilter('exegesis')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'exegesis' ? 'bg-blue-800 text-white font-bold' : 'text-stone-500 hover:bg-stone-100'}">经文含义 Meaning</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-amber-600 text-white font-bold' : 'text-stone-500 hover:bg-stone-100'}">灵修 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16 fade-in">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-blue-600">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-blue-900">${section.title}</h3>
                                <p class="text-sm text-blue-700 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            // Correctly access exegesis and devotional fields
            const exeTitle = verse.exegesis ? verse.exegesis.title : "Title Missing";
            const exeContentZh = verse.exegesis ? verse.exegesis.content_zh : "Content missing";
            const exeContentEn = verse.exegesis ? verse.exegesis.content_en : "Content missing";
            
            const devTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-blue-50 to-white p-5 border-b border-blue-100">
                        <span class="inline-block px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-bold rounded mb-2 font-mono border border-blue-200">${verse.ref}</span>
                        <p class="text-stone-800 font-serif text-lg leading-relaxed group-hover:text-blue-800 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-stone-500 font-serif text-sm italic en-text border-l-2 border-blue-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-stone-200">
                        <!-- Exegesis -->
                        <div class="p-6 exegesis-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-blue-800">
                                <i class="fas fa-book-open mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Scriptural Meaning</h4>
                            </div>
                            <h5 class="font-bold text-stone-800 mb-2">${exeTitle}</h5>
                            <p class="text-sm text-stone-700 leading-relaxed text-justify mb-2">${exeContentZh}</p>
                            <p class="text-xs text-blue-800/70 font-serif italic en-text border-t border-blue-200 pt-2 mt-2">${exeContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'exegesis' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-amber-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-amber-900 mb-2">${devTitle}</h5>
                            <p class="text-sm text-amber-900/90 leading-relaxed text-justify mb-2">${devContentZh}</p>
                            <p class="text-xs text-amber-800/70 font-serif italic en-text border-t border-amber-200 pt-2 mt-2">${devContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto fade-in">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-blue-900">解经方法论总结</h2>
                        <p class="text-stone-500 en-text">Summary of Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-blue-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-blue-600 text-4xl mb-4"><i class="fas fa-search"></i></div>
                            <h3 class="text-xl font-bold text-stone-700 mb-2">权威/经文含义 (Scriptural Meaning)</h3>
                            <p class="text-xs text-stone-400 mb-6 uppercase tracking-wider">Prophecy & History</p>
                            
                            <ul class="space-y-4 text-sm text-stone-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-stone-800 mb-1"><i class="fas fa-check-circle mr-2 text-blue-500"></i> 原则 Principles</div>
                                    <div class="mb-1">追踪旧约预表（Typology），如“出埃及”；分析地理位置的神学意义（伯利恒、拉玛）；对比政治背景（希律 vs 耶稣）。</div>
                                    <div class="text-xs italic text-stone-400 en-text">Tracing OT Typology (Exodus); analyzing theological geography (Bethlehem, Ramah); contrasting political contexts (Herod vs Jesus).</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-slate-200 pt-3">
                                    <div class="flex items-center font-bold text-stone-800 mb-1"><i class="fas fa-check-circle mr-2 text-blue-500"></i> 运用 Application</div>
                                    <div class="mb-1">确立耶稣作为“真以色列”和“受苦仆人”的身份；理解神对历史的主权掌管。</div>
                                    <div class="text-xs italic text-stone-400 en-text">Establishing Jesus as 'True Israel' and 'Suffering Servant'; understanding God's sovereign control over history.</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-amber-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-amber-600 text-4xl mb-4"><i class="fas fa-praying-hands"></i></div>
                            <h3 class="text-xl font-bold text-amber-800 mb-2">灵修/应用扩展 (Devotional)</h3>
                            <p class="text-xs text-amber-600/70 mb-6 uppercase tracking-wider">Seeking & Guidance</p>
                            
                            <ul class="space-y-4 text-sm text-stone-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-amber-800 mb-1"><i class="fas fa-check-circle mr-2 text-amber-500"></i> 原则 Principles</div>
                                    <div class="mb-1">效法博士的寻求与奉献；学习约瑟在危机中的顺服；在人生的“绕道”中信靠神的带领。</div>
                                    <div class="text-xs italic text-stone-400 en-text">Imitating the Magi's seeking and giving; learning Joseph's obedience in crisis; trusting God's leading in life's 'detours'.</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-amber-100 pt-3">
                                    <div class="flex items-center font-bold text-amber-800 mb-1"><i class="fas fa-check-circle mr-2 text-amber-500"></i> 运用 Application</div>
                                    <div class="mb-1">付代价去寻找神；在卑微的起点（拿撒勒）看到神的恩典。</div>
                                    <div class="text-xs italic text-stone-400 en-text">Paying the price to seek God; seeing grace in humble beginnings (Nazareth).</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>