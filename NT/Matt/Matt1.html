<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matthew 1: The King's Lineage | 马太福音第一章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Royal Purple - The King */
            --theme-primary: #581c87; 
            /* Covenant Gold - Promises */
            --theme-accent: #d97706;
            /* Night Blue - Dreams */
            --theme-dark: #1e1b4b;
            /* Background */
            --theme-bg: #fdf4ff;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: #3b0764;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Navigation Styling */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* Card Styling */
        .verse-card {
            background-color: white;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            border: 1px solid #e9d5ff;
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px -5px rgba(88, 28, 135, 0.15);
            border-left-color: var(--theme-primary);
        }

        .exegesis-box {
            background-color: #faf5ff; /* Purple 50 */
            border-left: 3px solid #6b21a8; /* Purple 700 */
            color: #581c87;
        }
        
        .devotional-box {
            background-color: #fffbeb; /* Amber 50 */
            border-left: 3px solid #d97706; /* Amber 600 */
            color: #92400e;
        }

        /* Animation */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Genealogy Step Animation */
        .step-appear {
            opacity: 0;
            transform: translateX(-20px);
            animation: slideIn 0.8s ease-out forwards;
        }
        @keyframes slideIn {
            to { opacity: 1; transform: translateX(0); }
        }

        /* Star Twinkle */
        .star {
            animation: twinkle 3s infinite ease-in-out;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.2); }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-purple-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-purple-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-crown mr-2 text-purple-600"></i> 马太福音 1章</span>
                        <span class="text-xs text-purple-800 en-text font-normal ml-8">Matthew Chapter 1</span>
                    </span>
                </div>
                <div class="flex space-x-8 items-center">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-2 py-2 text-sm text-center">
                        全景概览 <br><span class="text-[10px] uppercase opacity-70 en-text">Overview</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-2 py-2 text-sm text-stone-500 hover:text-purple-700 text-center">
                        逐节研读 <br><span class="text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-2 py-2 text-sm text-stone-500 hover:text-purple-700 text-center">
                        方法论 <br><span class="text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-stone-900 text-stone-400 mt-auto border-t-4 border-purple-600">
        <div class="max-w-7xl mx-auto py-8 px-4 text-center">
            <p class="text-lg font-serif italic text-purple-200 mb-1">"人要称他的名为以马内利"</p>
            <p class="text-sm italic text-stone-500 mb-2 en-text">"They shall call his name Immanuel."</p>
            <p class="text-xs opacity-70">马太福音第一章中英对照研经报告 | The King's Lineage</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "君王的家谱与神迹的降生",
                title_en: "Genealogy of the King and the Miraculous Birth",
                summary_zh: "马太福音第一章通过一份精心设计的家谱，将耶稣基督即“弥赛亚”的身份根植于以色列的历史中。它连接了亚伯拉罕（万国的福）与大卫（永恒的王权），并以被掳的悲剧作为转折点，指向基督的救赎。下半章叙述了耶稣超自然的降生，强调了约瑟顺服的义，以及“以马内利”（神与我们同在）这一核心神学主题。",
                summary_en: "Matthew 1 roots the identity of Jesus Christ, the Messiah, in Israel's history through a carefully crafted genealogy. It connects Abraham (blessing to nations) and David (eternal kingship), using the Exile as a pivot point towards redemption. The latter half recounts the supernatural birth, highlighting Joseph's righteous obedience and the central theological theme of 'Immanuel' (God with us).",
                concepts: [
                    { title: "家谱", title_en: "Genealogy", greek: "Biblos Geneseōs", color: "text-purple-600", desc_zh: "字面意为“起源之书”。确立耶稣合法的王室继承权。", desc_en: "Book of origins/genesis. Establishes Jesus' legal right to the throne." },
                    { title: "以马内利", title_en: "Immanuel", greek: "Emmanouēl", color: "text-amber-600", desc_zh: "神与我们同在。这是整卷福音书的首尾呼应（太28:20）。", desc_en: "God with us. An inclusio framing the entire Gospel (Matt 28:20)." },
                    { title: "义人", title_en: "Just Man", greek: "Dikaios", color: "text-stone-600", desc_zh: "指约瑟。不仅是守法，更是有怜悯心肠的义。", desc_en: "Refers to Joseph. Not just legalistic, but compassionate righteousness." }
                ]
            },
            sections: [
                {
                    id: "genealogy",
                    title: "壹 · 历史的洪流：三个十四代 (1:1-17)",
                    title_en: "The Flow of History: Three Sets of Fourteen",
                    desc: "恩典在破碎历史中的延续 | Grace in Broken History",
                    verses: [
                        {
                            ref: "1:1",
                            text_zh: "亚伯拉罕的后裔，大卫的子孙，耶稣基督的家谱。",
                            text_en: "The book of the genealogy of Jesus Christ, the son of David, the son of Abraham.",
                            exegesis: {
                                title: "弥赛亚的资格 (Messianic Credentials)",
                                content_zh: "马太开宗明义地确立耶稣的法律地位。作为“大卫的子孙”，祂拥有王权的合法继承权；作为“亚伯拉罕的后裔”，祂是应许之子，是万国得福的源头。这份家谱不仅是名单，更是神信实守约的法律文件。",
                                content_en: "Matthew immediately establishes Jesus' legal standing. As 'Son of David,' He holds the legal right to the throne. As 'Son of Abraham,' He is the Child of Promise for all nations. This genealogy is not just a list, but a legal document of God's faithfulness."
                            },
                            devotional: {
                                title: "你的过去定义不了你 (Your Past Doesn't Define You)",
                                content_zh: "家谱中列出了他玛、喇合、路得和拔示巴（乌利亚的妻子）。这些女性中有外邦人、有妓女、有由于通奸进入家谱的。这告诉我们：神的恩典大过人的罪和耻辱。神可以使用破碎的历史编织救赎的挂毯。无论你的家庭背景如何，在基督里你都有新的身份。",
                                content_en: "The list includes Tamar, Rahab, Ruth, and Bathsheba. Gentiles, prostitutes, and adulterous scandals. This tells us: Grace is greater than sin and shame. God weaves redemption through broken history. No matter your background, you have a new identity in Christ."
                            }
                        },
                        {
                            ref: "1:17",
                            text_zh: "这样，从亚伯拉罕到大卫共有十四代...到迁至巴比伦...到基督又是十四代。",
                            text_en: "So all the generations from Abraham to David were fourteen generations... to the deportation to Babylon... to the Christ fourteen generations.",
                            exegesis: {
                                title: "数字的象征 (Gematria of David)",
                                content_zh: "马太有意删减了部分名字以凑成三个十四代。在希伯来语中，“大卫”（DVD）的数值是14（4+6+4）。这种结构不仅便于记忆，更强调历史是围绕着“大卫的王权”展开的：王权的建立、丧失（被掳）和在基督里的终极恢复。",
                                content_en: "Matthew stylizes the list into three fourteens. In Hebrew Gematria, 'David' (DVD) equals 14 (4+6+4). This structure emphasizes history centering on Davidic Kingship: its Establishment, Loss (Exile), and Restoration in Christ."
                            },
                            devotional: {
                                title: "神的时间表 (God's Perfect Timing)",
                                content_zh: "历史看似漫长且充满波折（从辉煌到被掳），但神一直在数算。三个十四代表明神对历史有完美的掌控和计划。当你觉得神迟延时，请记住祂有祂的节奏。祂不仅掌管宏大的救赎历史，也掌管你生命中的每一个季节和转折。",
                                content_en: "History seems long and turbulent (from glory to exile), but God is counting. The three fourteens show His perfect control and plan. When God seems late, remember He has His rhythm. He governs not only grand redemptive history but also every season and turn in your life."
                            }
                        }
                    ]
                },
                {
                    id: "birth",
                    title: "贰 · 圣灵感孕与约瑟的困境 (1:18-25)",
                    title_en: "Virgin Birth and Joseph's Dilemma",
                    desc: "超自然的介入 | Supernatural Intervention",
                    verses: [
                        {
                            ref: "1:18-19",
                            text_zh: "...他母亲马利亚已经许配了约瑟，还没有迎娶，马利亚就从圣灵怀了孕。她丈夫约瑟是个义人，不愿意明明地羞辱她，想要暗暗地把她休了。",
                            text_en: "...When his mother Mary had been betrothed to Joseph, before they came together she was found to be with child from the Holy Spirit. And her husband Joseph, being a just man and unwilling to put her to shame, resolved to divorce her quietly.",
                            exegesis: {
                                title: "义人的两难 (The Dilemma of the Just)",
                                content_zh: "在犹太律法中，订婚等同于结婚，解除婚约需要正式的休书。约瑟被称为“义人”（*dikaios*），这里的“义”表现为怜悯——他不愿动用律法赋予的权利公开羞辱（甚至处死）马利亚。他试图在遵守律法和保护马利亚之间寻找平衡。",
                                content_en: "Betrothal was legally binding; breaking it required divorce. Joseph is called 'just' (*dikaios*). Here, justice manifests as mercy—he refused to use his legal right to publicize (or punish) Mary. He sought a balance between legal observance and compassion."
                            },
                            devotional: {
                                title: "当爱遇到无法解释的事 (When Love Meets the Unexplainable)",
                                content_zh: "约瑟面对的是一个看似“背叛”的局面。当我们遭遇无法解释的误解或困境时，我们的第一反应是什么？是报复、羞辱对方，还是像约瑟一样选择“暗暗地”遮盖？怜悯是公义的最高形式。给神留一点时间，祂会显明真相，就像祂派天使向约瑟显现一样。",
                                content_en: "Joseph faced apparent betrayal. When we face unexplainable misunderstandings, what's our reaction? Revenge? Or covering it quietly like Joseph? Mercy is the highest form of justice. Give God time; He will reveal the truth, just as He sent the angel to Joseph."
                            }
                        },
                        {
                            ref: "1:20-21",
                            text_zh: "...大卫的子孙约瑟，不要怕...她将要生一个儿子，你要给他起名叫耶稣，因他要将自己的百姓从罪恶里救出来。",
                            text_en: "...Joseph, son of David, do not fear... She will bear a son, and you shall call his name Jesus, for he will save his people from their sins.",
                            exegesis: {
                                title: "耶稣与约书亚 (Jesus & Joshua)",
                                content_zh: "天使称呼约瑟为“大卫的子孙”，这是为了提醒他的王室身份和责任（通过给孩子命名，在法律上承认祂为大卫的后裔）。“耶稣”（*Iēsous*）是希伯来名“约书亚”（Joshua）的希腊形式，意为“耶和华是拯救”。这不是政治性的解放（像马加比），而是“从罪恶里”的属灵拯救。",
                                content_en: "The angel addresses Joseph as 'Son of David' to invoke his royal duty (naming the child confers legal lineage). 'Jesus' is the Greek form of 'Joshua,' meaning 'Yahweh Saves.' This salvation is not political liberation (like Maccabees), but spiritual—'from their sins.'"
                            },
                            devotional: {
                                title: "顺服需要勇气 (Obedience Requires Courage)",
                                content_zh: "约瑟的顺服代价极高——他要娶一个怀了孕的女子，承受一生的流言蜚语。但他“醒了，就遵着...吩咐”（1:24）。真正的信心往往是不问“为什么”，只说“我愿意”。不要怕为了顺服神而得罪世界，因为你正在参与神伟大的救赎计划。",
                                content_en: "Joseph's obedience was costly—marrying a pregnant woman, facing lifelong scandal. But he 'woke up and did' (1:24). True faith doesn't ask 'Why' but says 'I will.' Don't fear offending the world to obey God; you are participating in His grand redemption."
                            }
                        },
                        {
                            ref: "1:22-23",
                            text_zh: "这一切的事成就是要应验主藉先知所说的话，说：‘必有童女怀孕生子；人要称他的名为以马内利。’",
                            text_en: "All this took place to fulfill what the Lord had spoken by the prophet: 'Behold, the virgin shall conceive and bear a son, and they shall call his name Immanuel.'",
                            exegesis: {
                                title: "以马内利的应验 (Fulfillment of Isaiah 7:14)",
                                content_zh: "马太引用《以赛亚书》7:14。在原初背景中，这是给亚哈斯王的兆头。马太将其视为预表性的最终应验（Typological Fulfillment）。“以马内利”不仅是一个名字，更是对耶稣本质的描述：在祂里面，神不再是遥不可及的，而是真实地住在这个破碎的世界中。",
                                content_en: "Matthew quotes Isaiah 7:14. Originally a sign to King Ahaz, Matthew sees it as ultimate Typological Fulfillment. 'Immanuel' describes Jesus' nature: In Him, God is no longer distant, but tangibly present within this broken world."
                            },
                            devotional: {
                                title: "神与你的痛同在 (God With Your Pain)",
                                content_zh: "“以马内利”不是一个抽象的神学概念，而是最深的安慰。这意味着在你最孤独、最黑暗的时刻，神没有袖手旁观，而是就在那里与你同在。神进入了人类的混乱，为要带来拯救。即使你感觉不到祂，祂的同在也是客观的事实。",
                                content_en: "'Immanuel' is not an abstract concept, but the deepest comfort. It means in your loneliest, darkest moments, God is not watching from afar but is right there. God entered human mess to bring salvation. Even if you don't feel Him, His presence is an objective fact."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            studyFilter: 'all'
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
        });

        // --- Navigation ---
        function navigate(view) {
            appState.view = view;
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-stone-500');
            });
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            document.getElementById(`nav-${view}`).classList.remove('text-stone-500');

            if (view === 'dashboard') renderDashboard();
            if (view === 'study') renderStudy();
            if (view === 'methodology') renderMethodology();
            window.scrollTo(0,0);
        }

        // --- Renders ---
        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 fade-in">
                    <!-- Intro -->
                    <div class="lg:col-span-8 bg-white p-8 rounded-xl shadow-lg border-t-4 border-purple-600">
                        <div class="flex items-center mb-4">
                            <span class="bg-purple-100 text-purple-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Theme</span>
                            <h2 class="text-3xl font-bold serif text-purple-900">${chapterData.intro.title}</h2>
                        </div>
                        <h3 class="text-lg text-stone-500 font-serif italic mb-4 en-text">${chapterData.intro.title_en}</h3>
                        <p class="text-stone-700 leading-relaxed mb-4 text-lg border-l-4 border-purple-200 pl-4">${chapterData.intro.summary_zh}</p>
                        <p class="text-stone-500 leading-relaxed text-sm italic en-text border-l-4 border-stone-200 pl-4">${chapterData.intro.summary_en}</p>
                        
                        <!-- Concept Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                            ${chapterData.intro.concepts.map(c => `
                                <div class="bg-purple-50 p-4 rounded-lg border border-purple-200 flex flex-col items-center text-center transition hover:bg-purple-100 group">
                                    <h4 class="font-bold ${c.color} text-lg mb-1 group-hover:scale-105 transition">${c.title}</h4>
                                    <p class="text-xs text-stone-400 font-serif mb-1 en-text">${c.title_en}</p>
                                    <p class="text-xs text-stone-500 font-mono mb-2">${c.greek}</p>
                                    <p class="text-xs text-stone-600 mb-1">${c.desc_zh}</p>
                                    <p class="text-[10px] text-stone-400 italic en-text">${c.desc_en}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Visual Sidebar: The Stairway of History -->
                    <div class="lg:col-span-4 bg-gradient-to-br from-purple-900 to-stone-900 text-white p-8 rounded-xl shadow-lg flex flex-col justify-center items-center relative overflow-hidden">
                         <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                         
                         <h3 class="text-xl font-bold mb-1 z-10 text-center text-amber-300">历史的阶梯</h3>
                         <p class="text-xs text-purple-200 mb-6 z-10 en-text uppercase tracking-widest border-b border-amber-500 pb-2">14 Generations x 3</p>
                         
                         <div class="relative w-full z-10 flex flex-col space-y-2 items-center">
                            <!-- Abraham to David -->
                            <div class="step-appear w-full flex items-center justify-between bg-white/10 p-2 rounded" style="animation-delay: 0s;">
                                <span class="text-xs text-stone-300">Abraham</span>
                                <i class="fas fa-arrow-right text-amber-500 text-xs"></i>
                                <span class="text-sm font-bold text-amber-400">David <i class="fas fa-crown ml-1"></i></span>
                            </div>
                            
                            <!-- David to Babylon -->
                            <div class="step-appear w-full flex items-center justify-between bg-white/10 p-2 rounded" style="animation-delay: 0.5s;">
                                <span class="text-xs text-amber-400">David</span>
                                <i class="fas fa-arrow-down text-red-400 text-xs"></i>
                                <span class="text-sm font-bold text-stone-400">Babylon <i class="fas fa-link ml-1"></i></span>
                            </div>

                            <!-- Babylon to Christ -->
                            <div class="step-appear w-full flex items-center justify-between bg-white/10 p-2 rounded" style="animation-delay: 1s;">
                                <span class="text-xs text-stone-400">Babylon</span>
                                <i class="fas fa-arrow-right text-purple-400 text-xs"></i>
                                <span class="text-lg font-bold text-purple-300">Christ <i class="fas fa-star ml-1 star"></i></span>
                            </div>
                         </div>
                    </div>
                </div>

                <!-- Concept Section: Guidance in a Dream -->
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-purple-100 fade-in">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-stone-700">
                            <i class="fas fa-moon text-purple-600 mr-2"></i> 梦中的指引：以马内利 
                            <span class="text-sm font-normal text-stone-400 ml-2 en-text">Guidance in a Dream (1:20)</span>
                        </h3>
                    </div>
                    
                    <div class="flex flex-col md:flex-row items-center justify-center gap-8 py-4 bg-stone-50 rounded-lg border border-stone-200">
                        <!-- Joseph's Fear -->
                        <div class="text-center w-1/3">
                            <div class="text-4xl text-stone-400 mb-2"><i class="fas fa-user-slash"></i></div>
                            <h4 class="font-bold text-stone-600">Human Fear</h4>
                            <p class="text-xs text-stone-500">"Divorce her quietly"</p>
                        </div>

                        <!-- Angelic Intervention -->
                        <div class="text-center w-1/3 relative">
                            <div class="absolute inset-0 flex items-center justify-center -z-10">
                                <div class="w-20 h-20 bg-amber-100 rounded-full blur-xl opacity-50 star"></div>
                            </div>
                            <div class="text-5xl text-amber-500 mb-2"><i class="fas fa-dove"></i></div>
                            <h4 class="font-bold text-amber-700">Divine Word</h4>
                            <p class="text-xs text-amber-600">"Do not fear"</p>
                        </div>

                        <!-- Obedience -->
                        <div class="text-center w-1/3">
                            <div class="text-4xl text-purple-600 mb-2"><i class="fas fa-baby"></i></div>
                            <h4 class="font-bold text-purple-800">Immanuel</h4>
                            <p class="text-xs text-purple-600">"God with us"</p>
                        </div>
                    </div>
                    <p class="text-center text-xs text-stone-400 mt-4 italic">顺服改变了历史的轨迹。Obedience changed the trajectory of history.</p>
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            // Filter Controls
            const filterHTML = `
                <div class="sticky top-20 z-40 bg-[#fdf4ff]/95 backdrop-blur py-4 mb-6 border-b border-purple-200">
                    <div class="flex justify-between items-center max-w-5xl mx-auto">
                        <h2 class="text-2xl font-bold text-purple-900 serif">逐节研读室 <span class="text-base font-normal text-purple-700 en-text ml-2">Verse by Verse Study</span></h2>
                        <div class="flex bg-white rounded-lg shadow-sm p-1 border border-purple-200">
                            <button onclick="updateFilter('all')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'all' ? 'bg-purple-600 text-white font-bold' : 'text-stone-500 hover:bg-stone-100'}">全部 All</button>
                            <button onclick="updateFilter('exegesis')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'exegesis' ? 'bg-purple-800 text-white font-bold' : 'text-stone-500 hover:bg-stone-100'}">经文含义 Meaning</button>
                            <button onclick="updateFilter('devotional')" class="px-4 py-1.5 rounded text-sm transition ${appState.studyFilter === 'devotional' ? 'bg-amber-600 text-white font-bold' : 'text-stone-500 hover:bg-stone-100'}">灵修 Devotional</button>
                        </div>
                    </div>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach(section => {
                sectionsHTML += `
                    <div class="max-w-5xl mx-auto mb-16 fade-in">
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-purple-600">
                            <div class="pl-4">
                                <h3 class="text-2xl font-bold text-purple-900">${section.title}</h3>
                                <p class="text-sm text-purple-700 font-serif italic mt-1 en-text">${section.title_en} | ${section.desc}</p>
                            </div>
                        </div>
                        
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = filterHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            // FIXED: Using 'exegesis' instead of 'academic' to match data structure
            const exeTitle = verse.exegesis ? verse.exegesis.title : "Title Missing";
            const exeContentZh = verse.exegesis ? verse.exegesis.content_zh : "Content missing";
            const exeContentEn = verse.exegesis ? verse.exegesis.content_en : "Content missing";
            
            const devTitle = verse.devotional ? verse.devotional.title : "Title Missing";
            const devContentZh = verse.devotional ? verse.devotional.content_zh : "Content missing";
            const devContentEn = verse.devotional ? verse.devotional.content_en : "Content missing";

            return `
                <div class="verse-card rounded-lg shadow-sm overflow-hidden mb-6 group">
                    <!-- Verse Text -->
                    <div class="bg-gradient-to-r from-purple-50 to-white p-5 border-b border-purple-100">
                        <span class="inline-block px-2 py-0.5 bg-purple-100 text-purple-800 text-xs font-bold rounded mb-2 font-mono border border-purple-200">${verse.ref}</span>
                        <p class="text-stone-800 font-serif text-lg leading-relaxed group-hover:text-purple-800 transition-colors mb-2">"${verse.text_zh}"</p>
                        <p class="text-stone-500 font-serif text-sm italic en-text border-l-2 border-purple-200 pl-3">"${verse.text_en}"</p>
                    </div>

                    <!-- Dual Tracks -->
                    <div class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-stone-200">
                        <!-- Exegesis -->
                        <div class="p-6 exegesis-box ${appState.studyFilter === 'devotional' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-purple-800">
                                <i class="fas fa-book-open mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Scriptural Meaning</h4>
                            </div>
                            <h5 class="font-bold text-stone-800 mb-2">${exeTitle}</h5>
                            <p class="text-sm text-stone-700 leading-relaxed text-justify mb-2">${exeContentZh}</p>
                            <p class="text-xs text-purple-800/70 font-serif italic en-text border-t border-purple-200 pt-2 mt-2">${exeContentEn}</p>
                        </div>

                        <!-- Devotional -->
                        <div class="p-6 devotional-box ${appState.studyFilter === 'exegesis' ? 'hidden' : ''}">
                            <div class="flex items-center mb-3 text-amber-700">
                                <i class="fas fa-heart mr-2"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-amber-900 mb-2">${devTitle}</h5>
                            <p class="text-sm text-amber-900/90 leading-relaxed text-justify mb-2">${devContentZh}</p>
                            <p class="text-xs text-amber-800/70 font-serif italic en-text border-t border-amber-200 pt-2 mt-2">${devContentEn}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto fade-in">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold mb-2 serif text-purple-900">解经方法论总结</h2>
                        <p class="text-stone-500 en-text">Summary of Methodology</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Exegesis Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-purple-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-purple-600 text-4xl mb-4"><i class="fas fa-search"></i></div>
                            <h3 class="text-xl font-bold text-stone-700 mb-2">权威/经文含义 (Scriptural Meaning)</h3>
                            <p class="text-xs text-stone-400 mb-6 uppercase tracking-wider">History & Prophecy</p>
                            
                            <ul class="space-y-4 text-sm text-stone-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-stone-800 mb-1"><i class="fas fa-check-circle mr-2 text-purple-500"></i> 原则 Principles</div>
                                    <div class="mb-1">分析家谱的法律意义和数值结构（Gematria）；追踪旧约预言（如赛7:14）在新约中的类型学应验（Typological Fulfillment）；结合希伯来文化理解名字（耶稣、以马内利）的神学内涵。</div>
                                    <div class="text-xs italic text-stone-400 en-text">Analyzing the legal/structural aspects of the genealogy; tracing typological fulfillment of OT prophecies; interpreting names within Hebrew culture.</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-stone-200 pt-3">
                                    <div class="flex items-center font-bold text-stone-800 mb-1"><i class="fas fa-check-circle mr-2 text-purple-500"></i> 运用 Application</div>
                                    <div class="mb-1">确立耶稣作为弥赛亚的合法性和神性；理解救赎历史的连贯性。</div>
                                    <div class="text-xs italic text-stone-400 en-text">Establishing Jesus' legal and divine credentials; understanding the continuity of redemptive history.</div>
                                </li>
                            </ul>
                        </div>

                        <!-- Devotional Card -->
                        <div class="bg-white p-8 rounded-xl shadow-lg border-t-4 border-amber-600 hover:shadow-xl transition hover:-translate-y-1">
                            <div class="text-amber-600 text-4xl mb-4"><i class="fas fa-praying-hands"></i></div>
                            <h3 class="text-xl font-bold text-amber-800 mb-2">灵修/应用扩展 (Devotional)</h3>
                            <p class="text-xs text-amber-600/70 mb-6 uppercase tracking-wider">Identity & Trust</p>
                            
                            <ul class="space-y-4 text-sm text-stone-600">
                                <li class="flex flex-col items-start">
                                    <div class="flex items-center font-bold text-amber-800 mb-1"><i class="fas fa-check-circle mr-2 text-amber-500"></i> 原则 Principles</div>
                                    <div class="mb-1">从家谱中的破碎人物中看到恩典的接纳；学习约瑟在困境中对神的信靠与顺服；体验“神与我们同在”的安慰。</div>
                                    <div class="text-xs italic text-stone-400 en-text">Seeing grace in broken lineage; learning trust/obedience from Joseph's dilemma; experiencing the comfort of 'God with us'.</div>
                                </li>
                                <li class="flex flex-col items-start border-t border-amber-100 pt-3">
                                    <div class="flex items-center font-bold text-amber-800 mb-1"><i class="fas fa-check-circle mr-2 text-amber-500"></i> 运用 Application</div>
                                    <div class="mb-1">重塑个人身份认同（在基督里）；在无法解释的环境中操练听命与顺服。</div>
                                    <div class="text-xs italic text-stone-400 en-text">Reshaping identity in Christ; practicing listening and obedience in inexplicable circumstances.</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateFilter(filter) {
            appState.studyFilter = filter;
            renderStudy();
        }
    </script>
</body>
</html>