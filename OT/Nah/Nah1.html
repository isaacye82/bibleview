<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nahum 1: The Avenger & The Stronghold | 那鸿书第1章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* Typography */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Whirlwind Indigo - Majesty */
            --theme-primary: #1e1b4b; /* Indigo 950 */
            /* Wrath Ember - Judgment */
            --theme-secondary: #be123c; /* Rose 700 */
            /* Stronghold Gold - Refuge */
            --theme-accent: #f59e0b; /* Amber 500 */
            /* Background */
            --theme-bg: #f8fafc; /* Slate 50 */
            /* Text */
            --theme-text: #0f172a; /* Slate 900 */
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: var(--theme-text);
            overflow-x: hidden;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* --- Navigation --- */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-secondary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 3px;
            background-color: var(--theme-secondary);
            border-radius: 2px;
        }

        /* --- Components --- */
        .verse-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 1px solid #e2e8f0;
            overflow: hidden;
            margin-bottom: 2rem;
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px -5px rgba(30, 27, 75, 0.15);
            border-color: var(--theme-primary);
        }

        .exegesis-box {
            background-color: #f1f5f9; /* Slate 100 */
            border-top: 3px solid #334155; /* Slate 700 */
        }
        
        .devotional-box {
            background-color: #fff7ed; /* Orange 50 */
            border-top: 3px solid #ea580c; /* Orange 600 */
        }

        /* --- Animations --- */
        .fade-in {
            animation: fadeIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            opacity: 0;
            transform: translateY(15px);
        }
        @keyframes fadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Storm Visualizer CSS --- */
        .storm-container {
            position: relative;
            width: 100%;
            height: 360px;
            background: radial-gradient(circle at center, #312e81 0%, #020617 100%);
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
        }

        .particle {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            pointer-events: none;
        }

        /* The Stronghold (Shield) */
        .stronghold {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fbbf24, #d97706);
            box-shadow: 0 0 30px #fbbf24, 0 0 60px #d97706;
            z-index: 20;
            opacity: 0;
            transition: all 1s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .stronghold-icon {
            font-size: 40px;
            color: #fffbeb;
            opacity: 0.9;
        }

        .shockwave {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            border: 2px solid rgba(251, 191, 36, 0.5);
            border-radius: 50%;
            opacity: 0;
            z-index: 15;
        }

        @keyframes pulse-shield {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
            100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }

    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-slate-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 sm:h-20">
                <div class="flex items-center">
                    <span class="text-xl sm:text-2xl font-bold text-slate-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-wind mr-2 text-indigo-900"></i> 那鸿书 1章</span>
                        <span class="text-[10px] sm:text-xs text-slate-500 en-text font-normal ml-8">Nahum Chapter 1</span>
                    </span>
                </div>
                <div class="flex space-x-2 sm:space-x-8 items-center">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-3 py-2 text-xs sm:text-sm text-center">
                        全景 <br><span class="text-[9px] sm:text-[10px] uppercase opacity-70 en-text">Overview</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-3 py-2 text-xs sm:text-sm text-stone-500 hover:text-indigo-900 text-center">
                        研读 <br><span class="text-[9px] sm:text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-3 py-2 text-xs sm:text-sm text-stone-500 hover:text-indigo-900 text-center">
                        方法 <br><span class="text-[9px] sm:text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-[#0f172a] text-slate-400 mt-auto border-t-4 border-amber-600">
        <div class="max-w-6xl mx-auto py-10 px-4 text-center">
            <p class="text-base sm:text-lg font-serif italic text-amber-100 mb-1">"耶和华本为善，在患难的日子为人的保障..."</p>
            <p class="text-xs sm:text-sm italic text-slate-500 mb-4 en-text">"The LORD is good, a stronghold in the day of trouble; he knows those who take refuge in him."</p>
            <p class="text-[10px] sm:text-xs opacity-60">那鸿书第1章中英对照研经报告 | The Storm & The Shelter</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "神圣的忌邪与安全的港湾",
                title_en: "Divine Jealousy & The Safe Harbor",
                summary_zh: "《那鸿书》是对残暴的亚述帝国（尼尼微）发出的审判预言。第1章是一首关于上帝属性的宏大赞美诗。神被描绘为一位威严的战士，在旋风和风暴中行走，对敌人施以公义的报复。然而，在这幅令人战兢的画面中心，却藏着整卷书最温柔的应许：对于信靠祂的人，这位大能的神是患难中的保障。神对罪恶的愤怒，正是祂对子民之爱的反面。",
                summary_en: "Nahum is a prophecy of judgment against the brutal Assyrian Empire (Nineveh). Chapter 1 is a majestic hymn about God's attributes. God is depicted as a Warrior marching in the whirlwind, executing righteous vengeance. Yet, at the center of this terrifying image lies the tenderest promise: to those who trust Him, this mighty God is a stronghold. God's wrath against sin is the flip side of His love for His people.",
                concepts: [
                    { 
                        title: "忌邪的神", 
                        title_en: "A Jealous God", 
                        icon: "fa-fire-alt",
                        color: "text-red-700", 
                        bg: "bg-red-50", 
                        desc_zh: "忌邪（Qanno）并非人类小家子气的嫉妒，而是盟约之爱中对专属关系的激烈捍卫。", 
                        desc_en: "Jealousy (Qanno) is not petty human envy, but the fierce defense of an exclusive covenant relationship." 
                    },
                    { 
                        title: "旋风中的道路", 
                        title_en: "Way in the Whirlwind", 
                        icon: "fa-wind",
                        color: "text-indigo-800", 
                        bg: "bg-indigo-100", 
                        desc_zh: "神不被自然律限制，祂驾驭混乱的自然界（风暴、云彩、海洋）来彰显祂的权能。", 
                        desc_en: "God is not bound by nature; He rides the chaotic elements (storms, clouds, seas) to display His power." 
                    },
                    { 
                        title: "认识", 
                        title_en: "He Knows", 
                        icon: "fa-shield-alt",
                        color: "text-amber-700", 
                        bg: "bg-amber-100", 
                        desc_zh: "神“认得”那些投靠祂的人。这种认识（Yada）不仅是认知，更是亲密的关怀与保护。", 
                        desc_en: "God 'knows' those who trust Him. This knowing (Yada) is intimate care and protection." 
                    }
                ]
            },
            sections: [
                {
                    id: "nature",
                    title: "神的双重属性：忌邪与忍耐 (1:2-3)",
                    title_en: "God's Dual Nature: Jealous & Patient",
                    verses: [
                        {
                            ref: "1:2-3",
                            text_zh: "耶和华是忌邪施报的神... 耶和华不轻易发怒，大有能力，万不以有罪的为无罪。他乘旋风和暴风而来...",
                            text_en: "The LORD is a jealous and avenging God... The LORD is slow to anger and great in power, and the LORD will by no means clear the guilty. His way is in whirlwind and storm...",
                            exegesis: {
                                title: "爱的烈焰 (The Fire of Love)",
                                content_zh: "先知开篇就强调神的**忌邪**（Jealousy）。在古代近东背景下，这就像一位丈夫为了保护妻子免受伤害而发出的义怒。神对尼尼微的愤怒，是因为尼尼微长期残酷对待神的子民。同时，神“不轻易发怒”（Slow to anger），表明祂的愤怒不是情绪失控，而是经过长久忍耐后对公义的必然回应。",
                                content_en: "The prophet opens with God's **Jealousy**. In the ancient Near East, this is like a husband's righteous fury protecting his wife. God's wrath against Nineveh stems from their cruelty to His people. Yet, He is 'slow to anger', showing His wrath is not an emotional outburst but a necessary response of justice after long patience."
                            },
                            devotional: {
                                title: "愤怒是爱的证明 (Anger as Proof of Love)",
                                content_zh: "我们常认为神发怒是可怕的，但如果神对世上的邪恶（如人口贩卖、不公义）无动于衷，祂还是良善的吗？神的愤怒证明了祂在乎。当我们受伤害时，我们可以得安慰，因为我们有一位会为我们“忌邪”的神。祂的怒气是针对罪恶，为了保护祂所爱的你。",
                                content_en: "We fear God's anger, but if God were indifferent to evil (like trafficking, injustice), would He be good? God's anger proves He cares. When we are hurt, we are comforted knowing we have a God who is 'jealous' for us. His wrath targets sin to protect you whom He loves."
                            }
                        }
                    ]
                },
                {
                    id: "theophany",
                    title: "神的显现：自然界的战栗 (1:4-6)",
                    title_en: "Theophany: Nature Trembles",
                    verses: [
                        {
                            ref: "1:5-6",
                            text_zh: "大山在他面前震动，小山熔化；大地在他面前突起... 他的忿恨如火倾倒，磐石因他崩裂。",
                            text_en: "The mountains quake before him; the hills melt... His wrath is poured out like fire, and the rocks are broken into pieces by him.",
                            exegesis: {
                                title: "宇宙性的审判 (Cosmic Judgment)",
                                content_zh: "这段经文使用了**显现**（Theophany）的语言，类似于神在西奈山的显现。最坚固的“大山”和“磐石”在神面前都如蜡熔化。这是在告诉当时的听众：如果连最稳固的自然界都无法在神面前站立，那么看似不可一世的亚述帝国（尼尼微）又算得了什么呢？",
                                content_en: "This uses the language of **Theophany**, like Sinai. Even the most stable 'mountains' and 'rocks' melt like wax. The message: If nature's sturdiest elements cannot stand before God, what chance does the arrogant Assyrian Empire have?"
                            },
                            devotional: {
                                title: "谁是你生命中的“大山”？ (What are Your Mountains?)",
                                content_zh: "我们生命中常有一些看似不可撼动的障碍——长期的疾病、顽固的瘾癖、巨大的债务——它们像大山一样压着我们。但那鸿提醒我们，在神的同在面前，这些大山都要“熔化”。不要对大山说你的神有多小，要对大山说你的神有多大。",
                                content_en: "We face immovable obstacles—chronic illness, addiction, debt—looming like mountains. Nahum reminds us that in God's presence, these mountains 'melt'. Don't tell your mountain how small your God is; tell your mountain how big your God is."
                            }
                        }
                    ]
                },
                {
                    id: "stronghold",
                    title: "风暴中的避难所 (1:7)",
                    title_en: "The Stronghold in the Storm",
                    verses: [
                        {
                            ref: "1:7",
                            text_zh: "耶和华本为善，在患难的日子为人的保障，并且认得那些投靠他的人。",
                            text_en: "The LORD is good, a stronghold in the day of trouble; he knows those who take refuge in him.",
                            exegesis: {
                                title: "核心的转折 (The Central Pivot)",
                                content_zh: "这是全章甚至全书的核心金句。在一片审判的黑暗背景中，这句话如同一束强光。**“保障”**（Ma'oz）指坚固的堡垒。**“认得”**（Yada）表达了神对个人的亲密关注。这节经文表明，神的审判是为了除灭邪恶，从而为信靠祂的人创造一个安全的空间。",
                                content_en: "This is the golden verse. Amidst dark judgment, this shines like a beacon. **'Stronghold'** (Ma'oz) implies a fortress. **'Knows'** (Yada) expresses intimate personal care. God's judgment destroys evil to create a safe space for those who trust Him."
                            },
                            devotional: {
                                title: "他认得你 (He Knows You)",
                                content_zh: "这个世界充满了动荡（患难的日子），我们无法总是逃避风暴。但神应许在风暴中心成为我们的“防空洞”。最令人安慰的是“祂认得”——在亿万人中，在你的痛苦中，祂点名认识你，了解你的处境。只要你投靠祂，你就是被祂亲自“认证”并保护的。",
                                content_en: "The world is turbulent. We can't always avoid storms, but God promises to be our bunker in the center. Most comforting is 'He knows'—among billions, in your pain, He knows you by name. If you take refuge in Him, you are personally 'verified' and protected."
                            }
                        }
                    ]
                },
                {
                    id: "deliverance",
                    title: "挣断轭与平安的佳音 (1:12-15)",
                    title_en: "Breaking the Yoke & Good Tidings",
                    verses: [
                        {
                            ref: "1:13, 15",
                            text_zh: "现在我必从你颈项上折断他的轭，扭开他的绳索... 看哪，有报好信传平安之人的脚登山...",
                            text_en: "And now I will break his yoke from off you and will burst your bonds apart... Behold, upon the mountains, the feet of him who brings good news, who publishes peace...",
                            exegesis: {
                                title: "政治与属灵的释放 (Political & Spiritual Release)",
                                content_zh: "“折断轭”直接指犹大将从亚述的重压下得释放。“报好信”（Good news/Gospel）这个词后来被以赛亚和新约引用，指向更深远的福音。在这里，它首先意味着战争的结束和和平（Shalom）的恢复。神是那位亲自介入历史，为受压迫者断开锁链的解放者。",
                                content_en: "'Breaking the yoke' refers to Judah's release from Assyrian oppression. 'Good news' (Gospel) is later used by Isaiah and the NT. Here, it primarily means the end of war and restoration of Shalom. God is the Liberator who intervenes to burst the bonds of the oppressed."
                            },
                            devotional: {
                                title: "断开你的锁链 (Bursting Your Bonds)",
                                content_zh: "无论是罪的捆绑、对他人的恐惧，还是过去的创伤，神都要做“折断轭”的工作。福音（Good News）不仅仅是将来去天堂，更是现在就宣告：那压迫你的势力已经被神击败了。你不再是奴隶，你是自由的。接受这好消息，活出自由的生命。",
                                content_en: "Whether sin, fear of others, or past trauma, God works to 'break the yoke'. The Gospel isn't just about heaven later; it declares NOW that the oppressing power is defeated. You are no longer a slave; you are free. Accept this good news and live freely."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard',
            isSheltered: false,
            stormIntensity: 1
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
            initStorm();
        });

        // --- Navigation Logic ---
        function navigate(view) {
            appState.view = view;
            
            // Update Tab UI
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-stone-500');
            });
            const activeBtn = document.getElementById(`nav-${view}`);
            activeBtn.classList.add('active-tab');
            activeBtn.classList.remove('text-stone-500');

            const container = document.getElementById('app-content');
            
            // Transition
            container.style.opacity = '0';
            container.style.transform = 'translateY(10px)';
            container.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
            
            setTimeout(() => {
                if (view === 'dashboard') {
                    renderDashboard();
                    setTimeout(initStorm, 100); // Re-init canvas
                }
                if (view === 'study') renderStudy();
                if (view === 'methodology') renderMethodology();
                
                // Fade in
                container.style.opacity = '1';
                container.style.transform = 'translateY(0)';
                window.scrollTo(0,0);
            }, 300);
        }

        // --- Render Functions ---

        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 fade-in">
                    <!-- Intro Section -->
                    <div class="lg:col-span-7 bg-white p-6 sm:p-8 rounded-2xl shadow-sm border border-indigo-100 relative overflow-hidden">
                        <div class="relative z-10">
                            <div class="flex items-center mb-4">
                                <span class="bg-indigo-100 text-indigo-900 text-[10px] sm:text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Core Theme</span>
                                <h2 class="text-2xl sm:text-3xl font-bold serif text-slate-800">${chapterData.intro.title}</h2>
                            </div>
                            <h3 class="text-base sm:text-lg text-slate-500 font-serif italic mb-6 en-text">${chapterData.intro.title_en}</h3>
                            <p class="text-slate-700 leading-relaxed mb-6 text-sm sm:text-base text-justify">
                                ${chapterData.intro.summary_zh}
                            </p>
                            <p class="text-slate-500 leading-relaxed text-xs sm:text-sm italic en-text border-l-4 border-indigo-800 pl-4 text-justify">
                                ${chapterData.intro.summary_en}
                            </p>
                        </div>
                    </div>

                    <!-- Interactive Visual: The Storm & Shelter -->
                    <div class="lg:col-span-5 bg-slate-900 text-white p-6 rounded-2xl shadow-lg flex flex-col relative overflow-hidden">
                        <div class="z-10 w-full mb-2 flex justify-between items-center">
                             <h3 class="text-lg font-bold text-amber-400">
                                患难中的保障 <span class="text-xs font-normal opacity-60 ml-2 en-text text-white">The Stronghold</span>
                             </h3>
                             <button onclick="toggleShelter()" id="shelter-btn" class="px-3 py-1 bg-amber-600 hover:bg-amber-500 text-xs rounded shadow transition border border-amber-400">
                                <i class="fas fa-shield-alt mr-1"></i> 寻求保障 Seek Refuge
                             </button>
                        </div>

                        <!-- Storm Canvas -->
                        <div class="storm-container mt-2" id="storm-canvas">
                             <!-- Particles created by JS -->
                             
                             <!-- The Stronghold (Hidden Initially) -->
                             <div class="stronghold" id="stronghold">
                                <i class="fas fa-anchor stronghold-icon"></i>
                                <div class="shockwave" id="shockwave"></div>
                             </div>

                             <div id="viz-msg" class="absolute bottom-4 left-0 text-center w-full text-xs italic text-slate-300 opacity-100 transition-opacity duration-500 pointer-events-none">
                                "The LORD hath his way in the whirlwind..."
                             </div>
                        </div>
                    </div>
                </div>

                <!-- Concept Cards -->
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 fade-in" style="animation-delay: 0.2s">
                    ${chapterData.intro.concepts.map((c, i) => `
                        <div class="${c.bg} p-5 rounded-xl border border-white/50 flex flex-col items-start transition hover:shadow-md group h-full">
                            <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm mb-3 text-lg ${c.color}">
                                <i class="fas ${c.icon}"></i>
                            </div>
                            <h4 class="font-bold ${c.color} text-base mb-1 group-hover:translate-x-1 transition-transform">${c.title}</h4>
                            <p class="text-[10px] sm:text-xs text-stone-500 font-serif mb-2 en-text italic">${c.title_en}</p>
                            <div class="w-full h-px bg-current opacity-10 mb-2"></div>
                            <p class="text-xs text-stone-700 leading-snug mb-1">${c.desc_zh}</p>
                            <p class="text-[10px] text-stone-500 leading-snug opacity-80 en-text mt-auto pt-2">${c.desc_en}</p>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            const headerHTML = `
                <div class="text-center mb-10 fade-in">
                    <span class="inline-block p-3 rounded-full bg-indigo-100 text-indigo-900 text-xl mb-3 shadow-sm"><i class="fas fa-book-open"></i></span>
                    <h2 class="text-2xl font-bold text-slate-800 serif">逐节研读与灵修</h2>
                    <p class="text-sm text-slate-500 en-text italic mt-1">Verse-by-Verse Exegesis & Devotion</p>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach((section, index) => {
                sectionsHTML += `
                    <div class="max-w-4xl mx-auto mb-16 fade-in" style="animation-delay: ${index * 0.15}s">
                        <!-- Section Header -->
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-indigo-800">
                            <div>
                                <h3 class="text-lg sm:text-xl font-bold text-slate-800">${section.title}</h3>
                                <p class="text-xs sm:text-sm text-slate-500 font-serif italic en-text">${section.title_en}</p>
                            </div>
                        </div>
                        
                        <!-- Cards Stack -->
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = headerHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            return `
                <div class="verse-card group">
                    <!-- Scripture Area -->
                    <div class="bg-white p-5 sm:p-6 border-b border-indigo-100 relative">
                        <div class="flex items-center justify-between mb-3">
                            <span class="px-2 py-1 bg-slate-800 text-slate-100 text-[10px] font-bold rounded font-mono">${verse.ref}</span>
                            <div class="h-px bg-slate-200 flex-grow mx-4"></div>
                            <i class="fas fa-scroll text-slate-300 text-xl"></i>
                        </div>
                        <p class="text-slate-900 font-serif text-lg leading-relaxed mb-3 font-medium">
                            ${verse.text_zh}
                        </p>
                        <p class="text-slate-500 font-serif text-sm italic en-text">
                            ${verse.text_en}
                        </p>
                    </div>

                    <!-- Interpretation Area -->
                    <div class="grid grid-cols-1 md:grid-cols-2">
                        <!-- Exegesis Block -->
                        <div class="exegesis-box p-5 sm:p-6 text-stone-800">
                            <div class="flex items-center mb-3 text-indigo-900 opacity-80">
                                <i class="fas fa-search mr-2 text-xs"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Meaning</h4>
                            </div>
                            <h5 class="font-bold text-slate-900 mb-2 text-sm sm:text-base">${verse.exegesis.title}</h5>
                            <p class="text-sm text-stone-700 leading-relaxed text-justify mb-2">${verse.exegesis.content_zh}</p>
                            <p class="text-xs text-stone-500 font-serif italic en-text mt-3 pt-3 border-t border-indigo-900/10">${verse.exegesis.content_en}</p>
                        </div>

                        <!-- Devotional Block -->
                        <div class="devotional-box p-5 sm:p-6 text-stone-800">
                            <div class="flex items-center mb-3 text-amber-800 opacity-80">
                                <i class="fas fa-church mr-2 text-xs"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-amber-900 mb-2 text-sm sm:text-base">${verse.devotional.title}</h5>
                            <p class="text-sm text-stone-700 leading-relaxed text-justify mb-2">${verse.devotional.content_zh}</p>
                            <p class="text-xs text-stone-500 font-serif italic en-text mt-3 pt-3 border-t border-amber-800/10">${verse.devotional.content_en}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto fade-in">
                    <div class="text-center mb-10">
                        <h2 class="text-2xl sm:text-3xl font-bold mb-2 serif text-slate-800">解经原则总结</h2>
                        <p class="text-stone-500 en-text">Methodology Summary</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Method 1 -->
                        <div class="bg-white p-6 rounded-2xl shadow-sm border-t-4 border-indigo-800">
                            <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-900 text-xl mb-4">
                                <i class="fas fa-university"></i>
                            </div>
                            <h3 class="text-lg font-bold text-slate-800 mb-2">1. 经文原意 (Contextual Exegesis)</h3>
                            <p class="text-xs text-stone-400 mb-4 uppercase tracking-wider">Attributes & History</p>
                            <p class="text-sm text-stone-600 mb-4 leading-relaxed">
                                侧重于理解神属性（忌邪、愤怒、良善）在历史背景（亚述压迫）下的统一性。
                            </p>
                            <ul class="space-y-3 text-sm text-stone-700">
                                <li class="flex items-start"><i class="fas fa-check text-indigo-700 mt-1 mr-2 text-xs"></i> <span><strong>语言意象：</strong> 解析“旋风”、“熔化大山”等显现语言（Theophany）的神学力量。</span></li>
                                <li class="flex items-start"><i class="fas fa-check text-indigo-700 mt-1 mr-2 text-xs"></i> <span><strong>词源分析：</strong> 解释“忌邪”（Qanno）不仅是情绪，更是盟约的忠诚。</span></li>
                                <li class="flex items-start"><i class="fas fa-check text-indigo-700 mt-1 mr-2 text-xs"></i> <span><strong>历史背景：</strong> 结合亚述的残暴，理解神为何必须是“施报”的神。</span></li>
                            </ul>
                        </div>

                        <!-- Method 2 -->
                        <div class="bg-white p-6 rounded-2xl shadow-sm border-t-4 border-amber-600">
                            <div class="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center text-amber-800 text-xl mb-4">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <h3 class="text-lg font-bold text-slate-800 mb-2">2. 灵修应用 (Devotional Application)</h3>
                            <p class="text-xs text-stone-400 mb-4 uppercase tracking-wider">Trust & Comfort</p>
                            <p class="text-sm text-stone-600 mb-4 leading-relaxed">
                                将神宏大的属性转化为个人患难中的安慰与力量。
                            </p>
                            <ul class="space-y-3 text-sm text-stone-700">
                                <li class="flex items-start"><i class="fas fa-check text-amber-700 mt-1 mr-2 text-xs"></i> <span><strong>安全感转换：</strong> 引导信徒从害怕神的愤怒转向信靠神的保护。</span></li>
                                <li class="flex items-start"><i class="fas fa-check text-amber-700 mt-1 mr-2 text-xs"></i> <span><strong>个人连结：</strong> 强调神“认得”每一个在风暴中投靠祂的人。</span></li>
                                <li class="flex items-start"><i class="fas fa-check text-amber-700 mt-1 mr-2 text-xs"></i> <span><strong>得胜宣告：</strong> 应用“折断轭”的应许来对抗生命中的捆绑。</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- Visualizer Logic ---
        
        let animationId;
        const particles = [];

        function initStorm() {
            const container = document.getElementById('storm-canvas');
            if(!container) return;
            
            // Clear existing non-static particles
            // Actually, let's keep it simple: just add particles if list is empty
            if(particles.length === 0) {
                 for(let i=0; i<80; i++) {
                    const p = document.createElement('div');
                    p.className = 'particle';
                    resetParticle(p);
                    container.appendChild(p);
                    particles.push({
                        el: p,
                        x: Math.random() * 100,
                        y: Math.random() * 100,
                        speed: Math.random() * 0.5 + 0.2,
                        angle: Math.random() * Math.PI * 2,
                        dist: Math.random() * 40 + 10 // distance from center
                    });
                }
                animateStorm();
            }
        }

        function resetParticle(el) {
            const size = Math.random() * 3 + 1;
            el.style.width = size + 'px';
            el.style.height = size + 'px';
            el.style.opacity = Math.random() * 0.5 + 0.1;
        }

        function animateStorm() {
            if(appState.view !== 'dashboard') return;

            particles.forEach(p => {
                // Swirl logic
                p.angle += p.speed * 0.05 * appState.stormIntensity;
                
                // If sheltered, push particles away from center
                let targetDist = p.dist;
                if(appState.isSheltered) {
                     // Push out
                     if(p.dist < 40) p.dist += 1;
                } else {
                    // Normalize
                    if(Math.random() > 0.99) p.dist = Math.random() * 45 + 5;
                }

                // Calculate position relative to center (50%, 50%)
                // Using simplified CSS percentage logic
                const centerX = 50;
                const centerY = 50;
                
                // Oval motion
                const x = centerX + Math.cos(p.angle) * p.dist; 
                const y = centerY + Math.sin(p.angle) * p.dist * 0.6; // Flatten circle to look like disc

                p.el.style.left = x + '%';
                p.el.style.top = y + '%';
            });

            animationId = requestAnimationFrame(animateStorm);
        }

        function toggleShelter() {
            appState.isSheltered = !appState.isSheltered;
            
            const stronghold = document.getElementById('stronghold');
            const shockwave = document.getElementById('shockwave');
            const btn = document.getElementById('shelter-btn');
            const msg = document.getElementById('viz-msg');

            if (appState.isSheltered) {
                // Activate Shelter
                stronghold.style.transform = 'translate(-50%, -50%) scale(1)';
                stronghold.style.opacity = '1';
                shockwave.style.animation = 'pulse-shield 2s infinite';
                appState.stormIntensity = 2; // Storm rages harder outside
                
                btn.innerHTML = '<i class="fas fa-times mr-1"></i> 离开保障 Leave Refuge';
                btn.classList.replace('bg-amber-600', 'bg-slate-600');
                btn.classList.replace('border-amber-400', 'border-slate-400');
                
                msg.innerText = "\"He knows those who take refuge in him.\"";
                msg.classList.add('text-amber-300');
            } else {
                // Deactivate
                stronghold.style.transform = 'translate(-50%, -50%) scale(0)';
                stronghold.style.opacity = '0';
                shockwave.style.animation = 'none';
                appState.stormIntensity = 1;
                
                btn.innerHTML = '<i class="fas fa-shield-alt mr-1"></i> 寻求保障 Seek Refuge';
                btn.classList.replace('bg-slate-600', 'bg-amber-600');
                btn.classList.replace('border-slate-400', 'border-amber-400');

                msg.innerText = "\"The LORD hath his way in the whirlwind...\"";
                msg.classList.remove('text-amber-300');
            }
        }

    </script>
</body>
</html>