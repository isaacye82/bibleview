<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nahum 3: Woe & Ruin | 那鸿书第3章</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* Typography */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            /* Blood Crimson - The City of Blood */
            --theme-primary: #7f1d1d; /* Red 900 */
            /* Fig Green - Weak Fortresses */
            --theme-secondary: #3f6212; /* Lime 800 */
            /* Locust Yellow - Fleeing Leaders */
            --theme-accent: #eab308; /* Yellow 500 */
            /* Background */
            --theme-bg: #fff1f2; /* Rose 50 */
            /* Text */
            --theme-text: #450a0a; /* Red 950 */
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--theme-bg);
            color: var(--theme-text);
            overflow-x: hidden;
        }

        .en-text {
            font-family: 'Playfair Display', serif;
        }

        h1, h2, h3, .serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* --- Navigation --- */
        .nav-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .active-tab {
            color: var(--theme-primary);
            font-weight: 700;
        }
        .active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 3px;
            background-color: var(--theme-primary);
            border-radius: 2px;
        }

        /* --- Components --- */
        .verse-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 1px solid #fecaca;
            overflow: hidden;
            margin-bottom: 2rem;
        }
        .verse-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px -5px rgba(127, 29, 29, 0.15);
            border-color: var(--theme-primary);
        }

        .exegesis-box {
            background-color: #fef2f2; /* Red 50 */
            border-top: 3px solid #991b1b; /* Red 800 */
        }
        
        .devotional-box {
            background-color: #f7fee7; /* Lime 50 */
            border-top: 3px solid #4d7c0f; /* Lime 700 */
        }

        /* --- Animations --- */
        .fade-in {
            animation: fadeIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            opacity: 0;
            transform: translateY(15px);
        }
        @keyframes fadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Fig Tree Visualizer CSS --- */
        .tree-container {
            position: relative;
            width: 100%;
            height: 360px;
            background: linear-gradient(to bottom, #1c1917 0%, #44403c 100%);
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: inset 0 0 40px rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: flex-end;
        }

        .tree-trunk {
            width: 20px;
            height: 150px;
            background-color: #78350f;
            position: relative;
            z-index: 10;
        }
        
        .tree-branch {
            position: absolute;
            background-color: #78350f;
            border-radius: 5px;
        }

        .fig {
            position: absolute;
            width: 20px;
            height: 24px;
            background-color: #65a30d; /* Green Fig */
            border-radius: 50% 50% 40% 40%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1a2e05;
            font-size: 10px;
            z-index: 20;
            transition: transform 0.5s;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
        }
        .fig::after {
            content: '';
            position: absolute;
            top: -4px;
            width: 2px;
            height: 4px;
            background-color: #3f2c22;
        }

        .shaking {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both infinite;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .falling {
            animation: drop 1s ease-in forwards;
        }

        @keyframes drop {
            0% { top: auto; }
            100% { top: 340px; opacity: 0; transform: rotate(180deg); }
        }

        .eater-mouth {
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 60px;
            background-color: #292524;
            border-radius: 50% 50% 0 0;
            transition: bottom 0.5s;
            z-index: 30;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 10px;
            color: #57534e;
            font-weight: bold;
            font-size: 12px;
        }

    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-red-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 sm:h-20">
                <div class="flex items-center">
                    <span class="text-xl sm:text-2xl font-bold text-red-900 serif flex flex-col leading-tight">
                        <span><i class="fas fa-skull mr-2 text-red-700"></i> 那鸿书 3章</span>
                        <span class="text-[10px] sm:text-xs text-red-800/60 en-text font-normal ml-8">Nahum Chapter 3</span>
                    </span>
                </div>
                <div class="flex space-x-2 sm:space-x-8 items-center">
                    <button onclick="navigate('dashboard')" id="nav-dashboard" class="nav-btn active-tab px-3 py-2 text-xs sm:text-sm text-center">
                        全景 <br><span class="text-[9px] sm:text-[10px] uppercase opacity-70 en-text">Overview</span>
                    </button>
                    <button onclick="navigate('study')" id="nav-study" class="nav-btn px-3 py-2 text-xs sm:text-sm text-stone-500 hover:text-red-800 text-center">
                        研读 <br><span class="text-[9px] sm:text-[10px] uppercase opacity-70 en-text">Study</span>
                    </button>
                    <button onclick="navigate('methodology')" id="nav-methodology" class="nav-btn px-3 py-2 text-xs sm:text-sm text-stone-500 hover:text-red-800 text-center">
                        方法 <br><span class="text-[9px] sm:text-[10px] uppercase opacity-70 en-text">Methodology</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-[#292524] text-stone-400 mt-auto border-t-4 border-red-800">
        <div class="max-w-6xl mx-auto py-10 px-4 text-center">
            <p class="text-base sm:text-lg font-serif italic text-red-100 mb-1">"你的损伤无法医治，你的伤痕极其重大..."</p>
            <p class="text-xs sm:text-sm italic text-stone-500 mb-4 en-text">"There is no easing your hurt; your wound is grievous."</p>
            <p class="text-[10px] sm:text-xs opacity-60">那鸿书第3章中英对照研经报告 | Woe to the Bloody City</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Store ---
        const chapterData = {
            intro: {
                title: "血腥之城的必然结局",
                title_en: "The Inevitable End of the Bloody City",
                summary_zh: "第3章将视角从战争的喧嚣（第2章）转向了审判的原因和性质。那鸿无情地揭露了尼尼微的罪恶：谎言、强暴和邪术。他用历史上底比斯（挪亚们）的倾覆作为警告，并使用了一系列讽刺的比喻（如熟透的无花果、成群的蝗虫）来描述亚述帝国防御的脆弱。这一章是对所有建立在残暴之上的强权发出的终极判决。",
                summary_en: "Chapter 3 shifts focus from the noise of war (Ch 2) to the cause and nature of judgment. Nahum ruthlessly exposes Nineveh's sins: lies, violence, and sorcery. He uses the fall of Thebes (No-Amon) as a warning and employs ironic metaphors (ripe figs, swarming locusts) to depict the fragility of the Assyrian defense. This chapter is the ultimate verdict on all powers built on brutality.",
                concepts: [
                    { 
                        title: "流人血的城", 
                        title_en: "City of Blood", 
                        icon: "fa-tint",
                        color: "text-red-700", 
                        bg: "bg-red-50", 
                        desc_zh: "尼尼微的繁荣是建立在无休止的杀戮和掠夺之上，神必追讨流血的罪。", 
                        desc_en: "Nineveh's prosperity was built on endless slaughter and plunder. God avenges bloodshed." 
                    },
                    { 
                        title: "被摇撼的无花果", 
                        title_en: "Shaken Fig Trees", 
                        icon: "fa-tree",
                        color: "text-lime-700", 
                        bg: "bg-lime-50", 
                        desc_zh: "看似坚固的军事要塞，在神的审判面前像熟透的无花果一样，一摇即落。", 
                        desc_en: "Seemingly strong fortresses fall like ripe figs into the eater's mouth when shaken by God's judgment." 
                    },
                    { 
                        title: "沉睡的牧人", 
                        title_en: "Sleeping Shepherds", 
                        icon: "fa-bed",
                        color: "text-amber-700", 
                        bg: "bg-amber-50", 
                        desc_zh: "曾经不可一世的领袖和权贵，如今在死亡中沉睡，百姓如羊群四散。", 
                        desc_en: "Once arrogant leaders and nobles now sleep in death, while the people scatter like sheep." 
                    }
                ]
            },
            sections: [
                {
                    id: "woe",
                    title: "祸哉！流人血的城 (3:1-4)",
                    title_en: "Woe to the City of Blood",
                    verses: [
                        {
                            ref: "3:1, 4",
                            text_zh: "祸哉！这流人血的城，充满谎诈和强暴... 都因那美貌的妓女多有淫行，惯行邪术，藉淫行诱惑列国...",
                            text_en: "Woe to the bloody city, all full of lies and plunder... all because of the multitude of whoredoms of the well-favored harlot, the mistress of witchcrafts, that selleth nations...",
                            exegesis: {
                                title: "罪恶的根源 (The Root of Evil)",
                                content_zh: "那鸿用“祸哉”（Woe）这个葬礼上的哀叹词开始。尼尼微被定性为“流人血的城”。经文揭示了其权力的肮脏手段：不仅靠军事暴力（强暴），还靠外交欺骗（谎诈）和宗教文化渗透（邪术/淫行）。“美貌的妓女”比喻亚述利用其令人眩晕的财富和文化魅力来诱惑并奴役附庸国。",
                                content_en: "Nahum begins with 'Woe', a funeral lament. Nineveh is branded a 'bloody city'. The text exposes its dirty methods: not just military violence (plunder), but diplomatic deceit (lies) and cultural/religious infiltration (witchcrafts). The 'well-favored harlot' metaphor shows how Assyria used dazzling wealth and culture to seduce and enslave nations."
                            },
                            devotional: {
                                title: "看穿“美貌”的诱惑 (Seeing Through the Seduction)",
                                content_zh: "世界上的邪恶体系往往包装得很“美貌”——光鲜的成功、令人羡慕的地位、无需道德约束的自由。但神称之为“淫行”和“邪术”。我们是否被这些外表的华丽所诱惑，而忽视了其背后“流人血”（剥削与不义）的本质？求神给我们属灵的眼光，看透罪恶的伪装。",
                                content_en: "Evil systems are often packaged as 'well-favored'—glamorous success, status, freedom without morals. But God calls it 'whoredom'. Are we seduced by the glitter, ignoring the 'bloody' reality (exploitation) behind it? Pray for spiritual discernment to see through sin's disguise."
                            }
                        }
                    ]
                },
                {
                    id: "shame",
                    title: "公开的羞辱 (3:5-7)",
                    title_en: "Public Shame & Exposure",
                    verses: [
                        {
                            ref: "3:5-6",
                            text_zh: "万军之耶和华说：我与你为敌；我必揭起你的衣襟... 使列国看见你的赤体... 我必将可憎污秽之物抛在你身上，辱没你，为众目所观。",
                            text_en: "Behold, I am against you, declares the LORD of hosts, and I will lift up your skirts... and show nations your nakedness... I will throw filth at you and treat you with contempt and make you a spectacle.",
                            exegesis: {
                                title: "以羞耻还羞耻 (Shame for Shame)",
                                content_zh: "这是报应神学（Lex Talionis）的再次体现。亚述曾习惯性地羞辱被征服者（如剥光战俘的衣服游街）。现在，神要“揭起你的衣襟”，让这个以荣耀自居的帝国在万国面前赤身露体。这是从荣耀的顶峰跌落到羞耻的深渊。神要将它的虚假光环剥去，显出其丑陋的真相。",
                                content_en: "This is Lex Talionis again. Assyria habitually humiliated captives (stripping them naked). Now, God will 'lift up your skirts', exposing this glory-seeking empire to global shame. It's a fall from peak glory to deep shame. God strips away the fake aura to reveal the ugly truth."
                            },
                            devotional: {
                                title: "神必揭露真相 (God Will Expose)",
                                content_zh: "没有什么是隐藏不显露的。那些在暗中行的恶，或者用光鲜外表掩盖的罪，终有一天会在“众目”之下被神揭露。对于坚持行恶的人，这是一种警告；对于受委屈的人，这是一种安慰——真相终将大白，虚假的荣耀站立不住。",
                                content_en: "Nothing remains hidden. Secret sins or evil masked by glamour will one day be exposed by God as a 'spectacle'. To the wicked, a warning; to the oppressed, a comfort—truth will prevail, and false glory cannot stand."
                            }
                        }
                    ]
                },
                {
                    id: "history",
                    title: "历史的借镜：底比斯的教训 (3:8-11)",
                    title_en: "Lesson from History: Thebes",
                    verses: [
                        {
                            ref: "3:8, 10",
                            text_zh: "你岂比挪亚们强呢？那城坐落在众河之间... 她却被迁移，被掳去；她的婴孩在各市口上也被摔死...",
                            text_en: "Are you better than Thebes that sat by the Nile...? Yet she became an exile; she went into captivity; her infants were dashed in pieces...",
                            exegesis: {
                                title: "你并不特殊 (You Are Not Special)",
                                content_zh: "“挪亚们”即埃及古都底比斯（Thebes），曾被认为是不可攻破的，拥由尼罗河作为天然屏障，且有强大的盟友（古实、弗人）。但在公元前663年，正是亚述攻陷了它。那鸿反问亚述：既然那个比你更强、更有地理优势的城都倒塌了，你凭什么认为自己能幸免？这讽刺了强权的健忘。",
                                content_en: "'No-Amon' is Thebes, Egypt's ancient capital. Thought invincible, protected by the Nile and allies (Cush/Put). Yet, Assyria itself conquered it in 663 BC. Nahum asks: If that stronger, better-protected city fell, why do you think you're exempt? It mocks the amnesia of power."
                            },
                            devotional: {
                                title: "从历史中学习谦卑 (Learning Humility from History)",
                                content_zh: "“通过历史我们学到的唯一教训，就是我们不吸取教训。”亚述亲手毁灭了底比斯，却认为自己不会重蹈覆辙。我们也常犯这种错：看到别人的失败（如婚姻破裂、事业崩塌），却觉得自己“不一样”、“更聪明”。神借着历史警告我们要谦卑，因为骄傲之前，败坏已经发生。",
                                content_en: "'The only thing we learn from history is that we don't learn.' Assyria destroyed Thebes but thought it wouldn't happen to them. We do the same: seeing others fail (divorce, ruin) but thinking 'I'm different'. God uses history to warn us: humility, for pride precedes destruction."
                            }
                        }
                    ]
                },
                {
                    id: "end",
                    title: "脆弱的防御与必然的结局 (3:12-19)",
                    title_en: "Fragile Defense & Inevitable End",
                    verses: [
                        {
                            ref: "3:12, 17",
                            text_zh: "你一切保障必像无花果树... 若被摇撼，就落在吃的人口中... 你的首领多如蝗虫... 日头一出就不见了。",
                            text_en: "All your fortresses are like fig trees with first-ripe figs; if shaken they fall into the mouth of the eater... Your guards are like locusts... when the sun rises, they fly away.",
                            exegesis: {
                                title: "讽刺的比喻 (Ironic Metaphors)",
                                content_zh: "这是极尽讽刺的画面：亚述引以为傲的要塞，竟然像熟透的无花果，都不需要敌人攻打，只要“一摇”就掉下来了。而他们数量众多的官长和商贾，像冷天停留在篱笆上的蝗虫——这本来象征数量庞大，但太阳一出（危机来临），他们就全飞走了（逃跑了）。这意味着在审判之日，没有任何依靠能存留。",
                                content_en: "Irony peaks here: Proud fortresses are like ripe figs—enemies don't even need to fight, just 'shake', and they fall. Numerous officials are like locusts on a cold wall—symbolizing multitude, but when the sun rises (crisis comes), they all flee. In the day of judgment, no support remains."
                            },
                            devotional: {
                                title: "无法医治的伤痕 (The Incurable Wound)",
                                content_zh: "全书以“你的损伤无法医治”结束。这是一个可怕的定局。有时候，神给的机会已过，审判已成定局。与其在无可挽回时哀哭，不如在现在——就是“今天”——悔改。亚述的结局提醒我们：神的宽容虽然长久，但不是无限的。",
                                content_en: "The book ends with 'There is no easing your hurt.' A terrifying finality. Sometimes, the window of grace closes. Rather than weeping when it's too late, repent NOW, 'today'. Assyria's end reminds us: God's patience is long, but not infinite."
                            }
                        }
                    ]
                }
            ]
        };

        // --- State ---
        let appState = {
            view: 'dashboard'
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
            initTreeVisual();
        });

        // --- Navigation Logic ---
        function navigate(view) {
            appState.view = view;
            
            // Update Tab UI
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active-tab');
                btn.classList.add('text-stone-500');
            });
            const activeBtn = document.getElementById(`nav-${view}`);
            activeBtn.classList.add('active-tab');
            activeBtn.classList.remove('text-stone-500');

            const container = document.getElementById('app-content');
            
            // Transition
            container.style.opacity = '0';
            container.style.transform = 'translateY(10px)';
            
            setTimeout(() => {
                if (view === 'dashboard') {
                    renderDashboard();
                    setTimeout(initTreeVisual, 100);
                }
                if (view === 'study') renderStudy();
                if (view === 'methodology') renderMethodology();
                
                // Fade in
                container.style.opacity = '1';
                container.style.transform = 'translateY(0)';
                window.scrollTo(0,0);
            }, 300);
        }

        // --- Render Functions ---

        function renderDashboard() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-8 fade-in">
                    <!-- Intro Section -->
                    <div class="lg:col-span-7 bg-white p-6 sm:p-8 rounded-2xl shadow-sm border border-red-100 relative overflow-hidden">
                        <div class="relative z-10">
                            <div class="flex items-center mb-4">
                                <span class="bg-red-100 text-red-900 text-[10px] sm:text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide mr-3">Core Theme</span>
                                <h2 class="text-2xl sm:text-3xl font-bold serif text-red-950">${chapterData.intro.title}</h2>
                            </div>
                            <h3 class="text-base sm:text-lg text-stone-500 font-serif italic mb-6 en-text">${chapterData.intro.title_en}</h3>
                            <p class="text-stone-700 leading-relaxed mb-6 text-sm sm:text-base text-justify">
                                ${chapterData.intro.summary_zh}
                            </p>
                            <p class="text-stone-500 leading-relaxed text-xs sm:text-sm italic en-text border-l-4 border-red-800 pl-4 text-justify">
                                ${chapterData.intro.summary_en}
                            </p>
                        </div>
                    </div>

                    <!-- Interactive Visual: The Shaking Fig Tree -->
                    <div class="lg:col-span-5 bg-stone-900 text-white p-6 rounded-2xl shadow-lg flex flex-col relative overflow-hidden">
                        <div class="z-10 w-full mb-2 flex justify-between items-center">
                             <h3 class="text-lg font-bold text-lime-400">
                                摇撼保障 <span class="text-xs font-normal opacity-60 ml-2 en-text text-white">Shaking Fortresses</span>
                             </h3>
                             <button onclick="shakeTree()" id="shake-btn" class="px-3 py-1 bg-lime-700 hover:bg-lime-600 text-xs rounded shadow transition border border-lime-500">
                                <i class="fas fa-hand-rock mr-1"></i> 摇动 Shake
                             </button>
                        </div>

                        <!-- Tree Canvas -->
                        <div class="tree-container mt-2" id="tree-canvas">
                             <!-- Tree Structure -->
                             <div class="tree-trunk" id="tree-root">
                                 <!-- Branches will be added via JS for simplicity or hardcoded -->
                                 <div class="tree-branch" style="width: 80px; height: 8px; top: 20px; left: -40px; transform: rotate(-20deg);"></div>
                                 <div class="tree-branch" style="width: 70px; height: 8px; top: 50px; left: 10px; transform: rotate(20deg);"></div>
                                 <div class="tree-branch" style="width: 60px; height: 6px; top: 80px; left: -30px; transform: rotate(-15deg);"></div>
                                 <div class="tree-branch" style="width: 50px; height: 6px; top: 100px; left: 10px; transform: rotate(15deg);"></div>
                             </div>
                             
                             <!-- Figs (Fortresses) container -->
                             <div id="figs-layer" class="absolute inset-0 pointer-events-none"></div>

                             <!-- Eater Mouth -->
                             <div class="eater-mouth" id="mouth">The Eater</div>

                             <div id="viz-msg" class="absolute top-4 right-4 text-right w-40 text-xs italic text-lime-200 opacity-100 transition-opacity duration-500 pointer-events-none drop-shadow-md">
                                "All your fortresses are like fig trees..."
                             </div>
                        </div>
                    </div>
                </div>

                <!-- Concept Cards -->
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 fade-in" style="animation-delay: 0.2s">
                    ${chapterData.intro.concepts.map((c, i) => `
                        <div class="${c.bg} p-5 rounded-xl border border-white/50 flex flex-col items-start transition hover:shadow-md group h-full">
                            <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm mb-3 text-lg ${c.color}">
                                <i class="fas ${c.icon}"></i>
                            </div>
                            <h4 class="font-bold ${c.color} text-base mb-1 group-hover:translate-x-1 transition-transform">${c.title}</h4>
                            <p class="text-[10px] sm:text-xs text-stone-500 font-serif mb-2 en-text italic">${c.title_en}</p>
                            <div class="w-full h-px bg-current opacity-10 mb-2"></div>
                            <p class="text-xs text-stone-700 leading-snug mb-1">${c.desc_zh}</p>
                            <p class="text-[10px] text-stone-500 leading-snug opacity-80 en-text mt-auto pt-2">${c.desc_en}</p>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function renderStudy() {
            const container = document.getElementById('app-content');
            
            const headerHTML = `
                <div class="text-center mb-10 fade-in">
                    <span class="inline-block p-3 rounded-full bg-red-100 text-red-900 text-xl mb-3 shadow-sm"><i class="fas fa-book-open"></i></span>
                    <h2 class="text-2xl font-bold text-stone-800 serif">逐节研读与灵修</h2>
                    <p class="text-sm text-stone-500 en-text italic mt-1">Verse-by-Verse Exegesis & Devotion</p>
                </div>
            `;

            let sectionsHTML = '';
            chapterData.sections.forEach((section, index) => {
                sectionsHTML += `
                    <div class="max-w-4xl mx-auto mb-16 fade-in" style="animation-delay: ${index * 0.15}s">
                        <!-- Section Header -->
                        <div class="flex items-center mb-6 pl-2 border-l-4 border-red-800">
                            <div>
                                <h3 class="text-lg sm:text-xl font-bold text-stone-800">${section.title}</h3>
                                <p class="text-xs sm:text-sm text-stone-500 font-serif italic en-text">${section.title_en}</p>
                            </div>
                        </div>
                        
                        <!-- Cards Stack -->
                        <div class="space-y-6">
                            ${section.verses.map(verse => createVerseCard(verse)).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = headerHTML + sectionsHTML;
        }

        function createVerseCard(verse) {
            return `
                <div class="verse-card group">
                    <!-- Scripture Area -->
                    <div class="bg-white p-5 sm:p-6 border-b border-red-100 relative">
                        <div class="flex items-center justify-between mb-3">
                            <span class="px-2 py-1 bg-red-900 text-red-50 text-[10px] font-bold rounded font-mono">${verse.ref}</span>
                            <div class="h-px bg-red-100 flex-grow mx-4"></div>
                            <i class="fas fa-scroll text-red-200 text-xl"></i>
                        </div>
                        <p class="text-stone-900 font-serif text-lg leading-relaxed mb-3 font-medium">
                            ${verse.text_zh}
                        </p>
                        <p class="text-stone-500 font-serif text-sm italic en-text">
                            ${verse.text_en}
                        </p>
                    </div>

                    <!-- Interpretation Area -->
                    <div class="grid grid-cols-1 md:grid-cols-2">
                        <!-- Exegesis Block -->
                        <div class="exegesis-box p-5 sm:p-6 text-stone-800">
                            <div class="flex items-center mb-3 text-red-900 opacity-80">
                                <i class="fas fa-search mr-2 text-xs"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">经文含义 Meaning</h4>
                            </div>
                            <h5 class="font-bold text-red-950 mb-2 text-sm sm:text-base">${verse.exegesis.title}</h5>
                            <p class="text-sm text-stone-700 leading-relaxed text-justify mb-2">${verse.exegesis.content_zh}</p>
                            <p class="text-xs text-stone-500 font-serif italic en-text mt-3 pt-3 border-t border-red-900/10">${verse.exegesis.content_en}</p>
                        </div>

                        <!-- Devotional Block -->
                        <div class="devotional-box p-5 sm:p-6 text-stone-800">
                            <div class="flex items-center mb-3 text-lime-800 opacity-80">
                                <i class="fas fa-church mr-2 text-xs"></i>
                                <h4 class="text-xs font-bold uppercase tracking-widest">灵修应用 Devotional</h4>
                            </div>
                            <h5 class="font-bold text-lime-900 mb-2 text-sm sm:text-base">${verse.devotional.title}</h5>
                            <p class="text-sm text-stone-700 leading-relaxed text-justify mb-2">${verse.devotional.content_zh}</p>
                            <p class="text-xs text-stone-500 font-serif italic en-text mt-3 pt-3 border-t border-lime-800/10">${verse.devotional.content_en}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderMethodology() {
            const container = document.getElementById('app-content');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto fade-in">
                    <div class="text-center mb-10">
                        <h2 class="text-2xl sm:text-3xl font-bold mb-2 serif text-stone-800">解经原则总结</h2>
                        <p class="text-stone-500 en-text">Methodology Summary</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Method 1 -->
                        <div class="bg-white p-6 rounded-2xl shadow-sm border-t-4 border-red-800">
                            <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center text-red-900 text-xl mb-4">
                                <i class="fas fa-university"></i>
                            </div>
                            <h3 class="text-lg font-bold text-stone-800 mb-2">1. 经文原意 (Contextual Exegesis)</h3>
                            <p class="text-xs text-stone-400 mb-4 uppercase tracking-wider">Metaphor & History</p>
                            <p class="text-sm text-stone-600 mb-4 leading-relaxed">
                                侧重于解析经文中丰富的比喻（无花果、蝗虫）以及历史对照（底比斯）。
                            </p>
                            <ul class="space-y-3 text-sm text-stone-700">
                                <li class="flex items-start"><i class="fas fa-check text-red-700 mt-1 mr-2 text-xs"></i> <span><strong>讽刺修辞：</strong> 分析那鸿如何用“美貌妓女”、“熟透无花果”来讽刺强权的脆弱。</span></li>
                                <li class="flex items-start"><i class="fas fa-check text-red-700 mt-1 mr-2 text-xs"></i> <span><strong>历史先例：</strong> 解释挪亚们（底比斯）的陷落如何作为对尼尼微的直接警告。</span></li>
                                <li class="flex items-start"><i class="fas fa-check text-red-700 mt-1 mr-2 text-xs"></i> <span><strong>罪的社会性：</strong> 强调尼尼微的罪不仅是宗教的，更是社会性和伦理性的（谎诈、强暴）。</span></li>
                            </ul>
                        </div>

                        <!-- Method 2 -->
                        <div class="bg-white p-6 rounded-2xl shadow-sm border-t-4 border-lime-600">
                            <div class="w-12 h-12 bg-lime-100 rounded-full flex items-center justify-center text-lime-800 text-xl mb-4">
                                <i class="fas fa-seedling"></i>
                            </div>
                            <h3 class="text-lg font-bold text-stone-800 mb-2">2. 灵修应用 (Devotional Application)</h3>
                            <p class="text-xs text-stone-400 mb-4 uppercase tracking-wider">Warning & Wisdom</p>
                            <p class="text-sm text-stone-600 mb-4 leading-relaxed">
                                将国家级的审判原则应用到个人生活的警醒中。
                            </p>
                            <ul class="space-y-3 text-sm text-stone-700">
                                <li class="flex items-start"><i class="fas fa-check text-lime-700 mt-1 mr-2 text-xs"></i> <span><strong>洞察诱惑：</strong> 学习看穿罪恶光鲜外表（美貌）背后的死亡本质。</span></li>
                                <li class="flex items-start"><i class="fas fa-check text-lime-700 mt-1 mr-2 text-xs"></i> <span><strong>摒弃骄傲：</strong> 从历史（底比斯）中学习谦卑，不重蹈覆辙。</span></li>
                                <li class="flex items-start"><i class="fas fa-check text-lime-700 mt-1 mr-2 text-xs"></i> <span><strong>依靠真理：</strong> 认识到建立在谎言和强暴上的成功，终必如无花果坠落。</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- Visualizer Logic ---
        
        function initTreeVisual() {
            const container = document.getElementById('figs-layer');
            if(!container) return;
            
            // Clear
            container.innerHTML = '';
            
            // Fig Positions (Relative to container)
            const positions = [
                {t: 200, l: 45}, {t: 180, l: 55}, 
                {t: 150, l: 40}, {t: 160, l: 60},
                {t: 120, l: 48}, {t: 130, l: 52}
            ];

            // Manually placing figs near branches (rough estimates for visuals)
            // The tree container is 360px high. Trunk base is at bottom.
            // Tree trunk height 150px.
            // Using absolute positioning from bottom logic might be easier or top.
            // Let's use Bottom positioning.
            
            const figsData = [
                {b: 220, l: 40}, {b: 240, l: 55}, 
                {b: 200, l: 30}, {b: 210, l: 65},
                {b: 180, l: 45}, {b: 190, l: 50}
            ];

            figsData.forEach((pos, i) => {
                const fig = document.createElement('div');
                fig.className = 'fig';
                fig.style.bottom = pos.b + 'px';
                fig.style.left = pos.l + '%';
                fig.innerHTML = '<i class="fas fa-fort-awesome"></i>';
                fig.id = `fig-${i}`;
                container.appendChild(fig);
            });
        }

        function shakeTree() {
            const tree = document.getElementById('tree-root');
            const mouth = document.getElementById('mouth');
            const msg = document.getElementById('viz-msg');
            const btn = document.getElementById('shake-btn');
            
            if(!tree) return;

            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i> Shaking...';

            // 1. Shake Tree
            tree.classList.add('shaking');
            
            // 2. Open Mouth
            mouth.style.bottom = '0';

            setTimeout(() => {
                // 3. Drop Figs
                const figs = document.querySelectorAll('.fig');
                figs.forEach((fig, index) => {
                    setTimeout(() => {
                        fig.classList.add('falling');
                    }, index * 100); // Staggered fall
                });

                msg.innerHTML = '<span class="text-red-400 font-bold">Fallen into the Eater!</span>';

                setTimeout(() => {
                    tree.classList.remove('shaking');
                    btn.innerHTML = '<i class="fas fa-check mr-1"></i> Consumed';
                    btn.classList.replace('bg-lime-700', 'bg-stone-700');
                    btn.classList.replace('border-lime-500', 'border-stone-500');
                }, 1500);

            }, 500);
        }

    </script>
</body>
</html>