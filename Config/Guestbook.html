<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>留言板 · Guestbook</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    font-family: "Microsoft YaHei", Arial, sans-serif;
    background: #f5f6fa;
    padding: 20px;
}
.container {
    max-width: 800px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 12px;
}
h1 { margin-bottom: 10px; }
textarea, input {
    width: 100%;
    margin: 8px 0;
    padding: 8px;
}
button {
    padding: 6px 14px;
    cursor: pointer;
}
.message {
    border-top: 1px solid #eee;
    padding: 10px 0;
}
.reply {
    margin-left: 20px;
    font-size: 0.9em;
    color: #555;
}
</style>
</head>
<body>

<div class="container">
    <h1>正在开发中，敬请期待...</h1>
    <h1>留言板 Guestbook</h1>
    <p>欢迎留言，彼此勉励</p>
    <input id="name" placeholder="你的名字（可留空）">
    <textarea id="content" placeholder="留言内容"></textarea>
    <button onclick="addMessage()">提交留言</button>

    <div id="messages"></div>
</div>

<script>
const STORAGE_KEY = "guestbook_messages";

function loadMessages() {
    return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
}

function saveMessages(msgs) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(msgs));
}

function addMessage() {
    const name = document.getElementById("name").value || "匿名";
    const content = document.getElementById("content").value.trim();
    if (!content) return;

    const msgs = loadMessages();
    msgs.unshift({ name, content, replies: [] });
    saveMessages(msgs);

    document.getElementById("content").value = "";
    render();
}

function addReply(index, text) {
    const msgs = loadMessages();
    msgs[index].replies.push(text);
    saveMessages(msgs);
    render();
}

function render() {
    const msgs = loadMessages();
    const box = document.getElementById("messages");
    box.innerHTML = "";

    msgs.forEach((m, i) => {
        const div = document.createElement("div");
        div.className = "message";
        div.innerHTML = `
            <strong>${m.name}</strong>：${m.content}
            <div>
                <input placeholder="回复…" onkeydown="if(event.key==='Enter') addReply(${i}, this.value)">
            </div>
            ${m.replies.map(r => `<div class="reply">↳ ${r}</div>`).join("")}
        `;
        box.appendChild(div);
    });
}

render();
</script>

</body>
</html>
